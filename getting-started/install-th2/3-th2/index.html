<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>3. Deploy th2 | th2 docs</title><meta name="gridsome:hash" content="2dff0073170b71fa5ddcb1811c9955fd1a5a711d"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="viewport" content="width=device-width, initial-scale=1"><meta data-vue-tag="ssr" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" hid="description" name="description" content="Documentation for th2 - the next-generation test automation framework for financial markets"><meta data-vue-tag="ssr" hid="keywords" name="keywords" content="Exactpro, th2, test automation, financial technologies, microservices, kubernetes, k8s"><meta data-vue-tag="ssr" hid="og:site_name" name="og:site_name" content="th2 documentation"><meta data-vue-tag="ssr" hid="og:type" name="og:type" content="website"><meta data-vue-tag="ssr" hid="og:title" name="og:title" content="th2 docs"><meta data-vue-tag="ssr" hid="og:description" name="og:description" content="Documentation for th2 - the next-generation test automation framework for financial markets"><meta data-vue-tag="ssr" hid="og:image" name="og:image" content="https://th2.dev/og-image.png"><meta data-vue-tag="ssr" hid="robot" name="robot" content="none"><meta data-vue-tag="ssr" hid="og:title" name="og:title" content="3. Deploy th2"><meta data-vue-tag="ssr" hid="description" name="description" content="3. Deploy th2

As all the environments are prepared, we can install th2."><meta data-vue-tag="ssr" hid="og:description" name="og:description" content="3. Deploy th2

As all the environments are prepared, we can install th2."><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.e540bc2f3d52bc007f88118187e3f363.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.e540bc2f3d52bc007f88118187e3f363.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.e540bc2f3d52bc007f88118187e3f363.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.e540bc2f3d52bc007f88118187e3f363.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="152x152" href="/assets/static/favicon.62d22cb.e540bc2f3d52bc007f88118187e3f363.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/assets/static/favicon.1539b60.e540bc2f3d52bc007f88118187e3f363.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="167x167" href="/assets/static/favicon.dc0cdc5.e540bc2f3d52bc007f88118187e3f363.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="180x180" href="/assets/static/favicon.7b22250.e540bc2f3d52bc007f88118187e3f363.png"><link data-vue-tag="ssr" rel="stylesheet" href="/css/materialdesignicons.min.css"><link data-vue-tag="ssr" rel="stylesheet" href="/css/roboto.css"><link data-vue-tag="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-vue-tag="ssr" rel="stylesheet" href="/css/lightTheme.css"><link rel="preload" href="/assets/css/0.styles.2da53807.css" as="style"><link rel="preload" href="/assets/js/app.823d22fb.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--documentation-vue.dccd437e.js" as="script"><link rel="preload" href="/assets/js/vue-remark--content--docs--getting-started--install-th-2--3-th-2-md.21ad5916.js" as="script"><link rel="prefetch" href="/assets/js/page--src--pages--404-vue.9da46942.js"><link rel="prefetch" href="/assets/js/page--src--pages--about-vue.269bacf1.js"><link rel="prefetch" href="/assets/js/page--src--pages--fundamentals--th2-net-on-github--dashboard-vue.a9f7417c.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.11f62feb.js"><link rel="prefetch" href="/assets/js/vendors~page--src--pages--fundamentals--th2-net-on-github--dashboard-vue.cd37e2e0.js"><link rel="prefetch" href="/assets/js/vendors~page--src--templates--documentation-vue.0f2d32f2.js"><link rel="prefetch" href="/assets/js/vue-remark--content--cache--readmes--readme--check-1-md.4bb475b3.js"><link rel="prefetch" href="/assets/js/vue-remark--content--cache--readmes--readme--check-2-recon-md.0e911473.js"><link rel="prefetch" href="/assets/js/vue-remark--content--cache--readmes--readme--codec-md.099e1fcd.js"><link rel="prefetch" href="/assets/js/vue-remark--content--cache--readmes--readme--conn-md.33f4ea56.js"><link rel="prefetch" href="/assets/js/vue-remark--content--cache--readmes--readme--readme-estore-md.d21f219f.js"><link rel="prefetch" href="/assets/js/vue-remark--content--cache--readmes--readme--readme-infra-operator-md.a9401338.js"><link rel="prefetch" href="/assets/js/vue-remark--content--cache--readmes--readme--readme-inframgr-md.ee02df42.js"><link rel="prefetch" href="/assets/js/vue-remark--content--cache--readmes--readme--readme-mstore-md.968cd0bd.js"><link rel="prefetch" href="/assets/js/vue-remark--content--cache--readmes--readme--th-2-infra-md.e51eb26d.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--cookbook--chain-verification--index-md.0dc9f40a.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--cookbook--index-md.e6ba32ff.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--cookbook--quick-setup-md.6e90b553.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--core--index-md.b1e4f97a.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--core--th-2-estore-md.fb71c5ec.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--core--th-2-mstore-md.0a9ccfdb.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--fundamentals--architecture-md.c1825c38.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--fundamentals--index-md.b19d56e1.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--fundamentals--key-concepts-md.1f79201c.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--fundamentals--script--index-md.bdcaa077.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--fundamentals--th-2-net-on-github-md.b0afacfc.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--getting-started--create-th-2-env-md.a97335ae.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--getting-started--index-md.bcb52d35.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--getting-started--install-th-2--1-base-system-md.fdb85583.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--getting-started--install-th-2--2-infra-schema-md.35ff661c.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--getting-started--install-th-2--index-md.0af84d09.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--getting-started--requirements--hardware-md.ff9982dc.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--getting-started--requirements--index-md.4e4a08ca.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--getting-started--requirements--os-and-network-md.30f5d088.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--getting-started--requirements--software-md.52ded66b.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--infrastructure--index-md.e4057f0f.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--infrastructure--infra-components--index-md.a7773aec.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--infrastructure--infra-components--th-2-infra-mgr-md.c3c12334.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--infrastructure--infra-components--th-2-infra-operator-md.40b9901a.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--infrastructure--th-2-infra-repository-md.38ad1ba8.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--infrastructure--th-2-infra-schema--links-md.88d51b71.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--infrastructure--th-2-infra-schema--pins-md.62ace98d.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--infrastructure--th-2-infra-schema-md.9c070077.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--modules--check-1--checkpoints-md.528bc606.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--modules--check-1--communication-md.66f637f3.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--modules--check-1--configuration-md.c1da8113.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--modules--check-1--index-md.7e391672.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--modules--check-1--rulerequests-md.6c46b3d2.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--modules--check-1--verification-rulerequests-md.2e818ea4.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--modules--check-2-recon--index-md.30299df2.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--modules--codec--index-md.11e5db71.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--modules--conn--index-md.96c4841b.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--modules--index-md.0fb5037e.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--readme--index-md.49e1fc48.js"><link rel="stylesheet" href="/assets/css/0.styles.2da53807.css"><style data-vue-tag="vuetify" type="text/css" id="vuetify-theme-stylesheet" nonce="undefined">.v-application a { color: #3f979f; }
.v-application .primary {
  background-color: #3f979f !important;
  border-color: #3f979f !important;
}
.v-application .primary--text {
  color: #3f979f !important;
  caret-color: #3f979f !important;
}
.v-application .primary.lighten-5 {
  background-color: #cfffff !important;
  border-color: #cfffff !important;
}
.v-application .primary--text.text--lighten-5 {
  color: #cfffff !important;
  caret-color: #cfffff !important;
}
.v-application .primary.lighten-4 {
  background-color: #b2ffff !important;
  border-color: #b2ffff !important;
}
.v-application .primary--text.text--lighten-4 {
  color: #b2ffff !important;
  caret-color: #b2ffff !important;
}
.v-application .primary.lighten-3 {
  background-color: #95eaf2 !important;
  border-color: #95eaf2 !important;
}
.v-application .primary--text.text--lighten-3 {
  color: #95eaf2 !important;
  caret-color: #95eaf2 !important;
}
.v-application .primary.lighten-2 {
  background-color: #79ced6 !important;
  border-color: #79ced6 !important;
}
.v-application .primary--text.text--lighten-2 {
  color: #79ced6 !important;
  caret-color: #79ced6 !important;
}
.v-application .primary.lighten-1 {
  background-color: #5cb2ba !important;
  border-color: #5cb2ba !important;
}
.v-application .primary--text.text--lighten-1 {
  color: #5cb2ba !important;
  caret-color: #5cb2ba !important;
}
.v-application .primary.darken-1 {
  background-color: #1d7d85 !important;
  border-color: #1d7d85 !important;
}
.v-application .primary--text.text--darken-1 {
  color: #1d7d85 !important;
  caret-color: #1d7d85 !important;
}
.v-application .primary.darken-2 {
  background-color: #00646c !important;
  border-color: #00646c !important;
}
.v-application .primary--text.text--darken-2 {
  color: #00646c !important;
  caret-color: #00646c !important;
}
.v-application .primary.darken-3 {
  background-color: #004c53 !important;
  border-color: #004c53 !important;
}
.v-application .primary--text.text--darken-3 {
  color: #004c53 !important;
  caret-color: #004c53 !important;
}
.v-application .primary.darken-4 {
  background-color: #00343c !important;
  border-color: #00343c !important;
}
.v-application .primary--text.text--darken-4 {
  color: #00343c !important;
  caret-color: #00343c !important;
}
.v-application .secondary {
  background-color: #1e2736 !important;
  border-color: #1e2736 !important;
}
.v-application .secondary--text {
  color: #1e2736 !important;
  caret-color: #1e2736 !important;
}
.v-application .secondary.lighten-5 {
  background-color: #969fb2 !important;
  border-color: #969fb2 !important;
}
.v-application .secondary--text.text--lighten-5 {
  color: #969fb2 !important;
  caret-color: #969fb2 !important;
}
.v-application .secondary.lighten-4 {
  background-color: #7c8598 !important;
  border-color: #7c8598 !important;
}
.v-application .secondary--text.text--lighten-4 {
  color: #7c8598 !important;
  caret-color: #7c8598 !important;
}
.v-application .secondary.lighten-3 {
  background-color: #636c7e !important;
  border-color: #636c7e !important;
}
.v-application .secondary--text.text--lighten-3 {
  color: #636c7e !important;
  caret-color: #636c7e !important;
}
.v-application .secondary.lighten-2 {
  background-color: #4b5465 !important;
  border-color: #4b5465 !important;
}
.v-application .secondary--text.text--lighten-2 {
  color: #4b5465 !important;
  caret-color: #4b5465 !important;
}
.v-application .secondary.lighten-1 {
  background-color: #343d4d !important;
  border-color: #343d4d !important;
}
.v-application .secondary--text.text--lighten-1 {
  color: #343d4d !important;
  caret-color: #343d4d !important;
}
.v-application .secondary.darken-1 {
  background-color: #081221 !important;
  border-color: #081221 !important;
}
.v-application .secondary--text.text--darken-1 {
  color: #081221 !important;
  caret-color: #081221 !important;
}
.v-application .secondary.darken-2 {
  background-color: #00000a !important;
  border-color: #00000a !important;
}
.v-application .secondary--text.text--darken-2 {
  color: #00000a !important;
  caret-color: #00000a !important;
}
.v-application .secondary.darken-3 {
  background-color: #000000 !important;
  border-color: #000000 !important;
}
.v-application .secondary--text.text--darken-3 {
  color: #000000 !important;
  caret-color: #000000 !important;
}
.v-application .secondary.darken-4 {
  background-color: #000000 !important;
  border-color: #000000 !important;
}
.v-application .secondary--text.text--darken-4 {
  color: #000000 !important;
  caret-color: #000000 !important;
}
.v-application .accent {
  background-color: #616161 !important;
  border-color: #616161 !important;
}
.v-application .accent--text {
  color: #616161 !important;
  caret-color: #616161 !important;
}
.v-application .accent.lighten-5 {
  background-color: #e6e6e6 !important;
  border-color: #e6e6e6 !important;
}
.v-application .accent--text.text--lighten-5 {
  color: #e6e6e6 !important;
  caret-color: #e6e6e6 !important;
}
.v-application .accent.lighten-4 {
  background-color: #c9c9c9 !important;
  border-color: #c9c9c9 !important;
}
.v-application .accent--text.text--lighten-4 {
  color: #c9c9c9 !important;
  caret-color: #c9c9c9 !important;
}
.v-application .accent.lighten-3 {
  background-color: #aeaeae !important;
  border-color: #aeaeae !important;
}
.v-application .accent--text.text--lighten-3 {
  color: #aeaeae !important;
  caret-color: #aeaeae !important;
}
.v-application .accent.lighten-2 {
  background-color: #949494 !important;
  border-color: #949494 !important;
}
.v-application .accent--text.text--lighten-2 {
  color: #949494 !important;
  caret-color: #949494 !important;
}
.v-application .accent.lighten-1 {
  background-color: #7a7a7a !important;
  border-color: #7a7a7a !important;
}
.v-application .accent--text.text--lighten-1 {
  color: #7a7a7a !important;
  caret-color: #7a7a7a !important;
}
.v-application .accent.darken-1 {
  background-color: #494949 !important;
  border-color: #494949 !important;
}
.v-application .accent--text.text--darken-1 {
  color: #494949 !important;
  caret-color: #494949 !important;
}
.v-application .accent.darken-2 {
  background-color: #333333 !important;
  border-color: #333333 !important;
}
.v-application .accent--text.text--darken-2 {
  color: #333333 !important;
  caret-color: #333333 !important;
}
.v-application .accent.darken-3 {
  background-color: #1e1e1e !important;
  border-color: #1e1e1e !important;
}
.v-application .accent--text.text--darken-3 {
  color: #1e1e1e !important;
  caret-color: #1e1e1e !important;
}
.v-application .accent.darken-4 {
  background-color: #040404 !important;
  border-color: #040404 !important;
}
.v-application .accent--text.text--darken-4 {
  color: #040404 !important;
  caret-color: #040404 !important;
}
.v-application .error {
  background-color: #b64c4c !important;
  border-color: #b64c4c !important;
}
.v-application .error--text {
  color: #b64c4c !important;
  caret-color: #b64c4c !important;
}
.v-application .error.lighten-5 {
  background-color: #ffd4cd !important;
  border-color: #ffd4cd !important;
}
.v-application .error--text.text--lighten-5 {
  color: #ffd4cd !important;
  caret-color: #ffd4cd !important;
}
.v-application .error.lighten-4 {
  background-color: #ffb7b1 !important;
  border-color: #ffb7b1 !important;
}
.v-application .error--text.text--lighten-4 {
  color: #ffb7b1 !important;
  caret-color: #ffb7b1 !important;
}
.v-application .error.lighten-3 {
  background-color: #ff9c97 !important;
  border-color: #ff9c97 !important;
}
.v-application .error--text.text--lighten-3 {
  color: #ff9c97 !important;
  caret-color: #ff9c97 !important;
}
.v-application .error.lighten-2 {
  background-color: #f2817d !important;
  border-color: #f2817d !important;
}
.v-application .error--text.text--lighten-2 {
  color: #f2817d !important;
  caret-color: #f2817d !important;
}
.v-application .error.lighten-1 {
  background-color: #d46664 !important;
  border-color: #d46664 !important;
}
.v-application .error--text.text--lighten-1 {
  color: #d46664 !important;
  caret-color: #d46664 !important;
}
.v-application .error.darken-1 {
  background-color: #993235 !important;
  border-color: #993235 !important;
}
.v-application .error--text.text--darken-1 {
  color: #993235 !important;
  caret-color: #993235 !important;
}
.v-application .error.darken-2 {
  background-color: #7c1520 !important;
  border-color: #7c1520 !important;
}
.v-application .error--text.text--darken-2 {
  color: #7c1520 !important;
  caret-color: #7c1520 !important;
}
.v-application .error.darken-3 {
  background-color: #5f000a !important;
  border-color: #5f000a !important;
}
.v-application .error--text.text--darken-3 {
  color: #5f000a !important;
  caret-color: #5f000a !important;
}
.v-application .error.darken-4 {
  background-color: #450000 !important;
  border-color: #450000 !important;
}
.v-application .error--text.text--darken-4 {
  color: #450000 !important;
  caret-color: #450000 !important;
}
.v-application .info {
  background-color: #5293c9 !important;
  border-color: #5293c9 !important;
}
.v-application .info--text {
  color: #5293c9 !important;
  caret-color: #5293c9 !important;
}
.v-application .info.lighten-5 {
  background-color: #e4ffff !important;
  border-color: #e4ffff !important;
}
.v-application .info--text.text--lighten-5 {
  color: #e4ffff !important;
  caret-color: #e4ffff !important;
}
.v-application .info.lighten-4 {
  background-color: #c6ffff !important;
  border-color: #c6ffff !important;
}
.v-application .info--text.text--lighten-4 {
  color: #c6ffff !important;
  caret-color: #c6ffff !important;
}
.v-application .info.lighten-3 {
  background-color: #a9e5ff !important;
  border-color: #a9e5ff !important;
}
.v-application .info--text.text--lighten-3 {
  color: #a9e5ff !important;
  caret-color: #a9e5ff !important;
}
.v-application .info.lighten-2 {
  background-color: #8cc9ff !important;
  border-color: #8cc9ff !important;
}
.v-application .info--text.text--lighten-2 {
  color: #8cc9ff !important;
  caret-color: #8cc9ff !important;
}
.v-application .info.lighten-1 {
  background-color: #6faee5 !important;
  border-color: #6faee5 !important;
}
.v-application .info--text.text--lighten-1 {
  color: #6faee5 !important;
  caret-color: #6faee5 !important;
}
.v-application .info.darken-1 {
  background-color: #3279ad !important;
  border-color: #3279ad !important;
}
.v-application .info--text.text--darken-1 {
  color: #3279ad !important;
  caret-color: #3279ad !important;
}
.v-application .info.darken-2 {
  background-color: #006193 !important;
  border-color: #006193 !important;
}
.v-application .info--text.text--darken-2 {
  color: #006193 !important;
  caret-color: #006193 !important;
}
.v-application .info.darken-3 {
  background-color: #004979 !important;
  border-color: #004979 !important;
}
.v-application .info--text.text--darken-3 {
  color: #004979 !important;
  caret-color: #004979 !important;
}
.v-application .info.darken-4 {
  background-color: #003360 !important;
  border-color: #003360 !important;
}
.v-application .info--text.text--darken-4 {
  color: #003360 !important;
  caret-color: #003360 !important;
}
.v-application .success {
  background-color: #00e676 !important;
  border-color: #00e676 !important;
}
.v-application .success--text {
  color: #00e676 !important;
  caret-color: #00e676 !important;
}
.v-application .success.lighten-5 {
  background-color: #ceffff !important;
  border-color: #ceffff !important;
}
.v-application .success--text.text--lighten-5 {
  color: #ceffff !important;
  caret-color: #ceffff !important;
}
.v-application .success.lighten-4 {
  background-color: #afffe4 !important;
  border-color: #afffe4 !important;
}
.v-application .success--text.text--lighten-4 {
  color: #afffe4 !important;
  caret-color: #afffe4 !important;
}
.v-application .success.lighten-3 {
  background-color: #8fffc8 !important;
  border-color: #8fffc8 !important;
}
.v-application .success--text.text--lighten-3 {
  color: #8fffc8 !important;
  caret-color: #8fffc8 !important;
}
.v-application .success.lighten-2 {
  background-color: #6dffac !important;
  border-color: #6dffac !important;
}
.v-application .success--text.text--lighten-2 {
  color: #6dffac !important;
  caret-color: #6dffac !important;
}
.v-application .success.lighten-1 {
  background-color: #47ff91 !important;
  border-color: #47ff91 !important;
}
.v-application .success--text.text--lighten-1 {
  color: #47ff91 !important;
  caret-color: #47ff91 !important;
}
.v-application .success.darken-1 {
  background-color: #00c95c !important;
  border-color: #00c95c !important;
}
.v-application .success--text.text--darken-1 {
  color: #00c95c !important;
  caret-color: #00c95c !important;
}
.v-application .success.darken-2 {
  background-color: #00ad43 !important;
  border-color: #00ad43 !important;
}
.v-application .success--text.text--darken-2 {
  color: #00ad43 !important;
  caret-color: #00ad43 !important;
}
.v-application .success.darken-3 {
  background-color: #009129 !important;
  border-color: #009129 !important;
}
.v-application .success--text.text--darken-3 {
  color: #009129 !important;
  caret-color: #009129 !important;
}
.v-application .success.darken-4 {
  background-color: #00760d !important;
  border-color: #00760d !important;
}
.v-application .success--text.text--darken-4 {
  color: #00760d !important;
  caret-color: #00760d !important;
}
.v-application .warning {
  background-color: #ffc107 !important;
  border-color: #ffc107 !important;
}
.v-application .warning--text {
  color: #ffc107 !important;
  caret-color: #ffc107 !important;
}
.v-application .warning.lighten-5 {
  background-color: #ffffae !important;
  border-color: #ffffae !important;
}
.v-application .warning--text.text--lighten-5 {
  color: #ffffae !important;
  caret-color: #ffffae !important;
}
.v-application .warning.lighten-4 {
  background-color: #ffff91 !important;
  border-color: #ffff91 !important;
}
.v-application .warning--text.text--lighten-4 {
  color: #ffff91 !important;
  caret-color: #ffff91 !important;
}
.v-application .warning.lighten-3 {
  background-color: #ffff74 !important;
  border-color: #ffff74 !important;
}
.v-application .warning--text.text--lighten-3 {
  color: #ffff74 !important;
  caret-color: #ffff74 !important;
}
.v-application .warning.lighten-2 {
  background-color: #fff956 !important;
  border-color: #fff956 !important;
}
.v-application .warning--text.text--lighten-2 {
  color: #fff956 !important;
  caret-color: #fff956 !important;
}
.v-application .warning.lighten-1 {
  background-color: #ffdd37 !important;
  border-color: #ffdd37 !important;
}
.v-application .warning--text.text--lighten-1 {
  color: #ffdd37 !important;
  caret-color: #ffdd37 !important;
}
.v-application .warning.darken-1 {
  background-color: #e0a600 !important;
  border-color: #e0a600 !important;
}
.v-application .warning--text.text--darken-1 {
  color: #e0a600 !important;
  caret-color: #e0a600 !important;
}
.v-application .warning.darken-2 {
  background-color: #c18c00 !important;
  border-color: #c18c00 !important;
}
.v-application .warning--text.text--darken-2 {
  color: #c18c00 !important;
  caret-color: #c18c00 !important;
}
.v-application .warning.darken-3 {
  background-color: #a27300 !important;
  border-color: #a27300 !important;
}
.v-application .warning--text.text--darken-3 {
  color: #a27300 !important;
  caret-color: #a27300 !important;
}
.v-application .warning.darken-4 {
  background-color: #855a00 !important;
  border-color: #855a00 !important;
}
.v-application .warning--text.text--darken-4 {
  color: #855a00 !important;
  caret-color: #855a00 !important;
}</style><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <div data-app="true" data-server-rendered="true" id="app" id="app" class="v-application v-application--is-ltr theme--light"><div class="v-application--wrap"><div data-v-7b23e68f><header class="top-layout v-sheet theme--light v-toolbar v-app-bar v-app-bar--fixed secondary" style="height:56px;margin-top:0px;transform:translateY(0px);left:0px;right:0px;" data-v-7b23e68f><div class="v-toolbar__content" style="height:56px;"><div class="header-container" data-v-7b23e68f><a href="/" class="logo-container active" data-v-7b23e68f><img src="/assets/img/Th2Logo_full_white.37da6040.png" data-v-7b23e68f></a><div class="search-container" data-v-e54dafa2 data-v-7b23e68f><button class="search-btn" data-v-e54dafa2><i aria-hidden="true" class="v-icon notranslate mdi mdi-magnify theme--dark" data-v-e54dafa2></i><span data-v-e54dafa2>
    Search
  </span></button><div class="v-dialog__container" data-v-e54dafa2><!----></div></div><div class="header-btns" data-v-7b23e68f><a href="https://github.com/th2-net/th2-docs" target="_blank" class="v-btn v-btn--icon v-btn--round theme--dark v-size--default" data-v-7b23e68f><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-github theme--dark" data-v-7b23e68f></i></span></a><button type="button" class="v-btn v-btn--icon v-btn--round theme--dark v-size--default" data-v-a8cf542a data-v-7b23e68f><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-brightness-5 theme--dark" data-v-a8cf542a></i></span></button><button type="button" class="v-btn v-btn--icon v-btn--round theme--dark v-size--default" data-v-7b23e68f><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-menu theme--dark" data-v-7b23e68f></i></span></button></div></div></div></header><aside class="layout__aside--left--sm pt-16 px-5 v-navigation-drawer v-navigation-drawer--close v-navigation-drawer--fixed v-navigation-drawer--is-mobile theme--light" style="height:100%;top:0px;transform:translateX(-100%);width:90vw;min-width:300px;" data-v-7b23e68f><div class="v-navigation-drawer__content"><aside class="pt-5 content-tree-panel pl-3" data-v-34f442ea data-v-7b23e68f><div class="sticky-tree px-3 ml-n3" data-v-34f442ea><!----><div class="py-2" data-v-34f442ea><a href="/" class="main-section" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea><span data-v-34f442ea> Home </span></div></a></div><div class="py-2" data-v-34f442ea><a href="/getting-started/" class="main-section" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea><span data-v-34f442ea>
              Getting started
            </span></div></a><div class="v-treeview ml-n3 v-treeview--dense theme--light" data-v-34f442ea><div aria-expanded="false" class="v-treeview-node"><div class="v-treeview-node__root"><button type="button" class="v-icon notranslate v-treeview-node__toggle v-icon--link mdi mdi-menu-down theme--light"></button><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/getting-started/requirements/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								System requirements
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node"><div class="v-treeview-node__root"><button type="button" class="v-icon notranslate v-treeview-node__toggle v-icon--link mdi mdi-menu-down theme--light"></button><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/getting-started/install-th2/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								Install th2
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/getting-started/create-th2-env/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								Create th2 environment
							</div></a></div></div></div></div></div></div><div class="py-2" data-v-34f442ea><a href="/fundamentals/" class="main-section" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea><span data-v-34f442ea>
              Fundamentals
            </span></div></a><div class="v-treeview ml-n3 v-treeview--dense theme--light" data-v-34f442ea><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/fundamentals/architecture/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								Architecture
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node"><div class="v-treeview-node__root"><button type="button" class="v-icon notranslate v-treeview-node__toggle v-icon--link mdi mdi-menu-down theme--light"></button><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/fundamentals/th2-net-on-github/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								th2-net on GitHub
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/fundamentals/key-concepts/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								Key concepts
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/fundamentals/script/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								Script
							</div></a></div></div></div></div></div></div><div class="py-2" data-v-34f442ea><a href="/infrastructure/" class="main-section" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea><span data-v-34f442ea>
              Infrastructure
            </span></div></a><div class="v-treeview ml-n3 v-treeview--dense theme--light" data-v-34f442ea><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/infrastructure/th2-infra-repository/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								th2-infra
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node"><div class="v-treeview-node__root"><button type="button" class="v-icon notranslate v-treeview-node__toggle v-icon--link mdi mdi-menu-down theme--light"></button><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/infrastructure/th2-infra-schema/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								th2-infra-schema
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node"><div class="v-treeview-node__root"><button type="button" class="v-icon notranslate v-treeview-node__toggle v-icon--link mdi mdi-menu-down theme--light"></button><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/infrastructure/infra-components/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								th2-infra components
							</div></a></div></div></div></div></div></div><div class="py-2" data-v-34f442ea><a href="/core/" class="main-section" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea><span data-v-34f442ea>
              Core
            </span></div></a><div class="v-treeview ml-n3 v-treeview--dense theme--light" data-v-34f442ea><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/core/th2-estore/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								th2-estore
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/core/th2-mstore/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								th2-mstore
							</div></a></div></div></div></div></div></div><div class="py-2" data-v-34f442ea><a href="/modules/" class="main-section" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea><span data-v-34f442ea>
              Modules
            </span></div></a><div class="v-treeview ml-n3 v-treeview--dense theme--light" data-v-34f442ea><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/modules/conn/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								conn
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/modules/codec/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								codec
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node"><div class="v-treeview-node__root"><button type="button" class="v-icon notranslate v-treeview-node__toggle v-icon--link mdi mdi-menu-down theme--light"></button><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/modules/check1/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								check1
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/modules/check2-recon/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								check2-recon
							</div></a></div></div></div></div></div></div><div class="py-2" data-v-34f442ea><a href="/cookbook/" class="main-section" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea><span data-v-34f442ea>
              ðŸ“– Cookbook
            </span></div></a><div class="v-treeview ml-n3 v-treeview--dense theme--light" data-v-34f442ea><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/cookbook/quick-setup/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								Quick th2 setup
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/cookbook/chain-verification/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								Chain Verification
							</div></a></div></div></div></div></div></div><div class="py-2" data-v-34f442ea><a href="/readme/" class="main-section" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea><span data-v-34f442ea>
              Readme Files
            </span></div></a><div class="v-treeview ml-n3 v-treeview--dense theme--light" data-v-34f442ea><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/th2-infra/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								th2 infra
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/readme-inframgr/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								infra-mgr
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/readme-infra-operator/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								infra-operator
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/readme-mstore/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								mstore
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/readme-estore/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								estore
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/check1/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								check1
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/check2recon/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								check2-recon
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/codec/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								codec
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/conn/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								conn
							</div></a></div></div></div></div></div></div></div></aside></div><div class="v-navigation-drawer__border"></div></aside><main class="v-main" style="padding-top:896px;padding-right:0px;padding-bottom:0px;padding-left:0px;" data-v-7b23e68f><div class="v-main__wrap"><div class="layout--full" data-v-7b23e68f><aside class="pt-5 content-tree-panel layout__aside--left--lg" data-v-34f442ea data-v-7b23e68f><div class="sticky-tree px-3 ml-n3" data-v-34f442ea><!----><div class="py-2" data-v-34f442ea><a href="/" class="main-section" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea><span data-v-34f442ea> Home </span></div></a></div><div class="py-2" data-v-34f442ea><a href="/getting-started/" class="main-section" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea><span data-v-34f442ea>
              Getting started
            </span></div></a><div class="v-treeview ml-n3 v-treeview--dense theme--light" data-v-34f442ea><div aria-expanded="false" class="v-treeview-node"><div class="v-treeview-node__root"><button type="button" class="v-icon notranslate v-treeview-node__toggle v-icon--link mdi mdi-menu-down theme--light"></button><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/getting-started/requirements/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								System requirements
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node"><div class="v-treeview-node__root"><button type="button" class="v-icon notranslate v-treeview-node__toggle v-icon--link mdi mdi-menu-down theme--light"></button><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/getting-started/install-th2/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								Install th2
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/getting-started/create-th2-env/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								Create th2 environment
							</div></a></div></div></div></div></div></div><div class="py-2" data-v-34f442ea><a href="/fundamentals/" class="main-section" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea><span data-v-34f442ea>
              Fundamentals
            </span></div></a><div class="v-treeview ml-n3 v-treeview--dense theme--light" data-v-34f442ea><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/fundamentals/architecture/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								Architecture
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node"><div class="v-treeview-node__root"><button type="button" class="v-icon notranslate v-treeview-node__toggle v-icon--link mdi mdi-menu-down theme--light"></button><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/fundamentals/th2-net-on-github/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								th2-net on GitHub
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/fundamentals/key-concepts/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								Key concepts
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/fundamentals/script/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								Script
							</div></a></div></div></div></div></div></div><div class="py-2" data-v-34f442ea><a href="/infrastructure/" class="main-section" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea><span data-v-34f442ea>
              Infrastructure
            </span></div></a><div class="v-treeview ml-n3 v-treeview--dense theme--light" data-v-34f442ea><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/infrastructure/th2-infra-repository/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								th2-infra
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node"><div class="v-treeview-node__root"><button type="button" class="v-icon notranslate v-treeview-node__toggle v-icon--link mdi mdi-menu-down theme--light"></button><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/infrastructure/th2-infra-schema/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								th2-infra-schema
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node"><div class="v-treeview-node__root"><button type="button" class="v-icon notranslate v-treeview-node__toggle v-icon--link mdi mdi-menu-down theme--light"></button><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/infrastructure/infra-components/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								th2-infra components
							</div></a></div></div></div></div></div></div><div class="py-2" data-v-34f442ea><a href="/core/" class="main-section" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea><span data-v-34f442ea>
              Core
            </span></div></a><div class="v-treeview ml-n3 v-treeview--dense theme--light" data-v-34f442ea><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/core/th2-estore/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								th2-estore
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/core/th2-mstore/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								th2-mstore
							</div></a></div></div></div></div></div></div><div class="py-2" data-v-34f442ea><a href="/modules/" class="main-section" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea><span data-v-34f442ea>
              Modules
            </span></div></a><div class="v-treeview ml-n3 v-treeview--dense theme--light" data-v-34f442ea><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/modules/conn/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								conn
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/modules/codec/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								codec
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node"><div class="v-treeview-node__root"><button type="button" class="v-icon notranslate v-treeview-node__toggle v-icon--link mdi mdi-menu-down theme--light"></button><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/modules/check1/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								check1
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/modules/check2-recon/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								check2-recon
							</div></a></div></div></div></div></div></div><div class="py-2" data-v-34f442ea><a href="/cookbook/" class="main-section" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea><span data-v-34f442ea>
              ðŸ“– Cookbook
            </span></div></a><div class="v-treeview ml-n3 v-treeview--dense theme--light" data-v-34f442ea><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/cookbook/quick-setup/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								Quick th2 setup
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/cookbook/chain-verification/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								Chain Verification
							</div></a></div></div></div></div></div></div><div class="py-2" data-v-34f442ea><a href="/readme/" class="main-section" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea><span data-v-34f442ea>
              Readme Files
            </span></div></a><div class="v-treeview ml-n3 v-treeview--dense theme--light" data-v-34f442ea><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/th2-infra/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								th2 infra
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/readme-inframgr/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								infra-mgr
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/readme-infra-operator/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								infra-operator
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/readme-mstore/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								mstore
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/readme-estore/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								estore
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/check1/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								check1
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/check2recon/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								check2-recon
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/codec/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								codec
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/conn/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								conn
							</div></a></div></div></div></div></div></div></div></aside><div class="layout__doc-page"><div class="container layout__main space-bottom"><article><!----><!----><div class="doc-article"><h1 id="3-deploy-th2"><a href="#3-deploy-th2" aria-hidden="true">#</a>3. Deploy th2</h1><p>As all the environments are prepared, we can install th2.</p><h2 id="prerequisites"><a href="#prerequisites" aria-hidden="true">#</a>Prerequisites</h2><p>Before you begin, please check that you have:</p><ul><li>fully functioning Kubernetes cluster suitable for your business needs (please refer to <a href="../../requirements/">technical requirements</a>);</li><li>an operator box that meets <a href="../../requirements/hardware/">hardware</a> and <a href="../../requirements/software/">software</a> requirements;</li><li>installed <a href="https://cassandra.apache.org/" target="_blank" rel="nofollow noopener noreferrer">Apache Cassandra</a> (<a href="../../requirements/hardware#apache-cassandra-cluster-hardware-requirements">technical requirements</a>).</li></ul><p>All th2 components are deployed via Helm charts by <a href="https://helm.sh/" target="_blank" rel="nofollow noopener noreferrer">Helm</a> and <a href="https://docs.fluxcd.io/projects/helm-operator/en/stable/" target="_blank" rel="nofollow noopener noreferrer">Helm Operator</a>.</p><h2 id="download-infra-values"><a href="#download-infra-values" aria-hidden="true">#</a>Download infra values</h2><p>Installation of th2-infra requires a Git repository for maintaining th2 infra-schema configuration. 
The information regarding this repository and its usage can be found in the guide further.</p><ul><li><a href="https://github.com/th2-net/th2-infra/tree/master/example-values" target="_blank" rel="nofollow noopener noreferrer">These example values</a> can be used as a starter kit for th2 infra, we also recommend storing these values in a separate Git repository.</li></ul><p>The first step of the th2 deployment process is copying th2-infra repository into your operator box:</p><div class="remark-highlight"><pre class="language-shell"><code class="language-shell"><span class="token function">git</span> clone -b v1.7.3 https://github.com/th2-net/th2-infra.git
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><p>Change the current directory:</p><div class="remark-highlight"><pre class="language-shell"><code class="language-shell"><span class="token builtin class-name">cd</span> ./th2-infra/example-values
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><h2 id="infrastructure-namespaces"><a href="#infrastructure-namespaces" aria-hidden="true">#</a>Infrastructure namespaces</h2><p>Inside the cluster separate namespaces can be created. Custom infra-schemas can have their namespaces.</p><div role="alert" class="v-alert my-3 v-sheet theme--light v-alert--border v-alert--text v-alert--border-left blue--text text--darken-4" data-v-e2b44c62><div class="v-alert__wrapper"><i aria-hidden="true" class="v-icon notranslate v-alert__icon mdi mdi-information-outline theme--light blue--text text--darken-4"></i><div class="v-alert__content"><p>The &quot;infra-schema&quot; part in the <em>infra-schema</em> namespace is a placeholder to be replaced with a user-defined name of a custom infra-schema (corresponds to the name of the repository branch containing a particular infra-schema implementation).</p></div><div class="v-alert__border v-alert__border--left"></div></div></div><p>Infrastructure components are split into two namespaces: <em>monitoring</em> and <em>service</em>. These namespaces will be created below.</p><p>The following components of monitoring stack are deployed into <em>monitoring</em> namespace:</p><nav data-v-4fa5e70c><div class="row row--dense my-2" data-v-4fa5e70c><div class="col-lg-4 col-sm-6 col-12" data-v-4fa5e70c><a tabindex="0" href="https://grafana.com/oss/grafana/" target="_blank" class="v-sheet--outlined rounded v-list-item v-list-item--link theme--light" data-v-4fa5e70c><div class="v-list-item__icon" data-v-4fa5e70c><i aria-hidden="true" class="v-icon notranslate mdi mdi-monitor-dashboard theme--light" style="color:#a87132;caret-color:#a87132;" data-v-4fa5e70c></i></div><div class="v-list-item__content" data-v-4fa5e70c><div class="v-list-item__title text-wrap" data-v-4fa5e70c>
            Grafana
          </div></div></a></div><div class="col-lg-4 col-sm-6 col-12" data-v-4fa5e70c><a tabindex="0" href="https://grafana.com/oss/loki/" target="_blank" class="v-sheet--outlined rounded v-list-item v-list-item--link theme--light" data-v-4fa5e70c><div class="v-list-item__icon" data-v-4fa5e70c><i aria-hidden="true" class="v-icon notranslate mdi mdi-database theme--light" style="color:#a88f32;caret-color:#a88f32;" data-v-4fa5e70c></i></div><div class="v-list-item__content" data-v-4fa5e70c><div class="v-list-item__title text-wrap" data-v-4fa5e70c>
            Loki
          </div></div></a></div><div class="col-lg-4 col-sm-6 col-12" data-v-4fa5e70c><a tabindex="0" href="https://grafana.com/oss/prometheus/" target="_blank" class="v-sheet--outlined rounded v-list-item v-list-item--link theme--light" data-v-4fa5e70c><div class="v-list-item__icon" data-v-4fa5e70c><i aria-hidden="true" class="v-icon notranslate mdi mdi-database theme--light" style="color:#a87132;caret-color:#a87132;" data-v-4fa5e70c></i></div><div class="v-list-item__content" data-v-4fa5e70c><div class="v-list-item__title text-wrap" data-v-4fa5e70c>
            Prometheus
          </div></div></a></div></div></nav><p>The <em>service</em> namespace is used for infrastructure services:</p><nav data-v-4fa5e70c><div class="row row--dense my-2" data-v-4fa5e70c><div class="col-lg-4 col-sm-6 col-12" data-v-4fa5e70c><a tabindex="0" href="https://kubernetes.io/docs/tasks/access-application-cluster/web-ui-dashboard/" target="_blank" class="v-sheet--outlined rounded v-list-item v-list-item--link theme--light" data-v-4fa5e70c><div class="v-list-item__icon" data-v-4fa5e70c><i aria-hidden="true" class="v-icon notranslate mdi mdi-kubernetes theme--light" style="color:#3271a8;caret-color:#3271a8;" data-v-4fa5e70c></i></div><div class="v-list-item__content" data-v-4fa5e70c><div class="v-list-item__title text-wrap" data-v-4fa5e70c>
            kubernetes-dashboard
          </div></div></a></div><div class="col-lg-4 col-sm-6 col-12" data-v-4fa5e70c><a tabindex="0" href="https://www.rabbitmq.com/" target="_blank" class="v-sheet--outlined rounded v-list-item v-list-item--link theme--light" data-v-4fa5e70c><div class="v-list-item__icon" data-v-4fa5e70c><i aria-hidden="true" class="v-icon notranslate mdi mdi-factory theme--light" style="color:#a87132;caret-color:#a87132;" data-v-4fa5e70c></i></div><div class="v-list-item__content" data-v-4fa5e70c><div class="v-list-item__title text-wrap" data-v-4fa5e70c>
            RabbitMQ
          </div></div></a></div><div class="col-lg-4 col-sm-6 col-12" data-v-4fa5e70c><a tabindex="0" href="https://kubernetes.github.io/ingress-nginx/" target="_blank" class="v-sheet--outlined rounded v-list-item v-list-item--link theme--light" data-v-4fa5e70c><div class="v-list-item__icon" data-v-4fa5e70c><i aria-hidden="true" class="v-icon notranslate mdi mdi-router theme--light" style="color:#4ea832;caret-color:#4ea832;" data-v-4fa5e70c></i></div><div class="v-list-item__content" data-v-4fa5e70c><div class="v-list-item__title text-wrap" data-v-4fa5e70c>
            NGINX Ingress Controller
          </div></div></a></div><div class="col-lg-4 col-sm-6 col-12" data-v-4fa5e70c><a tabindex="0" href="https://github.com/fluxcd/helm-operator" target="_blank" class="v-sheet--outlined rounded v-list-item v-list-item--link theme--light" data-v-4fa5e70c><div class="v-list-item__icon" data-v-4fa5e70c><i aria-hidden="true" class="v-icon notranslate mdi mdi-layers theme--light" style="color:#3285a8;caret-color:#3285a8;" data-v-4fa5e70c></i></div><div class="v-list-item__content" data-v-4fa5e70c><div class="v-list-item__title text-wrap" data-v-4fa5e70c>
            Helm Operator
          </div></div></a></div></div></nav>
  
and for th2-infra components:
<nav data-v-4fa5e70c><div class="row row--dense my-2" data-v-4fa5e70c><div class="col-lg-4 col-sm-6 col-12" data-v-4fa5e70c><a tabindex="0" href="https://github.com/th2-net/th2-infra-editor-v2" target="_blank" class="v-sheet--outlined rounded v-list-item v-list-item--link theme--light" data-v-4fa5e70c><div class="v-list-item__icon" data-v-4fa5e70c><i aria-hidden="true" class="v-icon notranslate mdi mdi-monitor-edit theme--light primary--text" data-v-4fa5e70c></i></div><div class="v-list-item__content" data-v-4fa5e70c><div class="v-list-item__title text-wrap" data-v-4fa5e70c>
            th2-infra-editor
          </div></div></a></div><div class="col-lg-4 col-sm-6 col-12" data-v-4fa5e70c><a tabindex="0" href="https://github.com/th2-net/th2-infra-operator" target="_blank" class="v-sheet--outlined rounded v-list-item v-list-item--link theme--light" data-v-4fa5e70c><div class="v-list-item__icon" data-v-4fa5e70c><i aria-hidden="true" class="v-icon notranslate mdi mdi-layers theme--light primary--text" data-v-4fa5e70c></i></div><div class="v-list-item__content" data-v-4fa5e70c><div class="v-list-item__title text-wrap" data-v-4fa5e70c>
            th2-infra-operator
          </div></div></a></div><div class="col-lg-4 col-sm-6 col-12" data-v-4fa5e70c><a tabindex="0" href="https://github.com/th2-net/th2-infra-mgr" target="_blank" class="v-sheet--outlined rounded v-list-item v-list-item--link theme--light" data-v-4fa5e70c><div class="v-list-item__icon" data-v-4fa5e70c><i aria-hidden="true" class="v-icon notranslate mdi mdi-radar theme--light primary--text" data-v-4fa5e70c></i></div><div class="v-list-item__content" data-v-4fa5e70c><div class="v-list-item__title text-wrap" data-v-4fa5e70c>
            th2-infra-mgr
          </div></div></a></div><div class="col-lg-4 col-sm-6 col-12" data-v-4fa5e70c><a tabindex="0" href="https://github.com/th2-net/infra-operator-tpl" target="_blank" class="v-sheet--outlined rounded v-list-item v-list-item--link theme--light" data-v-4fa5e70c><div class="v-list-item__icon" data-v-4fa5e70c><i aria-hidden="true" class="v-icon notranslate mdi mdi-file-document-outline theme--light primary--text" data-v-4fa5e70c></i></div><div class="v-list-item__content" data-v-4fa5e70c><div class="v-list-item__title text-wrap" data-v-4fa5e70c>
            th2-infra-repo
          </div></div></a></div></div></nav><h3 id="create-namespaces"><a href="#create-namespaces" aria-hidden="true">#</a>Create namespaces</h3><div class="remark-highlight"><pre class="language-shell"><code class="language-shell">kubectl create namespace monitoring
kubectl create namespace <span class="token function">service</span>
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><div class="my-4 v-item-group theme--light v-expansion-panels"><div aria-expanded="false" class="v-expansion-panel"><button type="button" class="v-expansion-panel-header">
      Output example
    <div class="v-expansion-panel-header__icon"><i aria-hidden="true" class="v-icon notranslate mdi mdi-chevron-down theme--light"></i></div></button><div class="v-expansion-panel-content" style="display:none;"><div class="v-expansion-panel-content__wrap"><div class="remark-highlight"><pre class="language-shell"><code class="language-shell">$ kubectl create namespace monitoring
namespace/monitoring created
$ kubectl create namespace <span class="token function">service</span>
namespace/service created
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div></div></div></div></div><p>The following pictures describe <em>service</em> and <em>monitoring</em> namespaces:</p><p><img alt="service_namespace" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 695 665' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-70fca57175975e898dbcf7124515baac'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-70fca57175975e898dbcf7124515baac)' width='695' height='665' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAA9CAYAAAAd1W/BAAAACXBIWXMAAAsSAAALEgHS3X78AAAQK0lEQVRo3s2b%2b29cRxXH86/AL4ifEBI/0L8ABBI/FAkkqEDlDUKoVBTRUrW8oS1VVVpKoa3aUPpI6SMNTtImqZPYTuwmmzpxnMSx4/ixXnvfu3fvPryP68N8ZvdsZq%2bvd93UabLS0Z25M/femTPf85zZXaOjoy8uLy9PXb169dTCwkLsRlAqsRjLp5bsdas%2b5vuxG/X9iG%2bdYs4TExN7dlGQG/yby4o8OdyUmbTcUr9kMjm3C25QCYKgubGxEewUNVtBwGvH56rB5%2b5fDj5x12Lw2fuWg9GZqr0/iPjt5HhcYq7MeWVlZWoXkKDSaZQPQ53nNnGWe81W%2b/6jBwry6XuW5TP3LsunfrEkD/2vaO425b3ho/Luu%2b%2bKgaGcO3dO3n//fTlz5ozs379fqtVq9z1R7/%2boP%2bbKNZFITHcZAFuu40Vb3jfrZ8vjczW57Tcrlgm3PRiXE3N1adUrMjS0Xw4dOiTT09OWAePj43L69Gk5ePCgtFqtvu%2b/IQzgZj6fl1wuJ5lMRkqlkpTLZVvnfrFYtNdsNivpdFqUX/0Qokx4b7oijwwV5N2pSueZ/gPku57nDXz/9ZIudg8DAMHly5ftinzwwQdidIOlqakpC01WaXJy0tZpr9Vq2%2bR2dL0zkB7SFY/H48jnjdR/1xgwNzcXA3JmxYN6vW65jwxWKpVu2fd9W%2bYedcoQKKEN0v6biPZyRYqeLyW//Q6IZ1ypazabUigUut%2bCfL/cret3wqTj0D7b6WvKdq5LS0vTu2ZnZ2Md2AUGDbK2tgZnLK2urto6YgDsEQ0lFRUVCfrqM245fF1cXJRGo2GZwKRdBjC4NjoCaTRbVhc0zbVprkHQrsO07V7D97SsCDAIbyOASrHoBUyKX6MZ2A93bKXV1hcvXpRjx45ZrX3p0iUZGRmRWCwmY2NjVkTcj0ZBW1c7lUpZ8VlfX9/EANAFc5aWlsUvpCWXSYqXS0k%2bmzTMW7OLoYsSVXbrUcRcjN8D868xQBFglE6QNxAM/xgo8ogCZKUhGMWKggAmVIh4biuLwTMwAIpigI8CLORkcrkl9%2b3JysNGecZzzZ3Q/NKZJ%2bO1DJifn%2b9FgF8qir8u8u/Rkhy7hC3u1WC6okwYJqhO0DoEp7UOxxVV22FAxbyrWa/K9Hxa7n%2b9KMMXKvLqeEn%2bbHwHzyvahYDxvJfV1oVRsWV1aaPOQoWtiDLAWLTNCKj4pWAxkZN7XyvIE4eKct9rOcsIO3HzMEhgtXn5iRMnLGERLly4YAkRQTwQC0TkypUrtmy43GWeywCFu8uActkwfaMmb46tyENDnpH9QPJ%2bU37%2bUl4uzSfk9PvjVvRwmk6dOiUmjrHWCRE8evSo/T5t3Dfz6mGAft9lQA8CpOEHrxxPyPMjZWurCpWW/PKVrNSbGz1IYGJ8HNLJfpifMiBKB7QZU5F0Ni93v%2bLJt57OyO2Pp%2bWpI/6O2T8sgYpADwLq1VIwcTEtdz6TlRdGPHnwjZz8%2brVc98FGo2m5xwTgOEjAagA7Vh8yzLQMOn/%2bPCZGzp49a%2bszMzO2Hz%2bguRUCrIk1YpVajUs8VZTnDq3InpFV64R5xYKBe8GKF7DnOoh4Tok6VgaxidQB%2bYIXtGqeHL1Ulzv/mZJ7Xs6KVw26zguDxZYCadxWHCYQABJAATKJiKhiRPZxaDCTlBmEy4CwDsCKoFP4Yf%2brFYPEwIhEq9L1Bz4sRfklHf/DTswsYK8VyOXyYd3ZMWNBV4aYKJ4gqwsTuOrktvPrhwAGiLzmrOtdkKZZkPVK0a4833CdL64gUifb0e4DicUw34r2A3jRjf4B3346oGy8xuRqQjy/JruPpuRALGv6ti0N6GMBECc1w5RBGu9Vb1S9TZe4z/uxEqbvZh2Ae4isXl1YlJXlBVlaXJAr81etLKujgfyECc%2bOmAF9MIjoS7zBykchADNYM0owmc7LH/b58thBdFFBdo8ZhlVLcujwEatPsAQnT560SDx%2b/LgltTaDfixypBWAAYtm0uViRs7OrMhSfFV8U75yZd6GrZgZTAwfxwTiFVJGyal5HET0gxHKgDACyhUj80FN/jeekCcO%2b0YvBEYPteRXr2alVNuZ0HhLPwAdgFz9N9aQX%2b4pygNvenJpDTXQlLPnpuSiUXRMAm2vdh/ablSoP2SwnyPUMo7QB5dT8r3ncvLiWEkePVCUu1/KWZFZNMxjpUEeihfkYXlAKfdBGEjFB6CNK/dZJJAXRkAPA1rrpWB4Mmm9roVUXY4bT/A3b2R3MgnR1wqoDiBirHoZ8/2afOPJhPzgmTVZyTUsY%2bJm4hpYwQRX9DR8Z5GYMBNHRLRMHxQ5uqJHB7iO0GsjCXnwzaKkik2Jzdfkp7tNFJjJyYQxe3hc2HdehCjgdSGPeF3II9kc/AM%2bRt5A%2b2Mq4T5iwwqpEtwqFsAcrqwkpGSCobqfsZTLpCRpTWvWmlU1rWHShE1nkl2fQRM9iCDMM9/ejABgQSzw270l%2bfJfk/LFh9dkbM4oqVbNTC5mJwI31R9As2oZuVLzxMRoUxOlGl8nxwC3MoMMWOMNwuE61GhZXaDh7EchJ0INqPcgACWYiC9b03JyKiFTs6tSKmatiTlzJmZXmRV3Oa55AeUw5K6Orpa7asgrE49yhNR5gTluUiZs3lynRpMrUfWwA%2bS02QSwEaNrCAAWCwaiyFYmuWJssbEEy3ELGaCD7CJfMATbq/b3wxIMUK9PERBOfmrCJCrHoAnTHU2JqQiwQhudyK0Nuw4czYBYLSg8WDfhMYjchIiLgPA7YRJ6BoLRuNvoE4iyxhUflQFGofaaQXVpa42gGwGurSXlwIED1vQdOXLEKjO069DQkDVBLhMGZGL7hsO0o0doQxegQzQbzTOalYaBtLn5SRUXl8JtobodjFHKDgIMAzyvIPsma3LXixl54PWczCUbllmmzT7oDhxZuh449guHmTjvbkN/w%2bYDQGEUwlxUujk/V%2bHRFq53rlYJWk9QEdColYIT0yn5/duenI%2bvy/7Jivzx7XyPHVcuAlF1bdERXBEftcUQOgOrAVwxg/RhAP2sAO%2b2voJhUj6bknrZRJF5ost0FwVKoAXSpKybsIXC97ROLGC%2bG%2b0HvHQsIQ/vL0l5PZArqYb85Pl0JyEiQhpZs8PIIZMiI8Rk1dFATPAB1BPDdCK3eIzc142WrcJhZcDaalzmV315ZSwvi0kTIgcNGxJjhRY63iB%2bBqKIOMBIEDWI%2bB5MiAyGSjYcLsjdL%2bfl9sfW5AsPrcq%2bM%2bWefICaM02IMCBWmTpXBgdT1PVk4oTM1BmwOilbOUKlUjsanTgfN0FQXl4Y9eV3bxVkxY63JTHzHQIfMtHDw8M2HgnnHK87GCIcLvtFARyjM1WZjte7OQHerUoMSDMA3c/TTBBXVhuPkJVh9QmWNDkZ1gFRDPA6DPjTnlk5PNVm/uHzFfn3qLejWeGeWEAZYBMi%2bd6ESCvYvBsMlOA6L1IPUHUDZRSZOhy0018hPigjRBzA751Ty/L9Z9Py2Due/Pj5jEzF27pitsNo0AWzEQXEDZQhciAMVKJvWBSQScJGUdI3GOJmd0PyBiZE%2bilBTcjkUnE5fC4vv38jJcPnMc04RlUbCKm%2bYdKgEceNOk4WCo527tMXZU2ZxYnSAT1WANvIA6pVbwTxbr6hkd9WSjCdyUrZM5HoekGqpZyt86wmOtVPcJOfGvi4ZW1z3XL8CKPQryHAKKhYR8sHUf6362cPuoYTklFXXXnEJawDFAH1umn3q1L02Smqdn0QtfswS/0Fx7ZbS%2bX2gRRt7rVnb1C3x0EAnFLuunk0l3iJRndR9UF9NVrk6mpuFwFAuuxlpFk1%2bqSU64aymohBASPrmFaULcoYxauioeYY0gy1IgiR6NkXcM8H8CAv4iVsiG43z7YT2tlFQDadkhOzdbs9NrnU7LjKG3bimD6Um06Q8eKeo%2bwYLwzRIzdYJFAR3hiJNIOEiOp/QygV1ehR%2bfXw/ah%2bUeGs65%2b71sW1AgcnFuWOv69Zlxxn7PR8bccY3fEkryHAmJSY%2bsd04nAXB5w2OnuC7hb3RqiuPnb4ftg3D9etzTfMDh%2bQ4BAFvz%2b%2bOis/fC4lR6ar8vUnkvLCiG8PVl24OGPNHkjVnJ96nKw2pg8UQCBCT7wgLrSpye7ZGYIBnQEE7MHnc6ShslLx8KHT3Z1XEMHV3Zd3d2ndMlf1v8NEP5gEEtxgyiZEOjrg4pWEfPvppHz%2bwRW5d09WMiXDwGbdToh3I%2bvAH0YwLu4rMyhzH2vDxGEAbTCAZzuWoRcB3QMSWTNIryGPDqXlzYm8PZmRMgMeHR2zITEhMLnAffv2WSIm4B4e3%2bHDh60s7t2719bR0sifEsqQSTIIVYguA1wdkM8kbV5yYm5d1orN7t6kTk4zwExes9O44EyW%2bzCHNvrpM%2bocsXAcB9qEgGrZDxZX8/LdZ/Py1ceT8oPnMrJ7tHenyFUo13GqrscR0oxPLwPaCCAp2rFU7e05zh2adpQbk1SIqwtOmUmSKqcdBqAosQ60sVBqcjt5hc0IkEY5eHt8VT55d1y%2b86%2bU/Gx3Ru54Km03KzKdUyEMWsNKPQChSpMyK6jtmB81a1EJkSgGaH%2bb9uZM0VqyK2p65b1cNUWn9TCFRVWvIMOgbzMDahU/uLiYk689mZWvPJqUO/6RlqfeM1rb9yxXNSUOZ1E4cJ4oj1XAtrobFbQhfwygnyu8SQcYBg5Kr/U7EBVVj2rTg5I9DCiwOVpIy5mrZbnnPwn5y1tJKVfrVimOjZ2wkyYKRM6BFprX1erhDIx6a65jRL2Tl9%2bEAFWM4WNv4a3u8JG46%2bmrOsAek3OtAJmXcslEhPWCbKzjT5P6znazwlxZVYWgHpPrR%2bHNC57RybqnTT/m37WkaFcHsC1pw9qKcUjaRATm5ui17CYh3XuDSF1gDUvdM8EfJ/UclVUGAAtsZy5fMCtnViqbs1cUnHsoQUnh5m6KDCJsMOZI44ObhYCew9JGWXUZoPkA91errXeDDcwQ2%2bQoOkxLlK%2b93d1hVwfcVAYoAjyvFJS8goxerss9L2fkkaG8rBaM7dxoGXlvmzU9LAmjVB%2bE/e1B%2bwLuEZlbigGNmh/EZtLywBtFOTlblZdOlOwpzZ4UmRmwpsSAM5NQu4vC6/cnh/BByVsOAdIqBy8OJ%2bRvh3ybC8QF/alxhtY7u0QMVtPiKg44FfjZlPEBwvnDfgy45RBQ9ktBIpmTHz2fk2/%2bPSlfemT12knRoA1hTWvjduJiMmkcIP0/QfivLlF/sbllEVA0OqBW8aRorNTeWFlGZjbH4OpNuY4NIqGx/nYmEhUL3CJK0AtQdtf8BA4pNLs5tvA%2b21ZuaDP0jJJmgPHJb00l2GgE9iQ22t0EIRDlVASp4gsHIqkt%2bruE5YBZbj7gZvsBpzsr1%2bKveqa8LQr37fdsVJsJS%2b31Zvw4IdP53%2bD5XSa2ntQdHw1gFLL94BzuuxX8%2b/W92T8jjjO7TOh6xAzKN0opZeQy83GSEYObQsaFT5kFLxmPduz/OPLyCBtniw4AAAAASUVORK5CYII=' /%3e%3c/svg%3e" width="695" data-src="/assets/static/service_namespace.b306fc5.11eb054103b1aa935daff46e01cb3412.png" data-srcset="/assets/static/service_namespace.b306fc5.11eb054103b1aa935daff46e01cb3412.png 695w" data-sizes="(max-width: 695px) 100vw, 695px" class="g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/service_namespace.b306fc5.11eb054103b1aa935daff46e01cb3412.png" class="g-image g-image--loaded" width="695" alt="service_namespace"></noscript></p><p><img alt="monitoring_namespace" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 697 167' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-8c58478f51a1de220f293f2fcc0c5d44'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-8c58478f51a1de220f293f2fcc0c5d44)' width='697' height='167' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAPCAYAAABUZ8lnAAAACXBIWXMAAAsSAAALEgHS3X78AAAE8UlEQVRIx81W2W4jRRT1zyAWiUce%2bQk%2bACEET7wRMmSQEBLiaXgYJIQEMzIiyySaMB5IMnI2nJBJPIkiExLCxDiL993utnuz2223D/eW3VbHcUKYGImSrl3V1XXq1LlLtWdzc3MymUz%2bEY1Gd2OxWGhYdhaNhtLJWKhaTIRy6XiI8Ae%2bx8/dc5e9N0zjPejMoa2trZCHD4//qNXawDyh53T8L1upVIKHPc8D27ab7Xbbvqm1CAho2/GSZb/1VdZ%2bdTRhv/l52g5GajZv02%2btVss2TXPgHLdhcOo3W3CETdFgezgkWACeuKmihIFmqy36k1sqXhlN4vWxJF7%2bKIHPfDI9bWH91w08efIE6%2bvrWF1dxdraGiYmJsT/xkZnjvu7u8IvrILAHWZz8OLxOIYuQMvugG9F6njj0xReGkngtVtJEkQTAsTiCdCe2N/fx8nJCSgFRf/w8FA853EgEMDOzk5PgGG3KwXgyRuZIN3ZYC6kY%2bRBGd%2btKYx8bYKWZYFS4xzZG/NymSPqBQH6Q639r2jjAuELcyxO%2b/qYl2G9CK9B7ZwA3cIg1M/n88jlclDlAmpKEeViHlka53JZ8dyZd/rOuFAonPMWpwMf2GxYNJ%2bHInXwpJKDlxuIl8lkBA/34TVNRSabRZnWMgZzY0zGydJzN8ZVHPk/nU5fLgBfDaqqiheehnV8v15BSWl0C3MnJ5vNZu%2bQ3OdwZWPivZztznOTKxVoagW/x03cC8hIlRuiHtCNId7ntXa338/BwUgTNtotFKoNeIlTMKKLsdMcDo4xLzdf9zMWgvtcby4IUCyVaVDHj7s1fDIr4duAgtFpiTa2hOcaXc8YhoF6vX4upFhd5xBtlwBWTYEvmMfYwyruUT34cKqMWInI2w1YXVLscQevwoJpmgsHwvP5agu3Zjqcbj%2bU8FOoBkMpI5XODAzxarXaO7S7FYvFywWQpDJUjYuXhKLSFNn2YLuOu4%2beY29nA/7FZXF9TU9PY2ZmBgsLC2I8NzcnQrG/aHEzDQUf3I/htNDx2ONdFZPPTMj5GI7Cf4mKPz4%2bjpWVFXQ4SOcE4FSqKwXM7mgYf9qJjLRkYWy2gsAvq/D7/VhaXhbruc%2bc5ufn4fV6sbS0BJ/Ph2AwiMXFRdDXHxRFQaPRGCxAuVyG3TRxx69RBMiYCup4zyvht6iB6EkYx3R1HR8fIxKJiKvr6OgIZ2dn2NvbEzVgkADNuoo7P2cwMqNg%2bpmO970lbJ9RSJoa/nx%2bJPAY5/T0tOc5twB8qyiU8wdJC%2b/eL9GVquM2Hf5Lvwq1UkLdNJFKpQQGO4FxDg4OxDXLY75mw%2bGw4Mh5z/gccUIA/i7u5pAQoFAoQpZKqCgGPp5M4p1v4ni8XSSFaqKY8ULHOIzYWE3OMcLqfbi4r5tKRUae8u4LXw5vfx3DD2t5tC0DulETOLzeweE04MOwl9zfAfF4kpTU8ShYFJzGplKQqxqalknpSNxIBMZy/h08HjM35xnjMU%2beSyQS8NBPqJsaYid%2bSZJlqEoVtqmQ9yhcKIRluUImX2octmyDWpMI8Du2qQo8rglcGDnX%2b3HYOxyFzneA0wxDJ3wZjVqHU4u4KcSR17hxBmG6jee5BnBjoT0UxiHejDa2eXOuvryZpuuiFjim6/9sXBjZc25zMHXduDYe4/AaXuvgcEroL8Dpqj04hf8GCJcnknd11GUAAAAASUVORK5CYII=' /%3e%3c/svg%3e" width="697" data-src="/assets/static/monitoring_namespace.22e0a96.8e744d6443690f47751bcbbb2f437c0d.png" data-srcset="/assets/static/monitoring_namespace.22e0a96.8e744d6443690f47751bcbbb2f437c0d.png 697w" data-sizes="(max-width: 697px) 100vw, 697px" class="g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/monitoring_namespace.22e0a96.8e744d6443690f47751bcbbb2f437c0d.png" class="g-image g-image--loaded" width="697" alt="monitoring_namespace"></noscript></p><h2 id="data-persistence"><a href="#data-persistence" aria-hidden="true">#</a>Data persistence</h2><p>Data persistence is required for the following components: Grafana, Prometheus, Loki, RabbitMQ and should be set up on this step.</p><div role="alert" class="v-alert my-3 v-sheet theme--light v-alert--border v-alert--text v-alert--border-left blue--text text--darken-4" data-v-e2b44c62><div class="v-alert__wrapper"><i aria-hidden="true" class="v-icon notranslate v-alert__icon mdi mdi-information-outline theme--light blue--text text--darken-4"></i><div class="v-alert__content"><p>Examples below use HostPath type of <a href="https://kubernetes.io/docs/concepts/storage/persistent-volumes/" target="_blank" rel="nofollow noopener noreferrer">Persistent Volume(PV)</a>. 
Please read the documentation to choose an appropriate PV type for your environment.</p></div><div class="v-alert__border v-alert__border--left"></div></div></div><ul><li>Create directories on the th2 node (the following command can require root permissions):</li></ul><div class="remark-highlight"><pre class="language-shell"><code class="language-shell"><span class="token function">mkdir</span> /opt/grafana /opt/prometheus /opt/loki /opt/rabbitmq
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><ul><li>Set node name in <code>pvs.yaml</code>.</li><li>Create PVs and PVCs:</li></ul><div class="remark-highlight"><pre class="language-shell"><code class="language-shell">kubectl apply -f ./pvs.yaml
kubectl apply -f ./pvcs.yaml
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><h3 id="pv-for-read-components"><a href="#pv-for-read-components" aria-hidden="true">#</a>PV for read components</h3><p>To include <strong>read</strong> components in your configuration, a dedicated PersistentVolume for <strong>read</strong> log directory needs to be set up.
Add a PersistentVolume mapped to the <code>/opt/components</code> directory.  Once an <em>infra-schema</em> namespace is installed, create a PersistentVolumeClaim. </p><p>PV and PVC examples can be found in <code>example-values/persistence/</code>.</p><div class="remark-highlight"><pre class="language-shell"><code class="language-shell"><span class="token function">mkdir</span> /opt/components
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><ul><li>Set node name in <code>persistence/pv.yaml</code>.</li><li>Create PV:</li></ul><div class="remark-highlight"><pre class="language-shell"><code class="language-shell">kubectl apply -f ./persistence/pv.yaml
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><h2 id="monitoring-deployment"><a href="#monitoring-deployment" aria-hidden="true">#</a>Monitoring deployment</h2><div role="alert" class="v-alert my-3 v-sheet theme--light v-alert--border v-alert--text v-alert--border-left orange--text text--darken-3" data-v-e2b44c62><div class="v-alert__wrapper"><i aria-hidden="true" class="v-icon notranslate v-alert__icon mdi mdi-alert-circle theme--light orange--text text--darken-3"></i><div class="v-alert__content"><p>It's an optional step, but it provides an easier way to check the result of the installation. 
In all installation commands we explicitly define namespaces to avoid possible mistakes.</p></div><div class="v-alert__border v-alert__border--left"></div></div></div><ul><li>Switch the namespace to <em>monitoring</em>:</li></ul><div class="remark-highlight"><pre class="language-shell"><code class="language-shell">kubectl config set-context --current --namespace<span class="token operator">=</span>monitoring
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><div role="alert" class="v-alert my-3 v-sheet theme--light v-alert--border v-alert--text v-alert--border-left orange--text text--darken-3" data-v-e2b44c62><div class="v-alert__wrapper"><i aria-hidden="true" class="v-icon notranslate v-alert__icon mdi mdi-alert-circle theme--light orange--text text--darken-3"></i><div class="v-alert__content"><p>Grafana and Dashboard hostnames should be configured only if you have a DNS name. 
IP address configuration is not required. </p></div><div class="v-alert__border v-alert__border--left"></div></div></div><ul><li><p>Define Grafana and Dashboard hostnames (the name must be resolved from the tester boxes):</p><ul><li>in the <a href="https://github.com/th2-net/th2-infra/blob/v1.7.3/example-values/service.values.yaml" target="_blank" rel="nofollow noopener noreferrer">service.values.yaml</a> file:<div class="remark-highlight"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">ingress</span><span class="token punctuation">:</span>
  <span class="token key atrule">host</span><span class="token punctuation">:</span> <span class="token important">&amp;host</span> &lt;th2_host_name<span class="token punctuation">&gt;</span>
<span class="token key atrule">kubernetes-dashboard</span><span class="token punctuation">:</span>
  <span class="token key atrule">ingress</span><span class="token punctuation">:</span>
    <span class="token key atrule">hosts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token important">*host</span><span class="token punctuation">]</span>
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div></li><li>in the <a href="https://github.com/th2-net/th2-infra/blob/v1.7.3/example-values/prometheus-operator.values.yaml" target="_blank" rel="nofollow noopener noreferrer">prometheus-operator.values.yaml</a> file:<div class="remark-highlight"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">grafana</span><span class="token punctuation">:</span>
  <span class="token key atrule">ingress</span><span class="token punctuation">:</span>
    <span class="token key atrule">hosts</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> &lt;th2_host_name<span class="token punctuation">&gt;</span>
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div></li></ul></li><li><p>Deploy components:</p></li></ul><div class="remark-highlight"><pre class="language-shell"><code class="language-shell">helm repo <span class="token function">add</span> grafana https://grafana.github.io/helm-charts
helm repo <span class="token function">add</span> prometheus-community https://prometheus-community.github.io/helm-charts
helm <span class="token function">install</span> --version<span class="token operator">=</span><span class="token number">2.4</span>.1 loki -n monitoring grafana/loki-stack -f ./loki.values.yaml
helm <span class="token function">install</span> --version<span class="token operator">=</span><span class="token number">15.0</span>.0 prometheus -n monitoring prometheus-community/kube-prometheus-stack -f ./prometheus-operator.values.yaml
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><ul><li>Check the result:</li></ul><div class="remark-highlight"><pre class="language-shell"><code class="language-shell">$ kubectl get pods
NAME                                                     READY   STATUS    RESTARTS   AGE
<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
alertmanager-prometheus-prometheus-oper-alertmanager-0   <span class="token number">2</span>/2     Running   <span class="token number">0</span>          75s
loki-0                                                   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          4m47s
loki-promtail-wqfml                                      <span class="token number">1</span>/1     Running   <span class="token number">0</span>          4m47s
prometheus-grafana-68f8dd6d57-2gtns                      <span class="token number">2</span>/2     Running   <span class="token number">0</span>          82s
prometheus-kube-state-metrics-75d4cc9dbd-psb88           <span class="token number">1</span>/1     Running   <span class="token number">0</span>          82s
prometheus-prometheus-node-exporter-gfzp6                <span class="token number">1</span>/1     Running   <span class="token number">0</span>          82s
prometheus-prometheus-oper-operator-df668d457-snxks      <span class="token number">1</span>/1     Running   <span class="token number">0</span>          82s
prometheus-prometheus-prometheus-oper-prometheus-0       <span class="token number">3</span>/3     Running   <span class="token number">1</span>          65s        
<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><h2 id="access-for-infra-mgr-to-the-th2-infra-schema-git-repository"><a href="#access-for-infra-mgr-to-the-th2-infra-schema-git-repository" aria-hidden="true">#</a>Access for infra-mgr to the th2 infra-schema Git repository</h2><h3 id="ssh-key"><a href="#ssh-key" aria-hidden="true">#</a>SSH key</h3><p>SSH access with write permissions is required by <strong>infra-mgr</strong> component.</p><ul><li>Generate keys without a passphrase:  </li></ul><div class="remark-highlight"><pre class="language-shell"><code class="language-shell">$ ssh-keygen -t rsa -m pem -f ./infra-mgr-rsa.key
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><ul><li><a href="https://docs.github.com/en/developers/overview/managing-deploy-keys#deploy-keys" target="_blank" rel="nofollow noopener noreferrer">Add a new deploy key to your infra-schema repository on GitHub </a>.</li><li>Create infra-mgr secret from the private key:</li></ul><div class="remark-highlight"><pre class="language-shell"><code class="language-shell">$ kubectl -n <span class="token function">service</span> create secret generic infra-mgr --from-file<span class="token operator">=</span>id_rsa<span class="token operator">=</span>./infra-mgr-rsa.key
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><ul><li>set <code>infraMgr.git.repository</code> value in the <a href="https://github.com/th2-net/th2-infra/blob/v1.7.3/example-values/service.values.yaml" target="_blank" rel="nofollow noopener noreferrer">service.values.yaml</a> file to <code>ssh</code> link of your infra-schema repository, e.g:</li></ul><div class="remark-highlight"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">infraMgr</span><span class="token punctuation">:</span>
  <span class="token key atrule">git</span><span class="token punctuation">:</span>
    <span class="token key atrule">repository</span><span class="token punctuation">:</span> git@github.com<span class="token punctuation">:</span>th2<span class="token punctuation">-</span>net/th2<span class="token punctuation">-</span>infra<span class="token punctuation">-</span>demo<span class="token punctuation">-</span>configuration.git
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><h3 id="personal-access-token"><a href="#personal-access-token" aria-hidden="true">#</a>Personal access token</h3><p>Due to the <a href="https://github.blog/2021-09-01-improving-git-protocol-security-github/" target="_blank" rel="nofollow noopener noreferrer">improvements in Git protocol security</a> on GitHub, keys supported in ssh have underwent changes. 
These changes affected the th2 ssh connections to the GitHub repositories. 
SSH keys generated with RSA algorithm are no longer accepted when uploaded to GitHub after March 15, 2022. 
However, the keys uploaded before this date continue to work.</p><p>GitHub repositories can be accessed via personal access tokens. 
In case you cannot use a token, update your th2 version to use ssh connection.</p><nav data-v-4fa5e70c><div class="row row--dense my-2" data-v-4fa5e70c><div class="col-lg-4 col-sm-6 col-12" data-v-4fa5e70c><a tabindex="0" href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token" target="_blank" class="v-sheet--outlined rounded v-list-item v-list-item--link theme--light" data-v-4fa5e70c><div class="v-list-item__icon" data-v-4fa5e70c><i aria-hidden="true" class="v-icon notranslate mdi mdi-github theme--light primary--text" data-v-4fa5e70c></i></div><div class="v-list-item__content" data-v-4fa5e70c><div class="v-list-item__title text-wrap" data-v-4fa5e70c>
            Creating a personal access token
          </div></div></a></div></div></nav><p>It is required to grant permissions from <code>repo</code> scope. 
Other permissions are not needed.</p><p><img alt="Token permissions" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 846 528' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-4f17e4859d66aa9f3a4d9ef277a9fe8c'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-4f17e4859d66aa9f3a4d9ef277a9fe8c)' width='846' height='528' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAoCAIAAADBrGu%2bAAAACXBIWXMAAAsSAAALEgHS3X78AAAJ2UlEQVRYw71Z2XIbyRHcB69XKxD33Pd9XxgM7oMAQUkrKqwNvzj87h/w/z85uxuEKZDQriQsIzo6ehqDwXRVVmZV4aduX8Rod3nDCtKsdv3EsEIM20lMO%2bwPpd7gyeifXYqndbf/bAz%2bv/jihuNavMr4qUtf4qbDOX52uH/YbA5FtZwvd4fD59l82%2bnxrQ6H%2babLtbscbiNzl1xifbxsD7HodPl2Z9gmt5G5g9HjsENmskMG1h16A%2bZrHoANXtRF2RRlSxB1WbENM8ClZUWq5kiKZRi%2bqrma7mu6q2iebmDh6SaZLSfGQpAdScsEORCVWJBDXvZ42Ze0hJfILKmppKW85GGIasRL7pUPAAhZdrxY7tfrd2U5a5rNenUYT5ajajGq5nkxnU7XTbNKk6Ysp%2bNmg3UzXk2n2yxv1pv7yXTth7WX/hZkH013YQd7K9g40R6XlndrBWs//einHwxnbofbsPiMmYLqqh7o9MW//fzmbavXanMtoIJgQGj3eMzdvoAT0kuhQ24%2bXjJotSiECHg6g84jWtoMQhQ2FFrko14fj%2bJ7fR5zfyj/4Dg/ALbeff5PmM013QEwcDmg4yuPGHCyrDqKaguSIau2TBampNjAIdaiBECa2CEfKeSj3kB%2bMqQfGQNOOT9AbyD%2b49//Leq72917QKLVHsDMNzSCL3pwIJp25LqJ4yVhVHpBjmAIwtLx0jgZYTNOxriM4hE%2btZ24S5x5Hei/cABs/fxLK4hS242GggazKapDolPULz0FluAEnRM0fHfAqZyowxW8oPOiMeTVI%2bQo0hjkrvX2Fw8Ae9fjaZbVdbOeL29Ho8Vme4iTipIj3/7SFXghvH0QFlFcwbq2G4dBRSztxlFcYzEYSuyle9d77z88AO8FEDK/T0HWHypDXuNFjRc0ABqmPbMiwyJmGg8K/QpiQ%2bnTBfNM9y94%2b5cPMOQU8EkzmRdF00y30/kmL%2bf7%2b4fVaj%2bf79bbQ5qO4KIT/T16oIwS4gH4ISsazLgM48q0YzCs52f4peuC52seAE4QAJrhwoqQLY5XOV7jqOFfBDHiHtDHIIbnFECfOOHoOhXee10P8Mrb9nAyXYzHi2a8v989ZGkzme1Wix3ItNM7fwTzQBhVIBzXy4KogMZZVhwldZyOY7gC5BMXyKa6rxYDMLNpB0gWgBMIFmMVKhnCJRZiiOpRWehQMWEhQXfIoj%2bQX80D6tub4XyxHo1mk9ntdvd%2bXK92uw9RUiI2nj/i6IF4FKc1ZZ5RksH2NWzvuAn287xJ0nEYFoxSX8kDhunJqjWggAaNMMXFG5yk%2b8wDQ0o%2bGEAgxb1KuYjyEq9Ccdmnr%2baBwXqzm83X5Wg%2bm243m3dVOZnOb9frQxBkTyno6AFRL6oppABcBEt7fpFlY8gwAiOKiCa4Xp4kiISy/1IUXf8AVDXh6yOyQSOSbA4FYtTBH6RWEkM/TP4kU2LekE9l0I8ncKeBt30OIdVxI0WzYVfdDFCgAULdY/J0MZnDPUTsJAOEy2oJ7JBsQtAprlSeVheP0PorD4DdohzlRXN//%2bnDh88fPv6%2b3d4/kiBLaZ4PEQSKaiErJrYdIXWDivkBwVKa1sASoAWSzYtJnNRIWhFjZzTw3eOFdBpnandJ%2bgWsIxhYxUju7gq9x0zhbJCsgSKHBTQtKgSkqE8uH1%2b0L5xKZ8gfHdKLz/yTg6DjOQuFUWaYvu0mrp%2bipAQbAkigSJaQvpiXQyhgWoBHpJUAGbKFEpQgR3XIIJcoFUhdivIASS4WmIGxK9cD2IrizA/y1eoemc9u/3G7ebc/PHz69E%2bUxWcUdBo4XpLWABKKASRC4J%2bEggdFs%2bfngFPgZ6gZ/KhMkprmqkkKnU5qGKhFSn7hmjoAwbLsQFUtRCRsJiqWojgwG2z2Qk4GIHKKKJPUH9UWQp8jqasuiAZdGIjsAa9gBpWRyJYMVi2wyGbBfULCdQ6AV4yTPAzzKVKg1d3u8LBc7u/2D5vNPZLqswPgcshDiVEPjEj4RhUEIaXqW1Yz10tdPw8gBX4GKcACmSluS7MGMY017kmSsePEnb5wRR0QWzSC37zt/drqswVmeOYCi0us7KRdI1r1035RtyeitGjTQowWQxxb0Nqfh%2btYx4CRyRV1QIH5kU6DCpHV2E4EWMOoXpBZz1t0j8KkaK5uhaR3JFuq4SoaDVzFVnVXlG3SODI84FA1PLKgn2o6Fi5moIjR0dWCOAhTZMUI393db7v9%2b7vDp%2bXy7vPv/5rNNr2XHI0HkTQurXFIWrwjgsdpPoYOBkFhWJEfQAoKwAmxC6Sl2RhYcrwMugEz4ZBnynAFCOGJf3/TwXjT6gE/AA/DxiU%2b7lDdoAhh7UeedoT4xx2effr0thOcjk2KgcAEpH9Bbf6sDuD7eYHSJKnqZV0vEGqQWBgJv32pi4Z9wwpNK1AN33Ji0KWqe9gBh%2bKLIErLiuAHAAlUhk%2bBIggLLk0rMgE83cUO3KWbIVAKRLHfOpUZ38xCthPgZybTbTWaoaJtJhvTDi8pABtAs0E7pLSnHUCz8E62k%2bDtDcM3zBDgQZEEnoU4aLqPB5J2qh3jBlw6Ljm27aY4AIzaOjmTJgHffAAQjh8kmu4oqosnwkKq6lx6BKVRDa9LunFUiTFQzYHpCd8TJbZZt5itcQ%2bCGDs4M7wt0gYelWeDNPMUk3b1LFlxcBt%2b%2butl0EUdgJDh1bN8UlWzcjSrimn/ovmBWsUPc9IUIgOoAHFlGtHgzPESm1g3DIIcJneDDIIAWsOmHxbYwQyPOSS%2bY9zv%2balFWhukvRcSSclx1Pa3HgC%2b8/zYpEgAjgFTQdIvmYFGtgprQXpJ10jUBNlg2Q7JqyUd5iQml0xFdwXaq5NIvm3QPj7xGMmIRJ1ljY//NvCn9fdACLMfxK4Xj5vNbHY7n%2b/LcgJKoY2TcybGzaiJQZq%2bn4Eowb9Ed70kgu6GpelEIUmNiAbTHcKqSK1hZqxhflK1kfZRSPjji16v/J06MCQlLPmr5k2r/8uvXTawpgw4ZDR1NnpDqXWUYQ66%2b8SEw06XBwWzzvsNTdqgWcdO46k19sh%2bVytoyqoGppvpZtysRvUclfF2/S4MilG90A2IzvPGlkQ4xCFEidwbaKZEGRI%2b1VyA3nES4NCyIx60faRj6enXr9yVMC3y8/V4hbqsrKbVaFFVcyAEiEJgvMinkmpT0vB0kiz4Eo0BsCdSBuAKYU3z6gwHeI3u9NubYRAkukn%2bC/ODTDc9100xYGCYuTd4TqMqRACvjuSZpN%2byqerkkqiB7uG07J%2bemx/I%2b7%2bZRqFlthNmxXQ0mjeT5aRZlzn4dJ7nzfN0GsHtkQgmsgXBAlRQwaCaA4TAhmChk7L%2bdX2h/wFhZ9pej59gkAAAAABJRU5ErkJggg==' /%3e%3c/svg%3e" width="846" data-src="/assets/static/gh-token-permissions.8560fc9.64f5e77db2b592a63b1d6359d11c39a4.png" data-srcset="/assets/static/gh-token-permissions.82a2fbd.64f5e77db2b592a63b1d6359d11c39a4.png 480w, /assets/static/gh-token-permissions.8560fc9.64f5e77db2b592a63b1d6359d11c39a4.png 846w" data-sizes="(max-width: 846px) 100vw, 846px" class="g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/gh-token-permissions.8560fc9.64f5e77db2b592a63b1d6359d11c39a4.png" class="g-image g-image--loaded" width="846" alt="Token permissions"></noscript></p><p>Set <code>infraMgr.git.repository</code> value in the <a href="https://github.com/th2-net/th2-infra/blob/v1.7.3/example-values/service.values.yaml" target="_blank" rel="nofollow noopener noreferrer">service.values.yaml</a> file to <strong>https</strong> link of your infra-schema repository. 
Generate and include PAT as HTTP auth credentials.</p><div class="remark-highlight"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">infraMgr</span><span class="token punctuation">:</span>
  <span class="token key atrule">git</span><span class="token punctuation">:</span>
    <span class="token key atrule">repository</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//github.com/th2<span class="token punctuation">-</span>net/th2<span class="token punctuation">-</span>infra<span class="token punctuation">-</span>demo<span class="token punctuation">-</span>configuration.git
    <span class="token key atrule">httpAuthUsername</span><span class="token punctuation">:</span> <span class="token string">&quot;&lt;token&gt;&quot;</span> 
    <span class="token key atrule">httpAuthPassword</span><span class="token punctuation">:</span> <span class="token string">&quot;&lt;token&gt;&quot;</span> 
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><p>infra-mgr secret is still required.</p><div class="remark-highlight"><pre class="language-shell"><code class="language-shell">kubectl -n <span class="token function">service</span> create secret generic infra-mgr --from-literal<span class="token operator">=</span>infra-mgr<span class="token operator">=</span>infra-mgr
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><h3 id="using-git-server-internally-in-kubernetes"><a href="#using-git-server-internally-in-kubernetes" aria-hidden="true">#</a>Using Git server internally in Kubernetes</h3><p>If you have any restrictions to get access to any external repositories from the k8s cluster, Git service can be deployed according to the following instruction:</p><ul><li>Create PersistentVolume &quot;repos-volume&quot;, example is presented in the <code>./example-values/persistence/pv.yaml</code>;</li><li>Create configmap &quot;keys-repo&quot; from public part of key from point <a href="#access-for-infra-mgr-to-the-th2-infra-schema-git-repository">Access for infra-mgr to the th2 infra-schema Git repository</a>:</li></ul><div class="remark-highlight"><pre class="language-shell"><code class="language-shell">kubectl -n <span class="token function">service</span> create configmap keys-repo --from-file<span class="token operator">=</span>authorized_keys<span class="token operator">=</span>./infra-mgr-rsa.pub
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><ul><li>Define configs for infra-git in <code>services.values.yaml</code>. </li><li>Set <code>infraMgr.git.repository</code> value in the <code>service.values.yaml</code> file to <strong>ssh</strong> link of your repository, e.g:</li></ul><div class="remark-highlight"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">infraMgr</span><span class="token punctuation">:</span>
  <span class="token key atrule">git</span><span class="token punctuation">:</span>
    <span class="token key atrule">repository</span><span class="token punctuation">:</span> ssh<span class="token punctuation">:</span>//git@git<span class="token punctuation">-</span>ssh/home/git/repo/&lt;your_repo_name<span class="token punctuation">&gt;</span>.git
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><ul><li>After installation, you should initiate a new repository with the name defined at the previous step.</li></ul><h2 id="cluster-configuration"><a href="#cluster-configuration" aria-hidden="true">#</a>Cluster configuration</h2><p>Once all the required software is installed on your th2 node, Apache Cassandra node, and operator box, and th2-infra repository is ready, you can start configuring the cluster.</p><ul><li>Switch namespace to <em>service</em>:</li></ul><div class="remark-highlight"><pre class="language-shell"><code class="language-shell">$ kubectl config set-context --current --namespace<span class="token operator">=</span>service
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><h3 id="define-cassandra-hostname"><a href="#define-cassandra-hostname" aria-hidden="true">#</a>Define Cassandra hostname</h3><ul><li>Set <code>cassandra.host</code> value for <code>cassandra</code> in the <a href="https://github.com/th2-net/th2-infra/blob/v1.7.3/example-values/service.values.yaml" target="_blank" rel="nofollow noopener noreferrer">service.values.yaml</a> file. </li><li>It is also recommended specifying a name of Cassandra datacenter (it is <code>datacenter1</code> by default):</li></ul><div class="remark-highlight"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">cassandra</span><span class="token punctuation">:</span>
  <span class="token key atrule">internal</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">host</span><span class="token punctuation">:</span> &lt;cassandra<span class="token punctuation">-</span>host<span class="token punctuation">&gt;</span>
  <span class="token key atrule">cluster</span><span class="token punctuation">:</span> 
    <span class="token key atrule">datacenter</span><span class="token punctuation">:</span> datacenter1
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><h3 id="define-rabbitmq-ingress-parameters"><a href="#define-rabbitmq-ingress-parameters" aria-hidden="true">#</a>Define RabbitMQ Ingress parameters</h3><p>If required, add the <code>rabbitmq.ingress.hostName</code> value into <a href="https://github.com/th2-net/th2-infra/blob/v1.7.3/example-values/service.values.yaml" target="_blank" rel="nofollow noopener noreferrer">service.values.yaml</a> file. Otherwise, the RabbitMQ HTTP service will be available on the node IP address.</p><h3 id="define-th2-ingress-parameters"><a href="#define-th2-ingress-parameters" aria-hidden="true">#</a>Define th2 Ingress parameters</h3><p>If required, add <code>ingress.hostname</code> value into <a href="https://github.com/th2-net/th2-infra/blob/v1.7.3/example-values/service.values.yaml" target="_blank" rel="nofollow noopener noreferrer">service.values.yaml</a> file. Otherwise, th2 HTTP services will be available on the node IP address.</p><div class="remark-highlight"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">ingress</span><span class="token punctuation">:</span>
  <span class="token key atrule">host</span><span class="token punctuation">:</span> example.com
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><p>In order to include Kubernetes address to configurations for external interactions, you can add option <code>infraOperator.config.k8sUrl</code>, which can be both an IP address or a domain name.</p><div class="remark-highlight"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">infraOperator</span><span class="token punctuation">:</span>
  <span class="token key atrule">config</span><span class="token punctuation">:</span>
    <span class="token key atrule">k8sUrl</span><span class="token punctuation">:</span> <span class="token string">&quot;&lt;kubernetes-external-entrypoint&gt;&quot;</span>
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><h3 id="create-secret-with-th2-credentials"><a href="#create-secret-with-th2-credentials" aria-hidden="true">#</a>Create secret with th2 credentials</h3><p>Create <code>secrets.yaml</code> in <code>./</code> folder (<em>do not commit into Git</em>). Example:</p><div class="remark-highlight"><pre class="language-yaml"><code class="language-yaml"><span class="token comment"># required only for images from a private registry, will be attached as the first PullSecret to deployments</span>
<span class="token comment">#productRegistry:</span>
<span class="token comment">#  username: user</span>
<span class="token comment">#  password: password</span>
<span class="token comment">#  name: private-registry-1.example.com # core components registry</span>
<span class="token comment"># required only for images from a private registry, will be attached as the second PullSecret to deployments</span>
<span class="token comment">#solutionRegistry:</span>
<span class="token comment">#  username: user</span>
<span class="token comment">#  password: password</span>
<span class="token comment">#  name: private-registry-2.example.com # components registry</span>
<span class="token comment"># required only for images from a private registry, will be attached as the third PullSecret to deployments</span>
<span class="token comment">#proprietaryRegistry:</span>
<span class="token comment">#  username: user</span>
<span class="token comment">#  password: password</span>
<span class="token comment">#  name: private-registry-3.example.com # components registry</span>
<span class="token key atrule">cassandra</span><span class="token punctuation">:</span>
<span class="token comment"># set credentials for existing Cassandra cluster</span>
  <span class="token key atrule">dbUser</span><span class="token punctuation">:</span>
    <span class="token key atrule">user</span><span class="token punctuation">:</span> &lt;user<span class="token punctuation">-</span>name<span class="token punctuation">&gt;</span>
    <span class="token key atrule">password</span><span class="token punctuation">:</span> &lt;password<span class="token punctuation">&gt;</span>
<span class="token key atrule">rabbitmq</span><span class="token punctuation">:</span>
<span class="token comment"># set admin user credentials, it will be created during deployment</span>
  <span class="token key atrule">rabbitmqUsername</span><span class="token punctuation">:</span> th2
  <span class="token key atrule">rabbitmqPassword</span><span class="token punctuation">:</span> rab<span class="token punctuation">-</span>pass
  <span class="token comment"># must be a random string</span>
  <span class="token key atrule">rabbitmqErlangCookie</span><span class="token punctuation">:</span> cookie
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><h2 id="th2-deployment"><a href="#th2-deployment" aria-hidden="true">#</a>th2 deployment</h2><h3 id="install-nginx-ingress-controller"><a href="#install-nginx-ingress-controller" aria-hidden="true">#</a>Install NGINX Ingress Controller</h3><div class="remark-highlight"><pre class="language-shell"><code class="language-shell">helm repo <span class="token function">add</span> ingress-nginx https://kubernetes.github.io/ingress-nginx
helm <span class="token function">install</span> -n <span class="token function">service</span> --version<span class="token operator">=</span><span class="token number">3.31</span>.0 ingress ingress-nginx/ingress-nginx -f ./ingress.values.yaml
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><p>Check:</p><div class="remark-highlight"><pre class="language-shell"><code class="language-shell">$ kubectl get pods
NAME                                                READY   STATUS    RESTARTS   AGE
<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
ingress-ingress-nginx-controller-7979dcdd85-mw42w   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          30s
<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><h3 id="install-th2-infra-components-in-the-service-namespace"><a href="#install-th2-infra-components-in-the-service-namespace" aria-hidden="true">#</a>Install th2-infra components in the service namespace</h3><div class="remark-highlight"><pre class="language-shell"><code class="language-shell">helm repo <span class="token function">add</span> th2 https://th2-net.github.io
helm <span class="token function">install</span> -n <span class="token function">service</span> --version<span class="token operator">=</span><span class="token operator">&lt;</span>version<span class="token operator">&gt;</span> th2-infra th2/th2 -f ./service.values.yaml -f ./secrets.yaml
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><div role="alert" class="v-alert my-3 v-sheet theme--light v-alert--border v-alert--text v-alert--border-left orange--text text--darken-3" data-v-e2b44c62><div class="v-alert__wrapper"><i aria-hidden="true" class="v-icon notranslate v-alert__icon mdi mdi-alert-circle theme--light orange--text text--darken-3"></i><div class="v-alert__content"><p>Replace <code>&lt;version&gt;</code> with th2-infra release version you need. You can check versions <a href="https://github.com/th2-net/th2-infra/releases" target="_blank" rel="nofollow noopener noreferrer">here</a></p></div><div class="v-alert__border v-alert__border--left"></div></div></div><p>Wait for all the pods in <em>service</em> namespace to be up and running. Once completed, proceed with <a href="https://github.com/th2-net/th2-infra-schema-demo/blob/master/README.md" target="_blank" rel="nofollow noopener noreferrer">infra-schema configuration</a> to deploy th2 namespaces.</p><h2 id="th2-infra-links"><a href="#th2-infra-links" aria-hidden="true">#</a>th2 infra links:</h2><ul><li>Kubernetes dashboard <code>http://your-host:30000/dashboard/</code></li><li>Grafana <code>http://your-host:30000/grafana/</code></li><li>th2-infra-editor <code>http://your-host:30000/editor/</code></li><li>RabbitMQ <code>http://your-host:30000/rabbitmq/</code></li><li>th2-reports <code>http://your-host:30000/your-namespace/</code></li></ul></div><!----><nav class="my-4" data-v-4fa5e70c><div data-v-4fa5e70c>Continue learning:</div><div class="row row--dense my-2" data-v-4fa5e70c><div class="col-lg-4 col-sm-6 col-12" data-v-4fa5e70c><a href="/getting-started/create-th2-env/" tabindex="0" target="_self" class="v-sheet--outlined rounded v-list-item v-list-item--link theme--light" data-v-4fa5e70c><!----><div class="v-list-item__content" data-v-4fa5e70c><div class="v-list-item__title text-wrap" data-v-4fa5e70c>
            Create th2 env
          </div></div></a></div></div></nav></article></div><aside class="pl-5 pt-5 page-content-panel layout__aside--right" data-v-b7b561fc><nav class="pr-2 sticky-page-content" data-v-b7b561fc><div data-v-b7b561fc><div><a href="https://github.com/th2-net/th2-docs/blob/master/content/docs/getting-started/install-th2/3-th2.md" target="_blank" class="v-btn v-btn--icon v-btn--round theme--light v-size--default"><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-pencil-outline theme--light"></i></span></a><a href="https://github.com/th2-net/th2-docs/blob/master/content/docs/getting-started/install-th2/3-th2.md" target="_blank">
       Edit this page
    </a></div></div><div data-v-b7b561fc><div><a href="https://github.com/th2-net/th2-docs/issues/new?title=One thing is unclear after reading &quot;3. Deploy th2&quot; article&amp;body=I've read [&quot;3. Deploy th2&quot; article](https://github.com/th2-net/th2-docs/blob/master/content/getting-started/install-th2/3-th2.md) and there is one problem.&amp;assignees=d0rich&amp;labels=by-reader" target="_blank" class="v-btn v-btn--icon v-btn--round theme--light v-size--default"><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-alert-circle-outline theme--light"></i></span></a><a href="https://github.com/th2-net/th2-docs/issues/new?title=One thing is unclear after reading &quot;3. Deploy th2&quot; article&amp;body=I've read [&quot;3. Deploy th2&quot; article](https://github.com/th2-net/th2-docs/blob/master/content/getting-started/install-th2/3-th2.md) and there is one problem.&amp;assignees=d0rich&amp;labels=by-reader" target="_blank">
       Create an issue
    </a></div></div><h3 class="mb-3 mt-7" data-v-b7b561fc>On this page</h3><ul data-v-b7b561fc><li class="font-weight-bold" data-v-b7b561fc><a href="#3-deploy-th2" data-v-b7b561fc><div data-v-b7b561fc>3. Deploy th2</div></a></li><li class="py-2" data-v-b7b561fc><a href="#prerequisites" data-v-b7b561fc><div data-v-b7b561fc>Prerequisites</div></a></li><li class="py-2 h2-border" data-v-b7b561fc><a href="#download-infra-values" data-v-b7b561fc><div data-v-b7b561fc>Download infra values</div></a></li><li class="py-2 h2-border" data-v-b7b561fc><a href="#infrastructure-namespaces" data-v-b7b561fc><div data-v-b7b561fc>Infrastructure namespaces</div></a></li><li class="ml-2 pb-2" data-v-b7b561fc><a href="#create-namespaces" data-v-b7b561fc><div data-v-b7b561fc>Create namespaces</div></a></li><li class="py-2 h2-border" data-v-b7b561fc><a href="#data-persistence" data-v-b7b561fc><div data-v-b7b561fc>Data persistence</div></a></li><li class="ml-2 pb-2" data-v-b7b561fc><a href="#pv-for-read-components" data-v-b7b561fc><div data-v-b7b561fc>PV for read components</div></a></li><li class="py-2 h2-border" data-v-b7b561fc><a href="#monitoring-deployment" data-v-b7b561fc><div data-v-b7b561fc>Monitoring deployment</div></a></li><li class="py-2 h2-border" data-v-b7b561fc><a href="#access-for-infra-mgr-to-the-th2-infra-schema-git-repository" data-v-b7b561fc><div data-v-b7b561fc>Access for infra-mgr to the th2 infra-schema Git repository</div></a></li><li class="ml-2 pb-2" data-v-b7b561fc><a href="#ssh-key" data-v-b7b561fc><div data-v-b7b561fc>SSH key</div></a></li><li class="ml-2 pb-2" data-v-b7b561fc><a href="#personal-access-token" data-v-b7b561fc><div data-v-b7b561fc>Personal access token</div></a></li><li class="ml-2 pb-2" data-v-b7b561fc><a href="#using-git-server-internally-in-kubernetes" data-v-b7b561fc><div data-v-b7b561fc>Using Git server internally in Kubernetes</div></a></li><li class="py-2 h2-border" data-v-b7b561fc><a href="#cluster-configuration" data-v-b7b561fc><div data-v-b7b561fc>Cluster configuration</div></a></li><li class="ml-2 pb-2" data-v-b7b561fc><a href="#define-cassandra-hostname" data-v-b7b561fc><div data-v-b7b561fc>Define Cassandra hostname</div></a></li><li class="ml-2 pb-2" data-v-b7b561fc><a href="#define-rabbitmq-ingress-parameters" data-v-b7b561fc><div data-v-b7b561fc>Define RabbitMQ Ingress parameters</div></a></li><li class="ml-2 pb-2" data-v-b7b561fc><a href="#define-th2-ingress-parameters" data-v-b7b561fc><div data-v-b7b561fc>Define th2 Ingress parameters</div></a></li><li class="ml-2 pb-2" data-v-b7b561fc><a href="#create-secret-with-th2-credentials" data-v-b7b561fc><div data-v-b7b561fc>Create secret with th2 credentials</div></a></li><li class="py-2 h2-border" data-v-b7b561fc><a href="#th2-deployment" data-v-b7b561fc><div data-v-b7b561fc>th2 deployment</div></a></li><li class="ml-2 pb-2" data-v-b7b561fc><a href="#install-nginx-ingress-controller" data-v-b7b561fc><div data-v-b7b561fc>Install NGINX Ingress Controller</div></a></li><li class="ml-2 pb-2" data-v-b7b561fc><a href="#install-th2-infra-components-in-the-service-namespace" data-v-b7b561fc><div data-v-b7b561fc>Install th2-infra components in the service namespace</div></a></li><li class="py-2 h2-border" data-v-b7b561fc><a href="#th2-infra-links" data-v-b7b561fc><div data-v-b7b561fc>th2 infra links:</div></a></li></ul></nav></aside></div></div></div></main><footer class="v-footer flex justify-center py-6 v-sheet theme--dark secondary" data-v-28b3144a data-v-7b23e68f><div class="footer__content col" data-v-28b3144a><div class="d-flex justify-space-between footer__sections" data-v-28b3144a><div class="d-flex flex-column px-8 py-4 pa-sm-0 pa-xs-0" data-v-28b3144a><a href="https://exactpro.com/" class="mb-4" data-v-28b3144a><img src="/assets/img/logo_white.118f94fb.svg" style="width:max(200px, 100%);" data-v-28b3144a></a><div class="text-center" data-v-28b3144a>
          Build Software to Test Software
        </div></div><div class="d-flex flex-column px-8 py-4 pa-sm-0 pa-xs-0" data-v-28b3144a><h2 data-v-28b3144a>Contact Us</h2><div class="highliter my-3" data-v-28b3144a></div><div class="d-flex align-center contact" data-v-28b3144a><a href="mailto:docops@exactpro.com" class="v-btn v-btn--icon v-btn--round theme--dark v-size--default" data-v-28b3144a><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-email theme--dark" data-v-28b3144a></i></span></a><a href="mailto:docops@exactpro.com" class="contact__text" data-v-28b3144a>
            docops@exactpro.com
          </a></div><div class="d-flex align-center contact" data-v-28b3144a><a href="mailto:info@exactpro.com" class="v-btn v-btn--icon v-btn--round theme--dark v-size--default" data-v-28b3144a><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-email theme--dark" data-v-28b3144a></i></span></a><a href="mailto:info@exactpro.com" class="contact__text" data-v-28b3144a>
            info@exactpro.com
          </a></div><div class="d-flex align-center contact" data-v-28b3144a><a href="tel:+4402033191644" class="v-btn v-btn--icon v-btn--round theme--dark v-size--default" data-v-28b3144a><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-phone theme--dark" data-v-28b3144a></i></span></a><a href="tel:+4402033191644" class="contact__text" data-v-28b3144a>
            +44 (0) 20 3319 1644
          </a></div><div class="d-flex align-center contact" data-v-28b3144a><a href="tel:+16463403000" class="v-btn v-btn--icon v-btn--round theme--dark v-size--default" data-v-28b3144a><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-phone theme--dark" data-v-28b3144a></i></span></a><a href="tel:+16463403000" class="contact__text" data-v-28b3144a>
            +1 (646) 340 3000
          </a></div></div><div class="d-flex flex-column px-8 py-4 pa-sm-0 pa-xs-0" data-v-28b3144a><h2 data-v-28b3144a>Follow Us</h2><div class="highliter my-3" data-v-28b3144a></div><div class="d-flex" data-v-28b3144a><a href="https://github.com/th2-net" target="_blank" class="mr-2 v-btn v-btn--icon v-btn--round v-btn--tile theme--dark v-size--large" data-v-28b3144a><span class="v-btn__content"><div class="v-image v-responsive theme--dark" data-v-28b3144a><div class="v-image__image v-image__image--preload v-image__image--cover" style="background-image:;background-position:center center;"></div><div class="v-responsive__content"></div></div></span></a><a href="https://www.facebook.com/exactpro/" target="_blank" class="mr-2 v-btn v-btn--icon v-btn--round v-btn--tile theme--dark v-size--large" data-v-28b3144a><span class="v-btn__content"><div class="v-image v-responsive theme--dark" data-v-28b3144a><div class="v-image__image v-image__image--preload v-image__image--cover" style="background-image:;background-position:center center;"></div><div class="v-responsive__content"></div></div></span></a><a href="https://twitter.com/exactpro" target="_blank" class="mr-2 v-btn v-btn--icon v-btn--round v-btn--tile theme--dark v-size--large" data-v-28b3144a><span class="v-btn__content"><div class="v-image v-responsive theme--dark" data-v-28b3144a><div class="v-image__image v-image__image--preload v-image__image--cover" style="background-image:;background-position:center center;"></div><div class="v-responsive__content"></div></div></span></a><a href="https://www.linkedin.com/company/exactpro-systems-llc?trk=biz-companies-cym" target="_blank" class="mr-2 v-btn v-btn--icon v-btn--round v-btn--tile theme--dark v-size--large" data-v-28b3144a><span class="v-btn__content"><div class="v-image v-responsive theme--dark" data-v-28b3144a><div class="v-image__image v-image__image--preload v-image__image--cover" style="background-image:;background-position:center center;"></div><div class="v-responsive__content"></div></div></span></a><a href="https://www.youtube.com/c/exactprosystems" target="_blank" class="mr-2 v-btn v-btn--icon v-btn--round v-btn--tile theme--dark v-size--large" data-v-28b3144a><span class="v-btn__content"><div class="v-image v-responsive theme--dark" data-v-28b3144a><div class="v-image__image v-image__image--preload v-image__image--cover" style="background-image:;background-position:center center;"></div><div class="v-responsive__content"></div></div></span></a></div></div></div><hr role="separator" aria-orientation="horizontal" class="my-12 v-divider theme--dark" data-v-28b3144a><div class="text-center text-caption" data-v-28b3144a>
      Copyright Â© 2009 - 2022 Exactpro. All Rights Reserved. Exactpro refers to Exactpro Systems Limited, registered in England and Wales, and/or one of its subsidiaries, each of which is a separate legal entity, registered in the relevant jurisdictions.
    </div><div class="text-center text-caption policies" data-v-28b3144a><a href="https://exactpro.com/terms-and-conditions" target="blank" class="mx-1" data-v-28b3144a>
         Terms and Conditions
      </a><a href="https://exactpro.com/privacy-policy" target="blank" class="mx-1" data-v-28b3144a>
         Privacy policy
      </a><a href="https://exactpro.com/cookies-policy" target="blank" class="mx-1" data-v-28b3144a>
         Cookies policy
      </a></div></div></footer></div></div></div>
    <script>window.__INITIAL_STATE__={"data":{"doc":{"title":"3. Deploy th2","inner_title":"","description":"3. Deploy th2\n\nAs all the environments are prepared, we can install th2.","content":"\n# 3. Deploy th2\n\nAs all the environments are prepared, we can install th2.\n\n\u003C!--more--\u003E\n\n## Prerequisites\nBefore you begin, please check that you have:\n* fully functioning Kubernetes cluster suitable for your business needs (please refer to [technical requirements](..\u002F..\u002Frequirements\u002F));\n* an operator box that meets [hardware](..\u002F..\u002Frequirements\u002Fhardware\u002F) and [software](..\u002F..\u002Frequirements\u002Fsoftware\u002F) requirements;\n* installed [Apache Cassandra](https:\u002F\u002Fcassandra.apache.org\u002F) ([technical requirements](..\u002F..\u002Frequirements\u002Fhardware#apache-cassandra-cluster-hardware-requirements)).\n  \nAll th2 components are deployed via Helm charts by [Helm](https:\u002F\u002Fhelm.sh\u002F) and [Helm Operator](https:\u002F\u002Fdocs.fluxcd.io\u002Fprojects\u002Fhelm-operator\u002Fen\u002Fstable\u002F).\n\n\n## Download infra values\nInstallation of th2-infra requires a Git repository for maintaining th2 infra-schema configuration. \nThe information regarding this repository and its usage can be found in the guide further.\n* [These example values](https:\u002F\u002Fgithub.com\u002Fth2-net\u002Fth2-infra\u002Ftree\u002Fmaster\u002Fexample-values) can be used as a starter kit for th2 infra, we also recommend storing these values in a separate Git repository.\n\nThe first step of the th2 deployment process is copying th2-infra repository into your operator box:\n\n```shell\ngit clone -b v1.7.3 https:\u002F\u002Fgithub.com\u002Fth2-net\u002Fth2-infra.git\n```\n\nChange the current directory:\n\n```shell\ncd .\u002Fth2-infra\u002Fexample-values\n```\n\n\n## Infrastructure namespaces\n\nInside the cluster separate namespaces can be created. Custom infra-schemas can have their namespaces.\n\n\u003Cnotice info\u003E\n\nThe \"infra-schema\" part in the *infra-schema* namespace is a placeholder to be replaced with a user-defined name of a custom infra-schema (corresponds to the name of the repository branch containing a particular infra-schema implementation).\n\n\u003C\u002Fnotice\u003E\n\nInfrastructure components are split into two namespaces: _monitoring_ and _service_. These namespaces will be created below.\n\nThe following components of monitoring stack are deployed into _monitoring_ namespace:\n\n\u003Crecommendations :items=\"$frontmatter.monitoring_links\"\u003E\u003C\u002Frecommendations\u003E\n\nThe _service_ namespace is used for infrastructure services:\n\n\u003Crecommendations :items=\"$frontmatter.service_links\"\u003E\u003C\u002Frecommendations\u003E\n  \nand for th2-infra components:\n\n\u003Crecommendations :items=\"$frontmatter.infra_links\"\u003E\u003C\u002Frecommendations\u003E\n\n### Create namespaces\n\n```shell\nkubectl create namespace monitoring\nkubectl create namespace service\n```\n\n\u003Cspoiler title=\"Output example\"\u003E\n\n```shell\n$ kubectl create namespace monitoring\nnamespace\u002Fmonitoring created\n$ kubectl create namespace service\nnamespace\u002Fservice created\n```\n\n\u003C\u002Fspoiler\u003E  \n\nThe following pictures describe *service* and *monitoring* namespaces:\n\n![service_namespace](.\u002Fservice_namespace.png)\n\n\n![monitoring_namespace](.\u002Fmonitoring_namespace.png)\n\n## Data persistence\n\nData persistence is required for the following components: Grafana, Prometheus, Loki, RabbitMQ and should be set up on this step.\n\n\u003Cnotice info\u003E\n\nExamples below use HostPath type of [Persistent Volume(PV)](https:\u002F\u002Fkubernetes.io\u002Fdocs\u002Fconcepts\u002Fstorage\u002Fpersistent-volumes\u002F). \nPlease read the documentation to choose an appropriate PV type for your environment.\n\n\u003C\u002Fnotice\u003E\n\n* Create directories on the th2 node (the following command can require root permissions):\n\n```shell\nmkdir \u002Fopt\u002Fgrafana \u002Fopt\u002Fprometheus \u002Fopt\u002Floki \u002Fopt\u002Frabbitmq\n```\n\n* Set node name in `pvs.yaml`.\n* Create PVs and PVCs:\n```shell\nkubectl apply -f .\u002Fpvs.yaml\nkubectl apply -f .\u002Fpvcs.yaml\n```\n\n### PV for read components\n\nTo include **read** components in your configuration, a dedicated PersistentVolume for **read** log directory needs to be set up.\nAdd a PersistentVolume mapped to the `\u002Fopt\u002Fcomponents` directory.  Once an *infra-schema* namespace is installed, create a PersistentVolumeClaim. \n\nPV and PVC examples can be found in `example-values\u002Fpersistence\u002F`.\n\n```shell\nmkdir \u002Fopt\u002Fcomponents\n```\n* Set node name in `persistence\u002Fpv.yaml`.\n* Create PV:\n```shell\nkubectl apply -f .\u002Fpersistence\u002Fpv.yaml\n```\n\n## Monitoring deployment\n\n\u003Cnotice note\u003E \n\nIt's an optional step, but it provides an easier way to check the result of the installation. \nIn all installation commands we explicitly define namespaces to avoid possible mistakes.\n\n\u003C\u002Fnotice\u003E\n\n* Switch the namespace to _monitoring_:\n```shell\nkubectl config set-context --current --namespace=monitoring\n```\n\n\u003Cnotice note\u003E\n\nGrafana and Dashboard hostnames should be configured only if you have a DNS name. \nIP address configuration is not required. \n\n\u003C\u002Fnotice\u003E\n\n* Define Grafana and Dashboard hostnames (the name must be resolved from the tester boxes):\n  * in the [service.values.yaml](https:\u002F\u002Fgithub.com\u002Fth2-net\u002Fth2-infra\u002Fblob\u002Fv1.7.3\u002Fexample-values\u002Fservice.values.yaml) file:\n    ```yaml\n    ingress:\n      host: &host \u003Cth2_host_name\u003E\n    kubernetes-dashboard:\n      ingress:\n        hosts: [*host]\n    ```\n  * in the [prometheus-operator.values.yaml](https:\u002F\u002Fgithub.com\u002Fth2-net\u002Fth2-infra\u002Fblob\u002Fv1.7.3\u002Fexample-values\u002Fprometheus-operator.values.yaml) file:\n    ```yaml\n    grafana:\n      ingress:\n        hosts:\n          - \u003Cth2_host_name\u003E\n    ```\n\n* Deploy components:\n```shell\nhelm repo add grafana https:\u002F\u002Fgrafana.github.io\u002Fhelm-charts\nhelm repo add prometheus-community https:\u002F\u002Fprometheus-community.github.io\u002Fhelm-charts\nhelm install --version=2.4.1 loki -n monitoring grafana\u002Floki-stack -f .\u002Floki.values.yaml\nhelm install --version=15.0.0 prometheus -n monitoring prometheus-community\u002Fkube-prometheus-stack -f .\u002Fprometheus-operator.values.yaml\n```\n* Check the result:\n```shell\n$ kubectl get pods\nNAME                                                     READY   STATUS    RESTARTS   AGE\n........\nalertmanager-prometheus-prometheus-oper-alertmanager-0   2\u002F2     Running   0          75s\nloki-0                                                   1\u002F1     Running   0          4m47s\nloki-promtail-wqfml                                      1\u002F1     Running   0          4m47s\nprometheus-grafana-68f8dd6d57-2gtns                      2\u002F2     Running   0          82s\nprometheus-kube-state-metrics-75d4cc9dbd-psb88           1\u002F1     Running   0          82s\nprometheus-prometheus-node-exporter-gfzp6                1\u002F1     Running   0          82s\nprometheus-prometheus-oper-operator-df668d457-snxks      1\u002F1     Running   0          82s\nprometheus-prometheus-prometheus-oper-prometheus-0       3\u002F3     Running   1          65s        \n........\n```\n\n## Access for infra-mgr to the th2 infra-schema Git repository\n\n### SSH key\n\nSSH access with write permissions is required by **infra-mgr** component.\n\n* Generate keys without a passphrase:  \n```\n$ ssh-keygen -t rsa -m pem -f .\u002Finfra-mgr-rsa.key\n``` \n* [Add a new deploy key to your infra-schema repository on GitHub ](https:\u002F\u002Fdocs.github.com\u002Fen\u002Fdevelopers\u002Foverview\u002Fmanaging-deploy-keys#deploy-keys).\n* Create infra-mgr secret from the private key:\n```\n$ kubectl -n service create secret generic infra-mgr --from-file=id_rsa=.\u002Finfra-mgr-rsa.key\n```\n\n* set `infraMgr.git.repository` value in the [service.values.yaml](https:\u002F\u002Fgithub.com\u002Fth2-net\u002Fth2-infra\u002Fblob\u002Fv1.7.3\u002Fexample-values\u002Fservice.values.yaml) file to `ssh` link of your infra-schema repository, e.g:\n```yaml\ninfraMgr:\n  git:\n    repository: git@github.com:th2-net\u002Fth2-infra-demo-configuration.git\n```\n\n### Personal access token\n\nDue to the [improvements in Git protocol security](https:\u002F\u002Fgithub.blog\u002F2021-09-01-improving-git-protocol-security-github\u002F) on GitHub, keys supported in ssh have underwent changes. \nThese changes affected the th2 ssh connections to the GitHub repositories. \nSSH keys generated with RSA algorithm are no longer accepted when uploaded to GitHub after March 15, 2022. \nHowever, the keys uploaded before this date continue to work.\n\nGitHub repositories can be accessed via personal access tokens. \nIn case you cannot use a token, update your th2 version to use ssh connection.\n\n\u003Crecommendations :items=\"$frontmatter.tokens_link\" \u003E\u003C\u002Frecommendations\u003E\n\nIt is required to grant permissions from `repo` scope. \nOther permissions are not needed.\n\n![Token permissions](.\u002Fgh-token-permissions.png)\n\nSet `infraMgr.git.repository` value in the [service.values.yaml](https:\u002F\u002Fgithub.com\u002Fth2-net\u002Fth2-infra\u002Fblob\u002Fv1.7.3\u002Fexample-values\u002Fservice.values.yaml) file to **https** link of your infra-schema repository. \nGenerate and include PAT as HTTP auth credentials.\n\n```yaml\ninfraMgr:\n  git:\n    repository: https:\u002F\u002Fgithub.com\u002Fth2-net\u002Fth2-infra-demo-configuration.git\n    httpAuthUsername: \"\u003Ctoken\u003E\" \n    httpAuthPassword: \"\u003Ctoken\u003E\" \n```\n\ninfra-mgr secret is still required.\n\n```shell\nkubectl -n service create secret generic infra-mgr --from-literal=infra-mgr=infra-mgr\n```\n\n### Using Git server internally in Kubernetes\n\n\nIf you have any restrictions to get access to any external repositories from the k8s cluster, Git service can be deployed according to the following instruction:\n\n*  Create PersistentVolume \"repos-volume\", example is presented in the `.\u002Fexample-values\u002Fpersistence\u002Fpv.yaml`;\n*  Create configmap \"keys-repo\" from public part of key from point [Access for infra-mgr to the th2 infra-schema Git repository](#access-for-infra-mgr-to-the-th2-infra-schema-git-repository):\n\n```shell\nkubectl -n service create configmap keys-repo --from-file=authorized_keys=.\u002Finfra-mgr-rsa.pub\n```\n*  Define configs for infra-git in `services.values.yaml`. \n*  Set `infraMgr.git.repository` value in the `service.values.yaml` file to **ssh** link of your repository, e.g:\n```yaml\ninfraMgr:\n  git:\n    repository: ssh:\u002F\u002Fgit@git-ssh\u002Fhome\u002Fgit\u002Frepo\u002F\u003Cyour_repo_name\u003E.git\n```\n* After installation, you should initiate a new repository with the name defined at the previous step.\n\n\n## Cluster configuration\n\nOnce all the required software is installed on your th2 node, Apache Cassandra node, and operator box, and th2-infra repository is ready, you can start configuring the cluster.\n\n* Switch namespace to *service*:\n```\n$ kubectl config set-context --current --namespace=service\n```\n\n### Define Cassandra hostname\n* Set `cassandra.host` value for `cassandra` in the [service.values.yaml](https:\u002F\u002Fgithub.com\u002Fth2-net\u002Fth2-infra\u002Fblob\u002Fv1.7.3\u002Fexample-values\u002Fservice.values.yaml) file. \n* It is also recommended specifying a name of Cassandra datacenter (it is `datacenter1` by default):\n\n```yaml\ncassandra:\n  internal: false\n  host: \u003Ccassandra-host\u003E\n  cluster: \n    datacenter: datacenter1\n```\n\n### Define RabbitMQ Ingress parameters\nIf required, add the `rabbitmq.ingress.hostName` value into [service.values.yaml](https:\u002F\u002Fgithub.com\u002Fth2-net\u002Fth2-infra\u002Fblob\u002Fv1.7.3\u002Fexample-values\u002Fservice.values.yaml) file. Otherwise, the RabbitMQ HTTP service will be available on the node IP address.\n\n### Define th2 Ingress parameters\nIf required, add `ingress.hostname` value into [service.values.yaml](https:\u002F\u002Fgithub.com\u002Fth2-net\u002Fth2-infra\u002Fblob\u002Fv1.7.3\u002Fexample-values\u002Fservice.values.yaml) file. Otherwise, th2 HTTP services will be available on the node IP address.\n\n\n```yaml\ningress:\n  host: example.com\n```\n\nIn order to include Kubernetes address to configurations for external interactions, you can add option `infraOperator.config.k8sUrl`, which can be both an IP address or a domain name.\n\n```yaml\ninfraOperator:\n  config:\n    k8sUrl: \"\u003Ckubernetes-external-entrypoint\u003E\"\n```\n\n### Create secret with th2 credentials\n\nCreate `secrets.yaml` in `.\u002F` folder (*do not commit into Git*). Example:\n```yaml\n# required only for images from a private registry, will be attached as the first PullSecret to deployments\n#productRegistry:\n#  username: user\n#  password: password\n#  name: private-registry-1.example.com # core components registry\n# required only for images from a private registry, will be attached as the second PullSecret to deployments\n#solutionRegistry:\n#  username: user\n#  password: password\n#  name: private-registry-2.example.com # components registry\n# required only for images from a private registry, will be attached as the third PullSecret to deployments\n#proprietaryRegistry:\n#  username: user\n#  password: password\n#  name: private-registry-3.example.com # components registry\ncassandra:\n# set credentials for existing Cassandra cluster\n  dbUser:\n    user: \u003Cuser-name\u003E\n    password: \u003Cpassword\u003E\nrabbitmq:\n# set admin user credentials, it will be created during deployment\n  rabbitmqUsername: th2\n  rabbitmqPassword: rab-pass\n  # must be a random string\n  rabbitmqErlangCookie: cookie\n```\n\n## th2 deployment\n### Install NGINX Ingress Controller\n```shell\nhelm repo add ingress-nginx https:\u002F\u002Fkubernetes.github.io\u002Fingress-nginx\nhelm install -n service --version=3.31.0 ingress ingress-nginx\u002Fingress-nginx -f .\u002Fingress.values.yaml\n```\nCheck:\n```shell\n$ kubectl get pods\nNAME                                                READY   STATUS    RESTARTS   AGE\n........\ningress-ingress-nginx-controller-7979dcdd85-mw42w   1\u002F1     Running   0          30s\n........\n```\n\n### Install th2-infra components in the service namespace\n```shell\nhelm repo add th2 https:\u002F\u002Fth2-net.github.io\nhelm install -n service --version=\u003Cversion\u003E th2-infra th2\u002Fth2 -f .\u002Fservice.values.yaml -f .\u002Fsecrets.yaml\n```\n\n\u003Cnotice note\u003E\n\nReplace `\u003Cversion\u003E` with th2-infra release version you need. You can check versions [here](https:\u002F\u002Fgithub.com\u002Fth2-net\u002Fth2-infra\u002Freleases)\n\n\u003C\u002Fnotice\u003E\n\nWait for all the pods in *service* namespace to be up and running. Once completed, proceed with [infra-schema configuration](https:\u002F\u002Fgithub.com\u002Fth2-net\u002Fth2-infra-schema-demo\u002Fblob\u002Fmaster\u002FREADME.md) to deploy th2 namespaces.\n\n\n## th2 infra links:\n- Kubernetes dashboard `http:\u002F\u002Fyour-host:30000\u002Fdashboard\u002F`\n- Grafana `http:\u002F\u002Fyour-host:30000\u002Fgrafana\u002F`\n- th2-infra-editor `http:\u002F\u002Fyour-host:30000\u002Feditor\u002F`\n- RabbitMQ `http:\u002F\u002Fyour-host:30000\u002Frabbitmq\u002F`\n- th2-reports `http:\u002F\u002Fyour-host:30000\u002Fyour-namespace\u002F`\n","fileInfo":{"path":"getting-started\u002Finstall-th2\u002F3-th2.md"},"headings":[{"anchor":"#3-deploy-th2","value":"3. Deploy th2","depth":1},{"anchor":"#prerequisites","value":"Prerequisites","depth":2},{"anchor":"#download-infra-values","value":"Download infra values","depth":2},{"anchor":"#infrastructure-namespaces","value":"Infrastructure namespaces","depth":2},{"anchor":"#create-namespaces","value":"Create namespaces","depth":3},{"anchor":"#data-persistence","value":"Data persistence","depth":2},{"anchor":"#pv-for-read-components","value":"PV for read components","depth":3},{"anchor":"#monitoring-deployment","value":"Monitoring deployment","depth":2},{"anchor":"#access-for-infra-mgr-to-the-th2-infra-schema-git-repository","value":"Access for infra-mgr to the th2 infra-schema Git repository","depth":2},{"anchor":"#ssh-key","value":"SSH key","depth":3},{"anchor":"#personal-access-token","value":"Personal access token","depth":3},{"anchor":"#using-git-server-internally-in-kubernetes","value":"Using Git server internally in Kubernetes","depth":3},{"anchor":"#cluster-configuration","value":"Cluster configuration","depth":2},{"anchor":"#define-cassandra-hostname","value":"Define Cassandra hostname","depth":3},{"anchor":"#define-rabbitmq-ingress-parameters","value":"Define RabbitMQ Ingress parameters","depth":3},{"anchor":"#define-th2-ingress-parameters","value":"Define th2 Ingress parameters","depth":3},{"anchor":"#create-secret-with-th2-credentials","value":"Create secret with th2 credentials","depth":3},{"anchor":"#th2-deployment","value":"th2 deployment","depth":2},{"anchor":"#install-nginx-ingress-controller","value":"Install NGINX Ingress Controller","depth":3},{"anchor":"#install-th2-infra-components-in-the-service-namespace","value":"Install th2-infra components in the service namespace","depth":3},{"anchor":"#th2-infra-links","value":"th2 infra links:","depth":2}],"read_before":[],"continue_learning":[{"title":"Create th2 env","href":"..\u002F..\u002Fcreate-th2-env\u002F","icon":""}],"terms":[],"related":[],"hide_releases":null,"_githubRepository":null},"readmeDoc":null},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.823d22fb.js" defer></script><script src="/assets/js/page--src--templates--documentation-vue.dccd437e.js" defer></script><script src="/assets/js/vue-remark--content--docs--getting-started--install-th-2--3-th-2-md.21ad5916.js" defer></script>
  </body>
</html>
