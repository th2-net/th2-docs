{"hash":"65f5245d489f6fa01b5b73dd722c5658730829d9","data":{"doc":{"title":"1. Set up the environment","inner_title":"","description":"","content":"\n# 1. Set up the environment\n\n## th2 platform \n\nth2 is running over Kubernetes and Cassandra clusters, which should be installed to use them as a platform for th2.\n\nKubernetes is needed as an environment underpinning the idea of th2 as a microservices framework. \nIt provides flexibility for any component of th2 to be created, updated or deleted without impacting the entire solution.\n\nCassandra plays a role of data storage for th2. It is a high performance NoSQL distributed database. \nSo the storage is quite flexible for user needs.\n\n## Common tools\n\nRegardless of how you are going to run the cluster, you need tools to interact with it. \nInteraction with Cassandra and Kubernetes is needed for the process of the th2 configuration. \nIt can also be useful for possible debugging.\n\n| Tool    | Version         |\n| ------- | --------------- |\n| Docker  | 19+             |\n| kubectl | 1.19.x - 1.20.x |\n| Helm    | 3+              |\n| cqlsh   |                 |\n\nYou can find some th2 use cases with provided machines listing.\n\n<recommendations :items=\"$frontmatter.use_cases_link\"></recommendations>\n\nOne machine can combine several types listed here.\n\nYou can choose either a full setup described in this section, or a [quick setup](./../../../cookbook/quick-setup/) for demo purposes. \n\n\n## th2 node\n\nA th2 node is a machine where your th2 system runs fully or partially. A th2 node requires the following applications to be installed. \n\n1. Docker CE v19+\n\n   Docker is an open-source application containerization technology. In th2, services are run inside separate Docker containers. To install Docker, follow the [official guide](https://docs.docker.com/engine/install/). Upon installation, you need to [configure Docker](https://kubernetes.io/docs/setup/production-environment/container-runtimes/#docker) for Kubernetes.\n\n   [Overlay2 storage driver prerequisites](https://docs.docker.com/storage/storagedriver/overlayfs-driver/#prerequisites).\n   \n2. Kubernetes v1.19.x or 1.20.x\n\n   The Kubernetes cluster should be installed with the [flannel CNI plugin](https://coreos.com/flannel/docs/latest/kubernetes.html#the-flannel-cni-plugin) (a single master node in the development mode, and one master and 2+ worker nodes in the production mode). Kubernetes is needed as a technology platform to support the microservices nature of the th2 framework.\n   - [Kubernetes tools installation](https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/install-kubeadm/).\n   - [Creating a cluster](https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/).\n   - The [kubelet](https://kubernetes.io/docs/reference/command-line-tools-reference/kubelet/) is a service that powers Kubernetes.  \n   - [Kubeadm](https://kubernetes.io/docs/reference/setup-tools/kubeadm/) is a set of tools for creating and managing a Kubernetes cluster.     \n   - Installing flannel CNI \n      Execute the following command in the terminal: <br />```kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml```\n    \n   \n## Operator box\n\nThe operator box is a machine used to monitor and control the th2 cluster.\n\n1. Git  \n   Created in line with the DevOps/GitOps paradigm, th2 synchronizes configuration in the Git repositories with the state of the testing system and updates the corresponding components.\n   - [Installation guide](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git)\n2. kubectl  \n   [Kubectl](https://kubernetes.io/docs/reference/kubectl/) is a command line interface for interacting with a Kubernetes cluster.  \n   - [Installation guide](https://kubernetes.io/docs/tasks/tools/#kubectl)\n3. Helm 3+  \n   Helm is a package manager for Kubernetes used to deploy required modules to a Kubernetes cluster.  \n   - [Installation guide](https://helm.sh/docs/intro/install/)\n4. Chrome 75 or newer  \n   A browser is required to access the th2 web interface, Kubernetes dashboard, Grafana, etc.  \n   - [Download](https://www.google.com/chrome)\n\n## Apache Cassandra node\n\nAn Apache Cassandra node is a machine where the Cassandra database for th2 system is deployed.\n\n1. Cassandra 3.11.6+  \n   Cassandra plays the role of data storage for th2. It is a NoSQL distributed database with high performance. So the storage is quite flexible for user needs.\n   - [Cassandra installation guide](https://cassandra.apache.org/doc/latest/getting_started/installing.html#installing-cassandra)\n   Cassandra requires Java for running (Java 8+)\n   - [Java installation guide](https://www.java.com/en/download/help/download_options.html)\n   \n\n2. cqlsh\n   `cqlsh` is a command line interface, that provides an access to the Cassandra database.\n   - [Python 3.7+ installation guide](https://wiki.python.org/moin/BeginnersGuide/Download). `cqlsh` is based on Python, so you need to install this programming language as well.\n   - `cqlsh` is installed with Cassandra, but you also can install it with `pip`:\n    ```sh\n    pip install cqlsh\n    ```\n\nAlso, it is needed to:\n- create a user with admin rights for th2;\n- provide access to the Cassandra database over the network.\n\n## Tester box\n\nTester boxes are machines used for executing test scripts and getting test execution results.\n\n1. Git  \n   Git is required for fetching scripts from the Git server and changing `th2-infra-schema`.\n   - [Installation guide](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git)\n2. kubectl  \n   Some th2 modules use configured Kubectl for getting credentials for connecting to Kubernetes cluster with th2.  \n   - [Installation guide](https://kubernetes.io/docs/tasks/tools/)\n3. Chrome 75 or newer  \n   A browser is required to access the th2 web interface, Kubernetes dashboard, Grafana, etc.  \n   - [Download](https://www.google.com/chrome)\n4. Programming languages and appropriate package managers for running your th2 modules locally.  \n   th2 is a microservices solution allowing to use diverse programming languages. To support them, Docker containers can be used so that there's no need to install a programming language locally. However, the possibility to run your code locally exists. It is implemented through th2 external boxes communicating with a th2 cluster. In this case, programming languages are installed locally for external boxes only.\n","fileInfo":{"path":"getting-started/install-th2/1-base-system.md"},"headings":[{"anchor":"#1-set-up-the-environment","value":"1. Set up the environment","depth":1},{"anchor":"#th2-platform","value":"th2 platform","depth":2},{"anchor":"#common-tools","value":"Common tools","depth":2},{"anchor":"#th2-node","value":"th2 node","depth":2},{"anchor":"#operator-box","value":"Operator box","depth":2},{"anchor":"#apache-cassandra-node","value":"Apache Cassandra node","depth":2},{"anchor":"#tester-box","value":"Tester box","depth":2}],"read_before":[{"title":"th2 software requirements","href":"../../../getting-started/requirements/software/","icon":"mdi-alert-circle-outline"}],"continue_learning":[{"title":"Publish infra-schema","href":"./../2-infra-schema/","icon":""}],"terms":[],"related":[],"hide_releases":null,"_githubRepository":null},"readmeDoc":null},"context":{}}