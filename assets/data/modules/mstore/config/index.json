{"hash":"2c39d0f6c4e74e25e9cd96bd966a35a86b99cf6b","data":{"doc":{"__typename":"ModulePage","title":"Configuration","description":"","content":"\n# Configuration\n\n**infra-schema** can only contain one **mstore** box description.\nIt consists of one required option - a Docker image.\nPin configuration is generated and managed by **infra-operator**.\n\n## Configuration parameters\n\n- `drain-interval` - interval in milliseconds to drain all aggregated batches that are not stored yet.\n- The default value is `1000`.\n\n- `termination-timeout` - the timeout in milliseconds to await for the inner drain scheduler to finish all the tasks.\n- The default value is `5000`.\n\n```yaml\n{\n  \"drain-interval\": 1000,\n  \"termination-timeout\": 5000\n}\n```\n\n## Required pins and links\n\nA user does not need to set up a MQ pin in the **mstore** custom resource.\nThe inbound **mstore** queues receive raw messages from all the boxes that have `mq` pins with the attribute `store`.  \nExamples of such boxes include **conn**, **hand**, and **read**.\n\n## Configuration example\n\nGeneral view of the component looks like this:\n\n```yaml\napiVersion: th2.exactpro.com/v1\nkind: Th2Mstore\nmetadata:\n  name: mstore\nspec:\n  image-name: ghcr.io/th2-net/th2-mstore\n  image-version: <image version>\n  custom-settings:\n    drain-interval: 1000\n    termination-timeout: 5000\n  extended-settings:\n    service:\n      enabled: false\n    envVariables:\n      JAVA_TOOL_OPTIONS: \"-XX:+ExitOnOutOfMemoryError -Ddatastax-java-driver.advanced.connection.init-query-timeout=\\\"5000 milliseconds\\\"\"\n    resources:\n      limits:\n        memory: 500Mi\n        cpu: 200m\n      requests:\n        memory: 100Mi\n        cpu: 20m\n```\n","fileInfo":{"path":"mstore/config.md"},"headings":[{"anchor":"#configuration","value":"Configuration","depth":1},{"anchor":"#configuration-parameters","value":"Configuration parameters","depth":2},{"anchor":"#required-pins-and-links","value":"Required pins and links","depth":2},{"anchor":"#configuration-example","value":"Configuration example","depth":2}],"terms":[],"meta":{"contentTreeJSON":"[{\"title\":\"mstore\",\"path\":\"/modules/mstore/\",\"weight\":-100,\"followPath\":\"/modules/mstore/overview/\",\"children\":[{\"title\":\"Overview\",\"path\":\"/modules/mstore/overview/\",\"weight\":0,\"followPath\":\"/modules/mstore/overview/\",\"children\":[]},{\"title\":\"Repositories\",\"path\":\"/modules/mstore/repositories/\",\"weight\":5,\"followPath\":\"/modules/mstore/repositories/\",\"children\":[]},{\"title\":\"Configuration\",\"path\":\"/modules/mstore/config/\",\"weight\":10,\"followPath\":\"/modules/mstore/config/\",\"children\":[]},{\"title\":\"Useful hints\",\"path\":\"/modules/mstore/usage/\",\"weight\":15,\"followPath\":\"/modules/mstore/usage/\",\"children\":[]}]}]","module_name":"mstore","main_path":"/modules/mstore/"}}},"context":{}}