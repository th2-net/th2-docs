(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"6iLU":function(e,t,n){"use strict";n.r(t);var o=n("7uw+"),r=n("UQSp"),a=n("oCYn");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}a.default.config.optionMergeStrategies;var s={VueRemarkRoot:r.a},d=function(e){var t=e.options.components=e.options.components||{},n=e.options.computed=e.options.computed||{};Object.keys(s).forEach((function(e){"object"===i(s[e])&&"function"==typeof s[e].render||"function"==typeof s[e]&&"function"==typeof s[e].options.render?t[e]=s[e]:n[e]=function(){return s[e]}}))},v=a.default.config.optionMergeStrategies,l="__vueRemarkFrontMatter",c={excerpt:null,weight:20,"tree-title":"mstore",readme:"https://raw.githubusercontent.com/th2-net/th2-mstore/master/README.md",title:"Overview (4.0.0)"};var m=function(e){e.options[l]&&(e.options[l]=c),a.default.util.defineReactive(e.options,l,c),e.options.computed=v.computed({$frontmatter:function(){return e.options[l]}},e.options.computed)},u=Object(o.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("VueRemarkRoot",[n("h1",{attrs:{id:"overview-400"}},[n("a",{attrs:{href:"#overview-400","aria-hidden":"true"}},[e._v("#")]),e._v("Overview (4.0.0)")]),n("p",[e._v("Message store (mstore) is an important th2 component responsible for storing raw messages into Cradle. Please refer to "),n("a",{attrs:{href:"https://github.com/th2-net/cradleapi/blob/master/README.md",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("Cradle repository")]),e._v(" for more details. This component has a pin for listening messages via MQ.")]),n("p",[e._v('Users must mark a pin that produces raw messages in conn, read and hand boxes via the "store" attribute, in order to automatically connect that pin to mstore and to collect all messages into Cradle.')]),n("p",[e._v("Raw message is a base entity of th2. All incoming / outgoing data is stored in this format\nEvery raw message contains important parts:")]),n("ul",[n("li",[e._v("session alias - unique identifier of business session.")]),n("li",[e._v("direction - direction of message stream.")]),n("li",[e._v("sequence number - incremental identifier.")]),n("li",[e._v("data - byte representation of raw message ")])]),n("p",[e._v("session alias, direction and sequence number are a "),n("strong",[e._v("compound unique identifier")]),e._v(" of raw messages within th2")]),n("h1",{attrs:{id:"configuration"}},[n("a",{attrs:{href:"#configuration","aria-hidden":"true"}},[e._v("#")]),e._v("Configuration")]),n("div",{staticClass:"remark-highlight"},[n("pre",{staticClass:"language-shell"},[n("code",{staticClass:"language-shell"},[e._v("json\n"),n("span",{staticClass:"token punctuation"},[e._v("{")]),e._v("\n  "),n("span",{staticClass:"token string"},[e._v('"drain-interval"')]),n("span",{staticClass:"token builtin class-name"},[e._v(":")]),e._v(" "),n("span",{staticClass:"token number"},[e._v("1000")]),e._v(",\n  "),n("span",{staticClass:"token string"},[e._v('"termination-timeout"')]),n("span",{staticClass:"token builtin class-name"},[e._v(":")]),e._v(" "),n("span",{staticClass:"token number"},[e._v("5000")]),e._v("\n"),n("span",{staticClass:"token punctuation"},[e._v("}")]),e._v("\n")])]),n("copy-code-btn")],1),n("h4",{attrs:{id:"drain-interval"}},[n("a",{attrs:{href:"#drain-interval","aria-hidden":"true"}},[e._v("#")]),e._v("drain-interval")]),n("p",[e._v("Interval in milliseconds to drain all aggregated batches that are not stored yet. The default value is 1000.")]),n("h4",{attrs:{id:"termination-timeout"}},[n("a",{attrs:{href:"#termination-timeout","aria-hidden":"true"}},[e._v("#")]),e._v("termination-timeout")]),n("p",[e._v("The timeout in milliseconds to await for the inner drain scheduler to finish all the tasks. The default value is 5000.")]),n("h1",{attrs:{id:"custom-resources-for-infra-mgr"}},[n("a",{attrs:{href:"#custom-resources-for-infra-mgr","aria-hidden":"true"}},[e._v("#")]),e._v("Custom resources for infra-mgr")]),n("p",[e._v("Infra schema can only contain one mstore box description. It consists of one required option - docker image . Pin configuration is generated and managed by infra-operator.")]),n("h3",{attrs:{id:"quick-start"}},[n("a",{attrs:{href:"#quick-start","aria-hidden":"true"}},[e._v("#")]),e._v("Quick start")]),n("p",[e._v("General view of the component will look like this:")]),n("div",{staticClass:"remark-highlight"},[n("pre",{staticClass:"language-shell"},[n("code",{staticClass:"language-shell"},[e._v("yaml\napiVersion: th2.exactpro.com/v1\nkind: Th2Mstore\nmetadata:\n  name: mstore\nspec:\n  image-name: ghcr.io/th2-net/th2-mstore\n  image-version: "),n("span",{staticClass:"token operator"},[e._v("<")]),e._v("image version"),n("span",{staticClass:"token operator"},[e._v(">")]),e._v("\n  custom-settings:\n    drain-interval: "),n("span",{staticClass:"token number"},[e._v("1000")]),e._v("\n    termination-timeout: "),n("span",{staticClass:"token number"},[e._v("5000")]),e._v("\n  extended-settings:\n    service:\n      enabled: "),n("span",{staticClass:"token boolean"},[e._v("false")]),e._v("\n    envVariables:\n      JAVA_TOOL_OPTIONS: "),n("span",{staticClass:"token string"},[e._v('"-XX:+ExitOnOutOfMemoryError -Ddatastax-java-driver.advanced.connection.init-query-timeout='),n("span",{staticClass:"token entity",attrs:{title:'\\"'}},[e._v('\\"')]),e._v("5000 milliseconds"),n("span",{staticClass:"token entity",attrs:{title:'\\"'}},[e._v('\\"')]),e._v('"')]),e._v("\n    resources:\n      limits:\n        memory: 500Mi\n        cpu: 200m\n      requests:\n        memory: 100Mi\n        cpu: 20m\n")])]),n("copy-code-btn")],1),n("h1",{attrs:{id:"common-features"}},[n("a",{attrs:{href:"#common-features","aria-hidden":"true"}},[e._v("#")]),e._v("Common features")]),n("p",[e._v("This is a list of supported features provided by libraries.\nPlease see more details about this feature via "),n("a",{attrs:{href:"https://github.com/th2-net/th2-common-j#configuration-formats",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("link")]),e._v(".")]),n("h2",{attrs:{id:"400"}},[n("a",{attrs:{href:"#400","aria-hidden":"true"}},[e._v("#")]),e._v("4.0.0")]),n("ul",[n("li",[e._v("Update common version from "),n("code",{pre:!0},[e._v("3.35.0")]),e._v(" to "),n("code",{pre:!0},[e._v("3.36.0")])]),n("li",[e._v("Update Cradle version from "),n("code",{pre:!0},[e._v("2.21.0")]),e._v(" to "),n("code",{pre:!0},[e._v("3.1.1")]),e._v(". "),n("strong",[e._v("Note, that the new Cradle version is not compatible with a previous version.")]),n("strong",[e._v("The data migration is required in order to keep the current data and migrate to new Cradle version")])])]),n("h2",{attrs:{id:"360"}},[n("a",{attrs:{href:"#360","aria-hidden":"true"}},[e._v("#")]),e._v("3.6.0")]),n("ul",[n("li",[e._v("Update common version from "),n("code",{pre:!0},[e._v("3.31.6")]),e._v(" to "),n("code",{pre:!0},[e._v("3.35.0")])]),n("li",[e._v("Update Cradle version from "),n("code",{pre:!0},[e._v("2.20.2")]),e._v(" to "),n("code",{pre:!0},[e._v("2.21.0")])]),n("li",[e._v("Added more detail into logs")]),n("li",[e._v("Added checking for timestamp inside batch and between batches")])]),n("h2",{attrs:{id:"350"}},[n("a",{attrs:{href:"#350","aria-hidden":"true"}},[e._v("#")]),e._v("3.5.0")]),n("ul",[n("li",[e._v("Update common version from "),n("code",{pre:!0},[e._v("3.30.0")]),e._v(" to "),n("code",{pre:!0},[e._v("3.31.6")])]),n("li",[e._v("Update Cradle version from "),n("code",{pre:!0},[e._v("2.20.0")]),e._v(" to "),n("code",{pre:!0},[e._v("2.20.2")])])]),n("h2",{attrs:{id:"341"}},[n("a",{attrs:{href:"#341","aria-hidden":"true"}},[e._v("#")]),e._v("3.4.1")]),n("ul",[n("li",[e._v("Added util methods from store-common")]),n("li",[e._v("Removed dependency to store-common")])]),n("h2",{attrs:{id:"340"}},[n("a",{attrs:{href:"#340","aria-hidden":"true"}},[e._v("#")]),e._v("3.4.0")]),n("ul",[n("li",[e._v("Update common version from "),n("code",{pre:!0},[e._v("3.18.0")]),e._v(" to "),n("code",{pre:!0},[e._v("3.29.0")])]),n("li",[e._v("Update store-common version from "),n("code",{pre:!0},[e._v("3.1.0")]),e._v(" to "),n("code",{pre:!0},[e._v("3.2.0")])])]),n("h2",{attrs:{id:"330"}},[n("a",{attrs:{href:"#330","aria-hidden":"true"}},[e._v("#")]),e._v("3.3.0")]),n("h3",{attrs:{id:"changed"}},[n("a",{attrs:{href:"#changed","aria-hidden":"true"}},[e._v("#")]),e._v("Changed:")]),n("ul",[n("li",[e._v("Disable waiting for connection recovery when closing the "),n("code",{pre:!0},[e._v("SubscribeMonitor")])]),n("li",[e._v("Update Cradle version from "),n("code",{pre:!0},[e._v("2.9.1")]),e._v(" to "),n("code",{pre:!0},[e._v("2.13.0")])]),n("li",[e._v("Rework logging for incoming and outgoing messages")]),n("li",[e._v("Resets embedded log4j configuration before configuring it from a file")])]),n("h2",{attrs:{id:"310"}},[n("a",{attrs:{href:"#310","aria-hidden":"true"}},[e._v("#")]),e._v("3.1.0")]),n("ul",[n("li",[e._v("Compressed metadata for events")]),n("li",[e._v("Async API for storing messages")])])])}),[],!1,null,null,null);"function"==typeof d&&d(u),"function"==typeof m&&m(u);t.default=u.exports},UQSp:function(e,t,n){"use strict";t.a={name:"VueRemarkRoot",render:function(e){return e("div",null,this.$slots.default)}}}}]);