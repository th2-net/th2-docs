(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{Ef5H:function(t,s,a){"use strict";a.r(s);var n=a("7uw+"),e=a("UQSp"),o=a("oCYn");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}o.default.config.optionMergeStrategies;var c={VueRemarkRoot:e.a},p=function(t){var s=t.options.components=t.options.components||{},a=t.options.computed=t.options.computed||{};Object.keys(c).forEach((function(t){"object"===i(c[t])&&"function"==typeof c[t].render||"function"==typeof c[t]&&"function"==typeof c[t].options.render?s[t]=c[t]:a[t]=function(){return c[t]}}))},_=o.default.config.optionMergeStrategies,v="__vueRemarkFrontMatter",l={excerpt:null,weight:10,title:"Configuration"};var r=function(t){t.options[v]&&(t.options[v]=l),o.default.util.defineReactive(t.options,v,l),t.options.computed=_.computed({$frontmatter:function(){return t.options[v]}},t.options.computed)},u=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("VueRemarkRoot",[a("h1",{attrs:{id:"configuration"}},[a("a",{attrs:{href:"#configuration","aria-hidden":"true"}},[t._v("#")]),t._v("Configuration")]),a("h2",{attrs:{id:"configuration-parameters"}},[a("a",{attrs:{href:"#configuration-parameters","aria-hidden":"true"}},[t._v("#")]),t._v("Configuration parameters")]),a("p",[t._v("Config file includes the following parameters:")]),a("ul",[a("li",[a("p",[a("code",{pre:!0},[t._v("apiVersion")]),t._v(" - API Kubernetes version used to create an object, the only available value - "),a("code",{pre:!0},[t._v("th2.exactpro.com/v1")]),t._v(".")])]),a("li",[a("p",[a("code",{pre:!0},[t._v("kind")]),t._v("- kind of the created object, possible values - "),a("code",{pre:!0},[t._v("Th2Box")]),t._v(", "),a("code",{pre:!0},[t._v("Th2CoreBox")]),t._v(", "),a("code",{pre:!0},[t._v("Th2Estore")]),t._v(", "),a("code",{pre:!0},[t._v("Th2Mstore")]),t._v(", "),a("code",{pre:!0},[t._v("Th2Dictionary")]),t._v(".")])]),a("li",[a("p",[a("code",{pre:!0},[t._v("metadata")]),t._v(" (name, UID and optional field namespace) - should be equal to the file name without extension.")])]),a("li",[a("p",[a("code",{pre:!0},[t._v("spec")]),t._v(" - required object configuration. This seciton contains "),a("code",{pre:!0},[t._v("image-name")]),t._v(" and "),a("code",{pre:!0},[t._v("image-version")]),t._v(" (including versions), "),a("code",{pre:!0},[t._v("type")]),t._v(", "),a("code",{pre:!0},[t._v("custom-config")]),t._v(" (component-specific set of parameters), "),a("code",{pre:!0},[t._v("pins")]),t._v(" (to communicate with other boxes).")])]),a("li",[a("p",[a("code",{pre:!0},[t._v("extended-settings: service")]),t._v(" - here we specify whether the object is available for other components, envVariables (environment variables for pod deployment), resources (amount of resources available for a Pod), etc.")])])]),a("p",[t._v("The "),a("strong",[t._v("codec")]),t._v(" settings can be specified in "),a("code",{pre:!0},[t._v("codecSettings")]),t._v(" field of "),a("code",{pre:!0},[t._v("custom-config")]),t._v(".")]),a("p",[t._v("For example:")]),a("div",{staticClass:"remark-highlight"},[a("pre",{staticClass:"language-yaml"},[a("code",{staticClass:"language-yaml"},[a("span",{staticClass:"token key atrule"},[t._v("apiVersion")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" th2.exactpro.com/v1\n"),a("span",{staticClass:"token key atrule"},[t._v("kind")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" Th2Box\n"),a("span",{staticClass:"token key atrule"},[t._v("metadata")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n  "),a("span",{staticClass:"token key atrule"},[t._v("name")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" codec\n"),a("span",{staticClass:"token key atrule"},[t._v("spec")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n  "),a("span",{staticClass:"token key atrule"},[t._v("custom-config")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n    "),a("span",{staticClass:"token key atrule"},[t._v("codecSettings")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n      "),a("span",{staticClass:"token key atrule"},[t._v("messageTypeDetection")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" BY_INNER_FIELD\n      "),a("span",{staticClass:"token key atrule"},[t._v("messageTypeField")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token string"},[t._v('"messageType"')]),t._v("\n      "),a("span",{staticClass:"token key atrule"},[t._v("rejectUnexpectedFields")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token boolean important"},[t._v("true")]),t._v("\n      "),a("span",{staticClass:"token key atrule"},[t._v("treatSimpleValuesAsStrings")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token boolean important"},[t._v("false")]),t._v("\n")])]),a("copy-code-btn")],1),a("h3",{attrs:{id:"required-pins-and-links"}},[a("a",{attrs:{href:"#required-pins-and-links","aria-hidden":"true"}},[t._v("#")]),t._v("Required pins and links")]),a("p",[t._v("The "),a("strong",[t._v("codec")]),t._v(" has four types of pins: stream encode, stream decode, general encode, general decode.")]),a("ul",[a("li",[a("p",[a("em",[t._v("stream encode / decode")]),t._v(" pins are used for all testing activities performed with th2; "),a("strong",[t._v("act")]),t._v(", "),a("strong",[t._v("conn")]),t._v(", "),a("strong",[t._v("sim")]),t._v(", "),a("strong",[t._v("recon")]),t._v(", "),a("strong",[t._v("bookchecker")]),t._v(" microservices interact with "),a("strong",[t._v("codec")]),t._v(" through the "),a("em",[t._v("stream encode / decode")]),t._v(" pins.")])]),a("li",[a("p",[a("em",[t._v("general encode / decode")]),t._v(" pins work on demand; those pins are mainly used for the th2 report UI: in order to show messages stored in Cassandra to the end user, "),a("strong",[t._v("report-data-viewer")]),t._v(" requests these messages from "),a("strong",[t._v("rpt-data-provider")]),t._v(" via "),a("strong",[t._v("codec")]),t._v(".")])])]),a("p",[t._v("Codec never mixes messages from the "),a("em",[t._v("stream")]),t._v(" and the "),a("em",[t._v("general")]),t._v(" pins.")]),a("notice",{attrs:{info:""}},[a("p",[t._v("SEE ALSO: "),a("a",{attrs:{href:"/deploy/infrastructure/th2-infra-schema/pins/#stream-and-general-codec-pins"}},[t._v("stream and general pins description")])])]),a("p",[t._v("Pins are a part of the main th2 concept.\nThey describe what are the inputs and outputs of a box.\nYou can read more about them "),a("a",{attrs:{href:"/deploy/infrastructure/th2-infra-schema/pins/"}},[t._v("here")]),t._v(".")]),a("p",[t._v("Every "),a("strong",[t._v("codec")]),t._v(" operation is associated with 2 pins - "),a("code",{pre:!0},[t._v("subscribe")]),t._v(" and "),a("code",{pre:!0},[t._v("publish")]),t._v(".\nThe first one is used to receive messages to decode/encode, while the second one is used to send decoded/encoded messages further.")]),a("p",[a("strong",[t._v("Typical codec has the following pins")]),t._v(":")]),a("ul",[a("li",[a("p",[t._v("Pin for the "),a("em",[t._v("stream encoding")]),t._v(" input: "),a("code",{pre:!0},[t._v("encoder_in")]),a("code",{pre:!0},[t._v("parsed")]),a("code",{pre:!0},[t._v("subscribe")])])]),a("li",[a("p",[t._v("Pin for the "),a("em",[t._v("stream encoding")]),t._v(" output: "),a("code",{pre:!0},[t._v("encoder_out")]),a("code",{pre:!0},[t._v("raw")]),a("code",{pre:!0},[t._v("publish")])])]),a("li",[a("p",[t._v("Pin for the "),a("em",[t._v("general encoding")]),t._v(" input: "),a("code",{pre:!0},[t._v("general_encoder_in")]),a("code",{pre:!0},[t._v("parsed")]),a("code",{pre:!0},[t._v("subscribe")])])]),a("li",[a("p",[t._v("Pin for the "),a("em",[t._v("general encoding")]),t._v(" output: "),a("code",{pre:!0},[t._v("general_encoder_out")]),a("code",{pre:!0},[t._v("raw")]),a("code",{pre:!0},[t._v("publish")])])]),a("li",[a("p",[t._v("Pin for the "),a("em",[t._v("stream decoding")]),t._v(" input: "),a("code",{pre:!0},[t._v("decoder_in")]),a("code",{pre:!0},[t._v("raw")]),a("code",{pre:!0},[t._v("subscribe")])])]),a("li",[a("p",[t._v("Pin for the "),a("em",[t._v("stream decoding")]),t._v(" output: "),a("code",{pre:!0},[t._v("decoder_out")]),a("code",{pre:!0},[t._v("parsed")]),a("code",{pre:!0},[t._v("publish")])])]),a("li",[a("p",[t._v("Pin for the "),a("em",[t._v("general decoding")]),t._v(" input: "),a("code",{pre:!0},[t._v("general_decoder_in")]),a("code",{pre:!0},[t._v("raw")]),a("code",{pre:!0},[t._v("subscribe")])])]),a("li",[a("p",[t._v("Pin for the "),a("em",[t._v("general decoding")]),t._v(" output: "),a("code",{pre:!0},[t._v("general_decoder_out")]),a("code",{pre:!0},[t._v("parsed")]),a("code",{pre:!0},[t._v("publish")])])])]),a("h3",{attrs:{id:"configuration-example"}},[a("a",{attrs:{href:"#configuration-example","aria-hidden":"true"}},[t._v("#")]),t._v("Configuration example")]),a("p",[t._v("API Kubernetes documentation contains specification format for any in-built Kubernetes object. th2-specific custom resources can be found in a Readme file of the component repository.")]),a("ul",[a("li",[a("p",[a("code",{pre:!0},[t._v("name")]),t._v(" in metadata must be filled in as a box name.")])]),a("li",[a("p",[a("code",{pre:!0},[t._v("image-name")]),t._v(" must contain a "),a("term",{attrs:{term:"link"}},[t._v("link")]),t._v(" to the image of "),a("strong",[t._v("codec")]),t._v(" on your project (preferably the last version). For one project you can have more than one "),a("strong",[t._v("codec")]),t._v(" for the same protocol.")],1)]),a("li",[a("p",[a("code",{pre:!0},[t._v("image-version")]),t._v(" should be filled with image tag (version of image in your projectâ€™s "),a("strong",[t._v("codec")]),t._v(").")])]),a("li",[a("p",[a("code",{pre:!0},[t._v("type")]),t._v(" specifies the type of component in th2.")])]),a("li",[a("p",[a("code",{pre:!0},[t._v("logFile")]),t._v(" - this field is not mandatory and is only filled out in case of the user requiring log information on a very detailed level.")])]),a("li",[a("p",[t._v("In "),a("code",{pre:!0},[t._v("extended-settings.resources")]),t._v(", the "),a("code",{pre:!0},[t._v("limits")]),t._v(" value must be greater than the value of "),a("code",{pre:!0},[t._v("requests")]),t._v(".")])]),a("li",[a("p",[a("code",{pre:!0},[t._v("service")]),t._v(" parameter: to make this component available to other th2 boxes, set "),a("code",{pre:!0},[t._v("service.enabled")]),t._v(" to "),a("code",{pre:!0},[t._v("true")]),t._v(".")])])]),a("p",[t._v("This configuration is a general way for deploying components in th2.\nIt contains box configuration, pins' descriptions and other common parameters for a box.")]),a("p",[t._v("You can configure a specific implementation of "),a("strong",[t._v("codec")]),t._v(" using the "),a("code",{pre:!0},[t._v("codecSettings")]),t._v(" section (Exception: for "),a("strong",[t._v("codec-sailfish-...")]),t._v(", use "),a("code",{pre:!0},[t._v("codecParameters")]),t._v(" instead of "),a("code",{pre:!0},[t._v("codecSettings")]),t._v(").")]),a("p",[t._v("Extended example of the "),a("strong",[t._v("codec")]),t._v(" configuration:")]),a("div",{staticClass:"remark-highlight"},[a("pre",{staticClass:"language-yaml"},[a("code",{staticClass:"language-yaml"},[a("span",{staticClass:"token key atrule"},[t._v("apiVersion")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" th2.exactpro.com/v1\n"),a("span",{staticClass:"token key atrule"},[t._v("kind")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" Th2Box\n"),a("span",{staticClass:"token key atrule"},[t._v("metadata")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n  "),a("span",{staticClass:"token key atrule"},[t._v("name")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" codec\n"),a("span",{staticClass:"token key atrule"},[t._v("spec")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n  "),a("span",{staticClass:"token key atrule"},[t._v("custom-config")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n    "),a("span",{staticClass:"token key atrule"},[t._v("codecSettings")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n      "),a("span",{staticClass:"token key atrule"},[t._v("parameter1")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" value\n      "),a("span",{staticClass:"token key atrule"},[t._v("parameter2")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n        "),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v(" value1\n        "),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v(" value2\n  "),a("span",{staticClass:"token key atrule"},[t._v("pins")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n    "),a("span",{staticClass:"token comment"},[t._v("# encoder")]),t._v("\n    "),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v(" "),a("span",{staticClass:"token key atrule"},[t._v("name")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" in_codec_encode\n      "),a("span",{staticClass:"token key atrule"},[t._v("connection-type")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" mq\n      "),a("span",{staticClass:"token key atrule"},[t._v("attributes")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("[")]),t._v(" "),a("span",{staticClass:"token string"},[t._v("'encoder_in'")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token string"},[t._v("'parsed'")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token string"},[t._v("'subscribe'")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("]")]),t._v("\n    "),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v(" "),a("span",{staticClass:"token key atrule"},[t._v("name")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" out_codec_encode\n      "),a("span",{staticClass:"token key atrule"},[t._v("connection-type")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" mq\n      "),a("span",{staticClass:"token key atrule"},[t._v("attributes")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("[")]),t._v(" "),a("span",{staticClass:"token string"},[t._v("'encoder_out'")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token string"},[t._v("'raw'")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token string"},[t._v("'publish'")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("]")]),t._v("\n    "),a("span",{staticClass:"token comment"},[t._v("# decoder")]),t._v("\n    "),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v(" "),a("span",{staticClass:"token key atrule"},[t._v("name")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" in_codec_decode\n      "),a("span",{staticClass:"token key atrule"},[t._v("connection-type")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" mq\n      "),a("span",{staticClass:"token key atrule"},[t._v("attributes")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("[")]),a("span",{staticClass:"token string"},[t._v("'decoder_in'")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token string"},[t._v("'raw'")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token string"},[t._v("'subscribe'")]),a("span",{staticClass:"token punctuation"},[t._v("]")]),t._v("\n    "),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v(" "),a("span",{staticClass:"token key atrule"},[t._v("name")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" out_codec_decode\n      "),a("span",{staticClass:"token key atrule"},[t._v("connection-type")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" mq\n      "),a("span",{staticClass:"token key atrule"},[t._v("attributes")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("[")]),a("span",{staticClass:"token string"},[t._v("'decoder_out'")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token string"},[t._v("'parsed'")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token string"},[t._v("'publish'")]),a("span",{staticClass:"token punctuation"},[t._v("]")]),t._v("\n    "),a("span",{staticClass:"token comment"},[t._v("# encoder general (technical)")]),t._v("\n    "),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v(" "),a("span",{staticClass:"token key atrule"},[t._v("name")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" in_codec_general_encode\n      "),a("span",{staticClass:"token key atrule"},[t._v("connection-type")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" mq\n      "),a("span",{staticClass:"token key atrule"},[t._v("attributes")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("[")]),a("span",{staticClass:"token string"},[t._v("'general_encoder_in'")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token string"},[t._v("'parsed'")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token string"},[t._v("'subscribe'")]),a("span",{staticClass:"token punctuation"},[t._v("]")]),t._v("\n    "),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v(" "),a("span",{staticClass:"token key atrule"},[t._v("name")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" out_codec_general_encode\n      "),a("span",{staticClass:"token key atrule"},[t._v("connection-type")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" mq\n      "),a("span",{staticClass:"token key atrule"},[t._v("attributes")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("[")]),a("span",{staticClass:"token string"},[t._v("'general_encoder_out'")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token string"},[t._v("'raw'")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token string"},[t._v("'publish'")]),a("span",{staticClass:"token punctuation"},[t._v("]")]),t._v("\n    "),a("span",{staticClass:"token comment"},[t._v("# decoder general (technical)")]),t._v("\n    "),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v(" "),a("span",{staticClass:"token key atrule"},[t._v("name")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" in_codec_general_decode\n      "),a("span",{staticClass:"token key atrule"},[t._v("connection-type")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" mq\n      "),a("span",{staticClass:"token key atrule"},[t._v("attributes")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("[")]),a("span",{staticClass:"token string"},[t._v("'general_decoder_in'")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token string"},[t._v("'raw'")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token string"},[t._v("'subscribe'")]),a("span",{staticClass:"token punctuation"},[t._v("]")]),t._v("\n    "),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v(" "),a("span",{staticClass:"token key atrule"},[t._v("name")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" out_codec_general_decode\n      "),a("span",{staticClass:"token key atrule"},[t._v("connection-type")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" mq\n      "),a("span",{staticClass:"token key atrule"},[t._v("attributes")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("[")]),a("span",{staticClass:"token string"},[t._v("'general_decoder_out'")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token string"},[t._v("'parsed'")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token string"},[t._v("'publish'")]),a("span",{staticClass:"token punctuation"},[t._v("]")]),t._v("\n")])]),a("copy-code-btn")],1),a("h2",{attrs:{id:"codec-related-links"}},[a("a",{attrs:{href:"#codec-related-links","aria-hidden":"true"}},[t._v("#")]),t._v("Codec-related links")]),a("p",[t._v("Schema API allows configuring routing streams of the messages via links between the connections and the filters on pins.\nLet's consider some examples of routing in a "),a("strong",[t._v("codec")]),t._v(" box.")]),a("h3",{attrs:{id:"split-on-publish-pins"}},[a("a",{attrs:{href:"#split-on-publish-pins","aria-hidden":"true"}},[t._v("#")]),t._v("Split on 'publish' pins")]),a("p",[t._v("To split a big source data stream into different pins by session alias, consider declaring multiple pins with attributes "),a("code",{pre:!0},[t._v("['decoder_out', 'parsed', 'publish']")]),t._v(" and filters instead of a common pin or in addition to it.\nEvery decoded message will be directed to all declared pins and will be sent to MQ only if it passes the filter.")]),a("div",{staticClass:"remark-highlight"},[a("pre",{staticClass:"language-yaml"},[a("code",{staticClass:"language-yaml"},[a("span",{staticClass:"token key atrule"},[t._v("apiVersion")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" th2.exactpro.com/v1\n"),a("span",{staticClass:"token key atrule"},[t._v("kind")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" Th2Box\n"),a("span",{staticClass:"token key atrule"},[t._v("metadata")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n  "),a("span",{staticClass:"token key atrule"},[t._v("name")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" codec\n"),a("span",{staticClass:"token key atrule"},[t._v("spec")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n  "),a("span",{staticClass:"token key atrule"},[t._v("pins")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n    "),a("span",{staticClass:"token comment"},[t._v("# decoder")]),t._v("\n    "),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v(" "),a("span",{staticClass:"token key atrule"},[t._v("name")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" out_codec_decode_first_session_alias\n      "),a("span",{staticClass:"token key atrule"},[t._v("connection-type")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" mq\n      "),a("span",{staticClass:"token key atrule"},[t._v("attributes")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("[")]),a("span",{staticClass:"token string"},[t._v("'decoder_out'")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token string"},[t._v("'parsed'")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token string"},[t._v("'publish'")]),a("span",{staticClass:"token punctuation"},[t._v("]")]),t._v("\n      "),a("span",{staticClass:"token key atrule"},[t._v("filters")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n        "),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v(" "),a("span",{staticClass:"token key atrule"},[t._v("metadata")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n            "),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v(" "),a("span",{staticClass:"token key atrule"},[t._v("field-name")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" session_alias\n              "),a("span",{staticClass:"token key atrule"},[t._v("expected-value")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" first_session_alias\n              "),a("span",{staticClass:"token key atrule"},[t._v("operation")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" EQUAL\n    "),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v(" "),a("span",{staticClass:"token key atrule"},[t._v("name")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" out_codec_decode_secon_session_alias\n      "),a("span",{staticClass:"token key atrule"},[t._v("connection-type")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" mq\n      "),a("span",{staticClass:"token key atrule"},[t._v("attributes")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("[")]),a("span",{staticClass:"token string"},[t._v("'decoder_out'")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token string"},[t._v("'parsed'")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token string"},[t._v("'publish'")]),a("span",{staticClass:"token punctuation"},[t._v("]")]),t._v("\n      "),a("span",{staticClass:"token key atrule"},[t._v("filters")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n        "),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v(" "),a("span",{staticClass:"token key atrule"},[t._v("metadata")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n            "),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v(" "),a("span",{staticClass:"token key atrule"},[t._v("field-name")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" session_alias\n              "),a("span",{staticClass:"token key atrule"},[t._v("expected-value")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" second_session_alias\n              "),a("span",{staticClass:"token key atrule"},[t._v("operation")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" EQUAL\n")])]),a("copy-code-btn")],1),a("p",[t._v("The filtering can also be applied for pins with a "),a("code",{pre:!0},[t._v("subscribe")]),t._v(" attribute.")]),a("h2",{attrs:{id:"links-config"}},[a("a",{attrs:{href:"#links-config","aria-hidden":"true"}},[t._v("#")]),t._v("Links config")]),a("p",[t._v("The main link for a typical "),a("strong",[t._v("codec")]),t._v(" instance is a dictionary link.\nA linked dictionary serves as a reference for validations performed by a "),a("strong",[t._v("codec")]),t._v(" instance.")]),a("p",[t._v("Example:")]),a("div",{staticClass:"remark-highlight"},[a("pre",{staticClass:"language-yaml"},[a("code",{staticClass:"language-yaml"},[a("span",{staticClass:"token comment"},[t._v("##### dictionary-links.yml #####")]),t._v("\n"),a("span",{staticClass:"token key atrule"},[t._v("apiVersion")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" th2.exactpro.com/v1\n"),a("span",{staticClass:"token key atrule"},[t._v("kind")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" Th2Link\n"),a("span",{staticClass:"token key atrule"},[t._v("metadata")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n  "),a("span",{staticClass:"token key atrule"},[t._v("name")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" dictionary"),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("links\n"),a("span",{staticClass:"token key atrule"},[t._v("spec")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n  "),a("span",{staticClass:"token key atrule"},[t._v("dictionaries-relation")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n  "),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v(" "),a("span",{staticClass:"token key atrule"},[t._v("name")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" codec"),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("fix"),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("sell"),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("dictionary\n    "),a("span",{staticClass:"token key atrule"},[t._v("box")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" codec"),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("fix"),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("sell\n    "),a("span",{staticClass:"token key atrule"},[t._v("dictionary")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n      "),a("span",{staticClass:"token key atrule"},[t._v("name")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" fix"),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("sell\n      "),a("span",{staticClass:"token key atrule"},[t._v("type")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" MAIN\n")])]),a("copy-code-btn")],1),a("h3",{attrs:{id:"connectivity-links"}},[a("a",{attrs:{href:"#connectivity-links","aria-hidden":"true"}},[t._v("#")]),t._v("Connectivity links")]),a("p",[t._v("Functionally, "),a("strong",[t._v("codec")]),t._v(" is a regular th2 box that communicates with other boxes via pins and links.\nTo configure the connections, use a template on the "),a("a",{attrs:{href:"/deploy/infrastructure/th2-infra-schema/links/#boxes-links"}},[t._v("Links")]),t._v(" page.")]),a("h3",{attrs:{id:"report-data-provider-link-s"}},[a("a",{attrs:{href:"#report-data-provider-link-s","aria-hidden":"true"}},[t._v("#")]),t._v("Report Data Provider link(-s)")]),a("p",[t._v("For messages passing through "),a("strong",[t._v("codec")]),t._v(" to be displayed in Report UI, "),a("strong",[t._v("codec")]),t._v(" should be linked to "),a("strong",[t._v("rpt-data-provider")]),t._v(" in the following way:")]),a("p",[t._v("Dedicated to desired "),a("strong",[t._v("codec")]),t._v(", "),a("strong",[t._v("rpt-data-provider")]),t._v(" pin should be linked to "),a("code",{pre:!0},[t._v("in_codec_general_decode")]),a("strong",[t._v("codec")]),t._v(" pin.")]),a("p",[a("code",{pre:!0},[t._v("out_codec_general_decode")]),a("strong",[t._v("codec")]),t._v(" pin should be linked to "),a("strong",[t._v("rpt-data-provider")]),t._v(" pre-configured dedicated pin for particular "),a("strong",[t._v("codec")]),t._v(".")]),a("div",{staticClass:"remark-highlight"},[a("pre",{staticClass:"language-yaml"},[a("code",{staticClass:"language-yaml"},[a("span",{staticClass:"token comment"},[t._v("##### from-codec-links.yml #####")]),t._v("\n"),a("span",{staticClass:"token key atrule"},[t._v("apiVersion")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" th2.exactpro.com/v1\n"),a("span",{staticClass:"token key atrule"},[t._v("kind")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" Th2Link\n"),a("span",{staticClass:"token key atrule"},[t._v("metadata")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n  "),a("span",{staticClass:"token key atrule"},[t._v("name")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" from"),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("codec"),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("links\n"),a("span",{staticClass:"token key atrule"},[t._v("spec")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n  "),a("span",{staticClass:"token key atrule"},[t._v("boxes-relation")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n    "),a("span",{staticClass:"token key atrule"},[t._v("router-mq")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n    "),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v(" "),a("span",{staticClass:"token key atrule"},[t._v("name")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" provider"),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("to"),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("codec"),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("fix"),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("sell\n      "),a("span",{staticClass:"token key atrule"},[t._v("from")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n        "),a("span",{staticClass:"token key atrule"},[t._v("box")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" rpt"),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("data"),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("provider\n        "),a("span",{staticClass:"token key atrule"},[t._v("pin")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" to_codec"),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("fix"),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("sell\n      "),a("span",{staticClass:"token key atrule"},[t._v("to")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n        "),a("span",{staticClass:"token key atrule"},[t._v("box")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" codec"),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("fix"),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("sell\n        "),a("span",{staticClass:"token key atrule"},[t._v("pin")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" in_codec_general_decode\n    "),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v(" "),a("span",{staticClass:"token key atrule"},[t._v("name")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" codec"),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("fix"),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("sell"),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("to"),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("provider\n      "),a("span",{staticClass:"token key atrule"},[t._v("from")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n        "),a("span",{staticClass:"token key atrule"},[t._v("box")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" codec"),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("fix"),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("sell\n        "),a("span",{staticClass:"token key atrule"},[t._v("pin")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" out_codec_general_decode\n      "),a("span",{staticClass:"token key atrule"},[t._v("to")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n        "),a("span",{staticClass:"token key atrule"},[t._v("box")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" rpt"),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("data"),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("provider\n        "),a("span",{staticClass:"token key atrule"},[t._v("pin")]),a("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" from_codec"),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("fix"),a("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("sell\n")])]),a("copy-code-btn")],1)],1)}),[],!1,null,null,null);"function"==typeof p&&p(u),"function"==typeof r&&r(u);s.default=u.exports},UQSp:function(t,s,a){"use strict";s.a={name:"VueRemarkRoot",render:function(t){return t("div",null,this.$slots.default)}}}}]);