(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"2x+z":function(t,e){t.exports={type:"image",mimeType:"image/png",src:"/assets/static/gh-token-permissions.8560fc9.64f5e77db2b592a63b1d6359d11c39a4.png",size:{width:846,height:528},sizes:"(max-width: 846px) 100vw, 846px",srcset:["/assets/static/gh-token-permissions.82a2fbd.64f5e77db2b592a63b1d6359d11c39a4.png 480w","/assets/static/gh-token-permissions.8560fc9.64f5e77db2b592a63b1d6359d11c39a4.png 846w"],dataUri:"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 846 528' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-4f17e4859d66aa9f3a4d9ef277a9fe8c'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-4f17e4859d66aa9f3a4d9ef277a9fe8c)' width='846' height='528' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAoCAIAAADBrGu%2bAAAACXBIWXMAAAsSAAALEgHS3X78AAAJ2UlEQVRYw71Z2XIbyRHcB69XKxD33Pd9XxgM7oMAQUkrKqwNvzj87h/w/z85uxuEKZDQriQsIzo6ehqDwXRVVmZV4aduX8Rod3nDCtKsdv3EsEIM20lMO%2bwPpd7gyeifXYqndbf/bAz%2bv/jihuNavMr4qUtf4qbDOX52uH/YbA5FtZwvd4fD59l82%2bnxrQ6H%2babLtbscbiNzl1xifbxsD7HodPl2Z9gmt5G5g9HjsENmskMG1h16A%2bZrHoANXtRF2RRlSxB1WbENM8ClZUWq5kiKZRi%2bqrma7mu6q2iebmDh6SaZLSfGQpAdScsEORCVWJBDXvZ42Ze0hJfILKmppKW85GGIasRL7pUPAAhZdrxY7tfrd2U5a5rNenUYT5ajajGq5nkxnU7XTbNKk6Ysp%2bNmg3UzXk2n2yxv1pv7yXTth7WX/hZkH013YQd7K9g40R6XlndrBWs//einHwxnbofbsPiMmYLqqh7o9MW//fzmbavXanMtoIJgQGj3eMzdvoAT0kuhQ24%2bXjJotSiECHg6g84jWtoMQhQ2FFrko14fj%2bJ7fR5zfyj/4Dg/ALbeff5PmM013QEwcDmg4yuPGHCyrDqKaguSIau2TBampNjAIdaiBECa2CEfKeSj3kB%2bMqQfGQNOOT9AbyD%2b49//Leq72917QKLVHsDMNzSCL3pwIJp25LqJ4yVhVHpBjmAIwtLx0jgZYTNOxriM4hE%2btZ24S5x5Hei/cABs/fxLK4hS242GggazKapDolPULz0FluAEnRM0fHfAqZyowxW8oPOiMeTVI%2bQo0hjkrvX2Fw8Ae9fjaZbVdbOeL29Ho8Vme4iTipIj3/7SFXghvH0QFlFcwbq2G4dBRSztxlFcYzEYSuyle9d77z88AO8FEDK/T0HWHypDXuNFjRc0ABqmPbMiwyJmGg8K/QpiQ%2bnTBfNM9y94%2b5cPMOQU8EkzmRdF00y30/kmL%2bf7%2b4fVaj%2bf79bbQ5qO4KIT/T16oIwS4gH4ISsazLgM48q0YzCs52f4peuC52seAE4QAJrhwoqQLY5XOV7jqOFfBDHiHtDHIIbnFECfOOHoOhXee10P8Mrb9nAyXYzHi2a8v989ZGkzme1Wix3ItNM7fwTzQBhVIBzXy4KogMZZVhwldZyOY7gC5BMXyKa6rxYDMLNpB0gWgBMIFmMVKhnCJRZiiOpRWehQMWEhQXfIoj%2bQX80D6tub4XyxHo1mk9ntdvd%2bXK92uw9RUiI2nj/i6IF4FKc1ZZ5RksH2NWzvuAn287xJ0nEYFoxSX8kDhunJqjWggAaNMMXFG5yk%2b8wDQ0o%2bGEAgxb1KuYjyEq9Ccdmnr%2baBwXqzm83X5Wg%2bm243m3dVOZnOb9frQxBkTyno6AFRL6oppABcBEt7fpFlY8gwAiOKiCa4Xp4kiISy/1IUXf8AVDXh6yOyQSOSbA4FYtTBH6RWEkM/TP4kU2LekE9l0I8ncKeBt30OIdVxI0WzYVfdDFCgAULdY/J0MZnDPUTsJAOEy2oJ7JBsQtAprlSeVheP0PorD4DdohzlRXN//%2bnDh88fPv6%2b3d4/kiBLaZ4PEQSKaiErJrYdIXWDivkBwVKa1sASoAWSzYtJnNRIWhFjZzTw3eOFdBpnandJ%2bgWsIxhYxUju7gq9x0zhbJCsgSKHBTQtKgSkqE8uH1%2b0L5xKZ8gfHdKLz/yTg6DjOQuFUWaYvu0mrp%2bipAQbAkigSJaQvpiXQyhgWoBHpJUAGbKFEpQgR3XIIJcoFUhdivIASS4WmIGxK9cD2IrizA/y1eoemc9u/3G7ebc/PHz69E%2bUxWcUdBo4XpLWABKKASRC4J%2bEggdFs%2bfngFPgZ6gZ/KhMkprmqkkKnU5qGKhFSn7hmjoAwbLsQFUtRCRsJiqWojgwG2z2Qk4GIHKKKJPUH9UWQp8jqasuiAZdGIjsAa9gBpWRyJYMVi2wyGbBfULCdQ6AV4yTPAzzKVKg1d3u8LBc7u/2D5vNPZLqswPgcshDiVEPjEj4RhUEIaXqW1Yz10tdPw8gBX4GKcACmSluS7MGMY017kmSsePEnb5wRR0QWzSC37zt/drqswVmeOYCi0us7KRdI1r1035RtyeitGjTQowWQxxb0Nqfh%2btYx4CRyRV1QIH5kU6DCpHV2E4EWMOoXpBZz1t0j8KkaK5uhaR3JFuq4SoaDVzFVnVXlG3SODI84FA1PLKgn2o6Fi5moIjR0dWCOAhTZMUI393db7v9%2b7vDp%2bXy7vPv/5rNNr2XHI0HkTQurXFIWrwjgsdpPoYOBkFhWJEfQAoKwAmxC6Sl2RhYcrwMugEz4ZBnynAFCOGJf3/TwXjT6gE/AA/DxiU%2b7lDdoAhh7UeedoT4xx2effr0thOcjk2KgcAEpH9Bbf6sDuD7eYHSJKnqZV0vEGqQWBgJv32pi4Z9wwpNK1AN33Ji0KWqe9gBh%2bKLIErLiuAHAAlUhk%2bBIggLLk0rMgE83cUO3KWbIVAKRLHfOpUZ38xCthPgZybTbTWaoaJtJhvTDi8pABtAs0E7pLSnHUCz8E62k%2bDtDcM3zBDgQZEEnoU4aLqPB5J2qh3jBlw6Ljm27aY4AIzaOjmTJgHffAAQjh8kmu4oqosnwkKq6lx6BKVRDa9LunFUiTFQzYHpCd8TJbZZt5itcQ%2bCGDs4M7wt0gYelWeDNPMUk3b1LFlxcBt%2b%2butl0EUdgJDh1bN8UlWzcjSrimn/ovmBWsUPc9IUIgOoAHFlGtHgzPESm1g3DIIcJneDDIIAWsOmHxbYwQyPOSS%2bY9zv%2balFWhukvRcSSclx1Pa3HgC%2b8/zYpEgAjgFTQdIvmYFGtgprQXpJ10jUBNlg2Q7JqyUd5iQml0xFdwXaq5NIvm3QPj7xGMmIRJ1ljY//NvCn9fdACLMfxK4Xj5vNbHY7n%2b/LcgJKoY2TcybGzaiJQZq%2bn4Eowb9Ed70kgu6GpelEIUmNiAbTHcKqSK1hZqxhflK1kfZRSPjji16v/J06MCQlLPmr5k2r/8uvXTawpgw4ZDR1NnpDqXWUYQ66%2b8SEw06XBwWzzvsNTdqgWcdO46k19sh%2bVytoyqoGppvpZtysRvUclfF2/S4MilG90A2IzvPGlkQ4xCFEidwbaKZEGRI%2b1VyA3nES4NCyIx60faRj6enXr9yVMC3y8/V4hbqsrKbVaFFVcyAEiEJgvMinkmpT0vB0kiz4Eo0BsCdSBuAKYU3z6gwHeI3u9NubYRAkukn%2bC/ODTDc9100xYGCYuTd4TqMqRACvjuSZpN%2byqerkkqiB7uG07J%2bemx/I%2b7%2bZRqFlthNmxXQ0mjeT5aRZlzn4dJ7nzfN0GsHtkQgmsgXBAlRQwaCaA4TAhmChk7L%2bdX2h/wFhZ9pej59gkAAAAABJRU5ErkJggg==' /%3e%3c/svg%3e"}},"5Prm":function(t,e){t.exports={type:"image",mimeType:"image/png",src:"/assets/static/monitoring_namespace.22e0a96.8e744d6443690f47751bcbbb2f437c0d.png",size:{width:697,height:167},sizes:"(max-width: 697px) 100vw, 697px",srcset:["/assets/static/monitoring_namespace.22e0a96.8e744d6443690f47751bcbbb2f437c0d.png 697w"],dataUri:"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 697 167' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-8c58478f51a1de220f293f2fcc0c5d44'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-8c58478f51a1de220f293f2fcc0c5d44)' width='697' height='167' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAPCAYAAABUZ8lnAAAACXBIWXMAAAsSAAALEgHS3X78AAAE8UlEQVRIx81W2W4jRRT1zyAWiUce%2bQk%2bACEET7wRMmSQEBLiaXgYJIQEMzIiyySaMB5IMnI2nJBJPIkiExLCxDiL993utnuz2223D/eW3VbHcUKYGImSrl3V1XXq1LlLtWdzc3MymUz%2bEY1Gd2OxWGhYdhaNhtLJWKhaTIRy6XiI8Ae%2bx8/dc5e9N0zjPejMoa2trZCHD4//qNXawDyh53T8L1upVIKHPc8D27ab7Xbbvqm1CAho2/GSZb/1VdZ%2bdTRhv/l52g5GajZv02%2btVss2TXPgHLdhcOo3W3CETdFgezgkWACeuKmihIFmqy36k1sqXhlN4vWxJF7%2bKIHPfDI9bWH91w08efIE6%2bvrWF1dxdraGiYmJsT/xkZnjvu7u8IvrILAHWZz8OLxOIYuQMvugG9F6njj0xReGkngtVtJEkQTAsTiCdCe2N/fx8nJCSgFRf/w8FA853EgEMDOzk5PgGG3KwXgyRuZIN3ZYC6kY%2bRBGd%2btKYx8bYKWZYFS4xzZG/NymSPqBQH6Q639r2jjAuELcyxO%2b/qYl2G9CK9B7ZwA3cIg1M/n88jlclDlAmpKEeViHlka53JZ8dyZd/rOuFAonPMWpwMf2GxYNJ%2bHInXwpJKDlxuIl8lkBA/34TVNRSabRZnWMgZzY0zGydJzN8ZVHPk/nU5fLgBfDaqqiheehnV8v15BSWl0C3MnJ5vNZu%2bQ3OdwZWPivZztznOTKxVoagW/x03cC8hIlRuiHtCNId7ntXa338/BwUgTNtotFKoNeIlTMKKLsdMcDo4xLzdf9zMWgvtcby4IUCyVaVDHj7s1fDIr4duAgtFpiTa2hOcaXc8YhoF6vX4upFhd5xBtlwBWTYEvmMfYwyruUT34cKqMWInI2w1YXVLscQevwoJpmgsHwvP5agu3Zjqcbj%2bU8FOoBkMpI5XODAzxarXaO7S7FYvFywWQpDJUjYuXhKLSFNn2YLuOu4%2beY29nA/7FZXF9TU9PY2ZmBgsLC2I8NzcnQrG/aHEzDQUf3I/htNDx2ONdFZPPTMj5GI7Cf4mKPz4%2bjpWVFXQ4SOcE4FSqKwXM7mgYf9qJjLRkYWy2gsAvq/D7/VhaXhbruc%2bc5ufn4fV6sbS0BJ/Ph2AwiMXFRdDXHxRFQaPRGCxAuVyG3TRxx69RBMiYCup4zyvht6iB6EkYx3R1HR8fIxKJiKvr6OgIZ2dn2NvbEzVgkADNuoo7P2cwMqNg%2bpmO970lbJ9RSJoa/nx%2bJPAY5/T0tOc5twB8qyiU8wdJC%2b/eL9GVquM2Hf5Lvwq1UkLdNJFKpQQGO4FxDg4OxDXLY75mw%2bGw4Mh5z/gccUIA/i7u5pAQoFAoQpZKqCgGPp5M4p1v4ni8XSSFaqKY8ULHOIzYWE3OMcLqfbi4r5tKRUae8u4LXw5vfx3DD2t5tC0DulETOLzeweE04MOwl9zfAfF4kpTU8ShYFJzGplKQqxqalknpSNxIBMZy/h08HjM35xnjMU%2beSyQS8NBPqJsaYid%2bSZJlqEoVtqmQ9yhcKIRluUImX2octmyDWpMI8Du2qQo8rglcGDnX%2b3HYOxyFzneA0wxDJ3wZjVqHU4u4KcSR17hxBmG6jee5BnBjoT0UxiHejDa2eXOuvryZpuuiFjim6/9sXBjZc25zMHXduDYe4/AaXuvgcEroL8Dpqj04hf8GCJcnknd11GUAAAAASUVORK5CYII=' /%3e%3c/svg%3e"}},UQSp:function(t,e,a){"use strict";e.a={name:"VueRemarkRoot",render:function(t){return t("div",null,this.$slots.default)}}},pUdc:function(t,e){t.exports={type:"image",mimeType:"image/png",src:"/assets/static/service_namespace.b306fc5.11eb054103b1aa935daff46e01cb3412.png",size:{width:695,height:665},sizes:"(max-width: 695px) 100vw, 695px",srcset:["/assets/static/service_namespace.b306fc5.11eb054103b1aa935daff46e01cb3412.png 695w"],dataUri:"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 695 665' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-70fca57175975e898dbcf7124515baac'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-70fca57175975e898dbcf7124515baac)' width='695' height='665' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAA9CAYAAAAd1W/BAAAACXBIWXMAAAsSAAALEgHS3X78AAAQK0lEQVRo3s2b%2b29cRxXH86/AL4ifEBI/0L8ABBI/FAkkqEDlDUKoVBTRUrW8oS1VVVpKoa3aUPpI6SMNTtImqZPYTuwmmzpxnMSx4/ixXnvfu3fvPryP68N8ZvdsZq%2bvd93UabLS0Z25M/femTPf85zZXaOjoy8uLy9PXb169dTCwkLsRlAqsRjLp5bsdas%2b5vuxG/X9iG%2bdYs4TExN7dlGQG/yby4o8OdyUmbTcUr9kMjm3C25QCYKgubGxEewUNVtBwGvH56rB5%2b5fDj5x12Lw2fuWg9GZqr0/iPjt5HhcYq7MeWVlZWoXkKDSaZQPQ53nNnGWe81W%2b/6jBwry6XuW5TP3LsunfrEkD/2vaO425b3ho/Luu%2b%2bKgaGcO3dO3n//fTlz5ozs379fqtVq9z1R7/%2boP%2bbKNZFITHcZAFuu40Vb3jfrZ8vjczW57Tcrlgm3PRiXE3N1adUrMjS0Xw4dOiTT09OWAePj43L69Gk5ePCgtFqtvu%2b/IQzgZj6fl1wuJ5lMRkqlkpTLZVvnfrFYtNdsNivpdFqUX/0Qokx4b7oijwwV5N2pSueZ/gPku57nDXz/9ZIudg8DAMHly5ftinzwwQdidIOlqakpC01WaXJy0tZpr9Vq2%2bR2dL0zkB7SFY/H48jnjdR/1xgwNzcXA3JmxYN6vW65jwxWKpVu2fd9W%2bYedcoQKKEN0v6biPZyRYqeLyW//Q6IZ1ypazabUigUut%2bCfL/cret3wqTj0D7b6WvKdq5LS0vTu2ZnZ2Md2AUGDbK2tgZnLK2urto6YgDsEQ0lFRUVCfrqM245fF1cXJRGo2GZwKRdBjC4NjoCaTRbVhc0zbVprkHQrsO07V7D97SsCDAIbyOASrHoBUyKX6MZ2A93bKXV1hcvXpRjx45ZrX3p0iUZGRmRWCwmY2NjVkTcj0ZBW1c7lUpZ8VlfX9/EANAFc5aWlsUvpCWXSYqXS0k%2bmzTMW7OLoYsSVXbrUcRcjN8D868xQBFglE6QNxAM/xgo8ogCZKUhGMWKggAmVIh4biuLwTMwAIpigI8CLORkcrkl9%2b3JysNGecZzzZ3Q/NKZJ%2bO1DJifn%2b9FgF8qir8u8u/Rkhy7hC3u1WC6okwYJqhO0DoEp7UOxxVV22FAxbyrWa/K9Hxa7n%2b9KMMXKvLqeEn%2bbHwHzyvahYDxvJfV1oVRsWV1aaPOQoWtiDLAWLTNCKj4pWAxkZN7XyvIE4eKct9rOcsIO3HzMEhgtXn5iRMnLGERLly4YAkRQTwQC0TkypUrtmy43GWeywCFu8uActkwfaMmb46tyENDnpH9QPJ%2bU37%2bUl4uzSfk9PvjVvRwmk6dOiUmjrHWCRE8evSo/T5t3Dfz6mGAft9lQA8CpOEHrxxPyPMjZWurCpWW/PKVrNSbGz1IYGJ8HNLJfpifMiBKB7QZU5F0Ni93v%2bLJt57OyO2Pp%2bWpI/6O2T8sgYpADwLq1VIwcTEtdz6TlRdGPHnwjZz8%2brVc98FGo2m5xwTgOEjAagA7Vh8yzLQMOn/%2bPCZGzp49a%2bszMzO2Hz%2bguRUCrIk1YpVajUs8VZTnDq3InpFV64R5xYKBe8GKF7DnOoh4Tok6VgaxidQB%2bYIXtGqeHL1Ulzv/mZJ7Xs6KVw26zguDxZYCadxWHCYQABJAATKJiKhiRPZxaDCTlBmEy4CwDsCKoFP4Yf%2brFYPEwIhEq9L1Bz4sRfklHf/DTswsYK8VyOXyYd3ZMWNBV4aYKJ4gqwsTuOrktvPrhwAGiLzmrOtdkKZZkPVK0a4833CdL64gUifb0e4DicUw34r2A3jRjf4B3346oGy8xuRqQjy/JruPpuRALGv6ti0N6GMBECc1w5RBGu9Vb1S9TZe4z/uxEqbvZh2Ae4isXl1YlJXlBVlaXJAr81etLKujgfyECc%2bOmAF9MIjoS7zBykchADNYM0owmc7LH/b58thBdFFBdo8ZhlVLcujwEatPsAQnT560SDx%2b/LgltTaDfixypBWAAYtm0uViRs7OrMhSfFV8U75yZd6GrZgZTAwfxwTiFVJGyal5HET0gxHKgDACyhUj80FN/jeekCcO%2b0YvBEYPteRXr2alVNuZ0HhLPwAdgFz9N9aQX%2b4pygNvenJpDTXQlLPnpuSiUXRMAm2vdh/ablSoP2SwnyPUMo7QB5dT8r3ncvLiWEkePVCUu1/KWZFZNMxjpUEeihfkYXlAKfdBGEjFB6CNK/dZJJAXRkAPA1rrpWB4Mmm9roVUXY4bT/A3b2R3MgnR1wqoDiBirHoZ8/2afOPJhPzgmTVZyTUsY%2bJm4hpYwQRX9DR8Z5GYMBNHRLRMHxQ5uqJHB7iO0GsjCXnwzaKkik2Jzdfkp7tNFJjJyYQxe3hc2HdehCjgdSGPeF3II9kc/AM%2bRt5A%2b2Mq4T5iwwqpEtwqFsAcrqwkpGSCobqfsZTLpCRpTWvWmlU1rWHShE1nkl2fQRM9iCDMM9/ejABgQSzw270l%2bfJfk/LFh9dkbM4oqVbNTC5mJwI31R9As2oZuVLzxMRoUxOlGl8nxwC3MoMMWOMNwuE61GhZXaDh7EchJ0INqPcgACWYiC9b03JyKiFTs6tSKmatiTlzJmZXmRV3Oa55AeUw5K6Orpa7asgrE49yhNR5gTluUiZs3lynRpMrUfWwA%2bS02QSwEaNrCAAWCwaiyFYmuWJssbEEy3ELGaCD7CJfMATbq/b3wxIMUK9PERBOfmrCJCrHoAnTHU2JqQiwQhudyK0Nuw4czYBYLSg8WDfhMYjchIiLgPA7YRJ6BoLRuNvoE4iyxhUflQFGofaaQXVpa42gGwGurSXlwIED1vQdOXLEKjO069DQkDVBLhMGZGL7hsO0o0doQxegQzQbzTOalYaBtLn5SRUXl8JtobodjFHKDgIMAzyvIPsma3LXixl54PWczCUbllmmzT7oDhxZuh449guHmTjvbkN/w%2bYDQGEUwlxUujk/V%2bHRFq53rlYJWk9QEdColYIT0yn5/duenI%2bvy/7Jivzx7XyPHVcuAlF1bdERXBEftcUQOgOrAVwxg/RhAP2sAO%2b2voJhUj6bknrZRJF5ost0FwVKoAXSpKybsIXC97ROLGC%2bG%2b0HvHQsIQ/vL0l5PZArqYb85Pl0JyEiQhpZs8PIIZMiI8Rk1dFATPAB1BPDdCK3eIzc142WrcJhZcDaalzmV315ZSwvi0kTIgcNGxJjhRY63iB%2bBqKIOMBIEDWI%2bB5MiAyGSjYcLsjdL%2bfl9sfW5AsPrcq%2bM%2bWefICaM02IMCBWmTpXBgdT1PVk4oTM1BmwOilbOUKlUjsanTgfN0FQXl4Y9eV3bxVkxY63JTHzHQIfMtHDw8M2HgnnHK87GCIcLvtFARyjM1WZjte7OQHerUoMSDMA3c/TTBBXVhuPkJVh9QmWNDkZ1gFRDPA6DPjTnlk5PNVm/uHzFfn3qLejWeGeWEAZYBMi%2bd6ESCvYvBsMlOA6L1IPUHUDZRSZOhy0018hPigjRBzA751Ty/L9Z9Py2Due/Pj5jEzF27pitsNo0AWzEQXEDZQhciAMVKJvWBSQScJGUdI3GOJmd0PyBiZE%2bilBTcjkUnE5fC4vv38jJcPnMc04RlUbCKm%2bYdKgEceNOk4WCo527tMXZU2ZxYnSAT1WANvIA6pVbwTxbr6hkd9WSjCdyUrZM5HoekGqpZyt86wmOtVPcJOfGvi4ZW1z3XL8CKPQryHAKKhYR8sHUf6362cPuoYTklFXXXnEJawDFAH1umn3q1L02Smqdn0QtfswS/0Fx7ZbS%2bX2gRRt7rVnb1C3x0EAnFLuunk0l3iJRndR9UF9NVrk6mpuFwFAuuxlpFk1%2bqSU64aymohBASPrmFaULcoYxauioeYY0gy1IgiR6NkXcM8H8CAv4iVsiG43z7YT2tlFQDadkhOzdbs9NrnU7LjKG3bimD6Um06Q8eKeo%2bwYLwzRIzdYJFAR3hiJNIOEiOp/QygV1ehR%2bfXw/ah%2bUeGs65%2b71sW1AgcnFuWOv69Zlxxn7PR8bccY3fEkryHAmJSY%2bsd04nAXB5w2OnuC7hb3RqiuPnb4ftg3D9etzTfMDh%2bQ4BAFvz%2b%2bOis/fC4lR6ar8vUnkvLCiG8PVl24OGPNHkjVnJ96nKw2pg8UQCBCT7wgLrSpye7ZGYIBnQEE7MHnc6ShslLx8KHT3Z1XEMHV3Zd3d2ndMlf1v8NEP5gEEtxgyiZEOjrg4pWEfPvppHz%2bwRW5d09WMiXDwGbdToh3I%2bvAH0YwLu4rMyhzH2vDxGEAbTCAZzuWoRcB3QMSWTNIryGPDqXlzYm8PZmRMgMeHR2zITEhMLnAffv2WSIm4B4e3%2bHDh60s7t2719bR0sifEsqQSTIIVYguA1wdkM8kbV5yYm5d1orN7t6kTk4zwExes9O44EyW%2bzCHNvrpM%2bocsXAcB9qEgGrZDxZX8/LdZ/Py1ceT8oPnMrJ7tHenyFUo13GqrscR0oxPLwPaCCAp2rFU7e05zh2adpQbk1SIqwtOmUmSKqcdBqAosQ60sVBqcjt5hc0IkEY5eHt8VT55d1y%2b86%2bU/Gx3Ru54Km03KzKdUyEMWsNKPQChSpMyK6jtmB81a1EJkSgGaH%2bb9uZM0VqyK2p65b1cNUWn9TCFRVWvIMOgbzMDahU/uLiYk689mZWvPJqUO/6RlqfeM1rb9yxXNSUOZ1E4cJ4oj1XAtrobFbQhfwygnyu8SQcYBg5Kr/U7EBVVj2rTg5I9DCiwOVpIy5mrZbnnPwn5y1tJKVfrVimOjZ2wkyYKRM6BFprX1erhDIx6a65jRL2Tl9%2bEAFWM4WNv4a3u8JG46%2bmrOsAek3OtAJmXcslEhPWCbKzjT5P6znazwlxZVYWgHpPrR%2bHNC57RybqnTT/m37WkaFcHsC1pw9qKcUjaRATm5ui17CYh3XuDSF1gDUvdM8EfJ/UclVUGAAtsZy5fMCtnViqbs1cUnHsoQUnh5m6KDCJsMOZI44ObhYCew9JGWXUZoPkA91errXeDDcwQ2%2bQoOkxLlK%2b93d1hVwfcVAYoAjyvFJS8goxerss9L2fkkaG8rBaM7dxoGXlvmzU9LAmjVB%2bE/e1B%2bwLuEZlbigGNmh/EZtLywBtFOTlblZdOlOwpzZ4UmRmwpsSAM5NQu4vC6/cnh/BByVsOAdIqBy8OJ%2bRvh3ybC8QF/alxhtY7u0QMVtPiKg44FfjZlPEBwvnDfgy45RBQ9ktBIpmTHz2fk2/%2bPSlfemT12knRoA1hTWvjduJiMmkcIP0/QfivLlF/sbllEVA0OqBW8aRorNTeWFlGZjbH4OpNuY4NIqGx/nYmEhUL3CJK0AtQdtf8BA4pNLs5tvA%2b21ZuaDP0jJJmgPHJb00l2GgE9iQ22t0EIRDlVASp4gsHIqkt%2bruE5YBZbj7gZvsBpzsr1%2bKveqa8LQr37fdsVJsJS%2b31Zvw4IdP53%2bD5XSa2ntQdHw1gFLL94BzuuxX8%2b/W92T8jjjO7TOh6xAzKN0opZeQy83GSEYObQsaFT5kFLxmPduz/OPLyCBtniw4AAAAASUVORK5CYII=' /%3e%3c/svg%3e"}},zPPC:function(t,e,a){"use strict";a.r(e);var s=a("7uw+"),n=a("UQSp"),i=a("oCYn");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}i.default.config.optionMergeStrategies;var o={VueRemarkRoot:n.a},l=function(t){var e=t.options.components=t.options.components||{},a=t.options.computed=t.options.computed||{};Object.keys(o).forEach((function(t){"object"===r(o[t])&&"function"==typeof o[t].render||"function"==typeof o[t]&&"function"==typeof o[t].options.render?e[t]=o[t]:a[t]=function(){return o[t]}}))},c=i.default.config.optionMergeStrategies,p="__vueRemarkFrontMatter",v={excerpt:null,weight:2,image:"/img/getting-started/th2-env-schema/Demo-cluster-components-full-schema.drawio.png",continue_learning:[{title:"Use th2",href:"../create-th2-env"}],tokens_link:[{title:"Creating a personal access token",icon:"mdi-github",href:"https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token"}],monitoring_links:[{title:"Grafana",icon:"mdi-monitor-dashboard",icon_color:"#a87132",href:"https://grafana.com/oss/grafana/"},{title:"Loki",icon:"mdi-database",icon_color:"#a88f32",href:"https://grafana.com/oss/loki/"},{title:"Prometheus",icon:"mdi-database",icon_color:"#a87132",href:"https://grafana.com/oss/prometheus/"}],service_links:[{title:"kubernetes-dashboard",icon:"mdi-kubernetes",icon_color:"#3271a8",href:"https://kubernetes.io/docs/tasks/access-application-cluster/web-ui-dashboard/"},{title:"RabbitMQ",icon:"mdi-factory",icon_color:"#a87132",href:"https://www.rabbitmq.com/"},{title:"NGINX Ingress Controller",icon:"mdi-router",icon_color:"#4ea832",href:"https://kubernetes.github.io/ingress-nginx/"},{title:"Helm Operator",icon:"mdi-layers",icon_color:"#3285a8",href:"https://github.com/fluxcd/helm-operator"}],infra_links:[{title:"th2-infra-editor",icon:"mdi-monitor-edit",href:"https://github.com/th2-net/th2-infra-editor-v2"},{title:"th2-infra-operator",icon:"mdi-layers",href:"https://github.com/th2-net/th2-infra-operator"},{title:"th2-infra-mgr",icon:"mdi-radar",href:"https://github.com/th2-net/th2-infra-mgr"},{title:"th2-infra-repo",icon:"mdi-file-document-outline",href:"https://github.com/th2-net/infra-operator-tpl"}],title:"3. Deploy th2"};var u=function(t){t.options[p]&&(t.options[p]=v),i.default.util.defineReactive(t.options,p,v),t.options.computed=c.computed({$frontmatter:function(){return t.options[p]}},t.options.computed)},h=Object(s.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("VueRemarkRoot",[s("h1",{attrs:{id:"3-deploy-th2"}},[s("a",{attrs:{href:"#3-deploy-th2","aria-hidden":"true"}},[t._v("#")]),t._v("3. Deploy th2")]),s("p",[t._v("As all the environments are prepared, we can install th2.")]),s("h2",{attrs:{id:"prerequisites"}},[s("a",{attrs:{href:"#prerequisites","aria-hidden":"true"}},[t._v("#")]),t._v("Prerequisites")]),s("p",[t._v("Before you begin, please check that you have:")]),s("ul",[s("li",[t._v("fully functioning Kubernetes cluster suitable for your business needs (please refer to "),s("a",{attrs:{href:"../requirements"}},[t._v("technical requirements")]),t._v(");")]),s("li",[t._v("an operator box that meets "),s("a",{attrs:{href:"../requirements/hardware"}},[t._v("hardware")]),t._v(" and "),s("a",{attrs:{href:"../requirements/software"}},[t._v("software")]),t._v(" requirements;")]),s("li",[t._v("installed "),s("a",{attrs:{href:"https://cassandra.apache.org/",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("Apache Cassandra")]),t._v(" ("),s("a",{attrs:{href:"../requirements/hardware#apache-cassandra-cluster-hardware-requirements"}},[t._v("technical requirements")]),t._v(").")])]),s("p",[t._v("All th2 components are deployed via Helm charts by "),s("a",{attrs:{href:"https://helm.sh/",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("Helm")]),t._v(" and "),s("a",{attrs:{href:"https://docs.fluxcd.io/projects/helm-operator/en/stable/",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("Helm Operator")]),t._v(".")]),s("h2",{attrs:{id:"download-infra-values"}},[s("a",{attrs:{href:"#download-infra-values","aria-hidden":"true"}},[t._v("#")]),t._v("Download infra values")]),s("p",[t._v("Installation of th2-infra requires a Git repository for maintaining th2 infra-schema configuration. The information regarding this repository and its usage can be found in the guide further.")]),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/th2-net/th2-infra/tree/master/example-values",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("These example values")]),t._v(" can be used as a starter kit for th2 infra, we also recommend storing these values in a separate Git repository.")])]),s("p",[t._v("The first step of the th2 deployment process is copying th2-infra repository into your operator box:")]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-shell"},[s("code",{staticClass:"language-shell"},[s("span",{staticClass:"token function"},[t._v("git")]),t._v(" clone -b v1.7.3 https://github.com/th2-net/th2-infra.git\n")])]),s("copy-code-btn")],1),s("p",[t._v("Change the current directory:")]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-shell"},[s("code",{staticClass:"language-shell"},[s("span",{staticClass:"token builtin class-name"},[t._v("cd")]),t._v(" ./th2-infra/example-values\n")])]),s("copy-code-btn")],1),s("h2",{attrs:{id:"infrastructure-namespaces"}},[s("a",{attrs:{href:"#infrastructure-namespaces","aria-hidden":"true"}},[t._v("#")]),t._v("Infrastructure namespaces")]),s("p",[t._v("Inside the cluster separate namespaces can be created. Custom infra-schemas can have their namespaces.")]),s("notice",{attrs:{info:""}},[s("p",[t._v('The "infra-schema" part in the '),s("em",[t._v("infra-schema")]),t._v(" namespace is a placeholder to be replaced with a user-defined name of a custom infra-schema (corresponds to the name of the repository branch containing a particular infra-schema implementation).")])]),s("p",[t._v("Infrastructure components are split into two namespaces: "),s("em",[t._v("monitoring")]),t._v(" and "),s("em",[t._v("service")]),t._v(". These namespaces will be created below.")]),s("p",[t._v("The following components of monitoring stack are deployed into "),s("em",[t._v("monitoring")]),t._v(" namespace:")]),s("recommendations",{attrs:{items:t.$frontmatter.monitoring_links}}),s("p",[t._v("The "),s("em",[t._v("service")]),t._v(" namespace is used for infrastructure services:")]),s("recommendations",{attrs:{items:t.$frontmatter.service_links}}),t._v("\n  \nand for th2-infra components:\n"),s("recommendations",{attrs:{items:t.$frontmatter.infra_links}}),s("h3",{attrs:{id:"create-namespaces"}},[s("a",{attrs:{href:"#create-namespaces","aria-hidden":"true"}},[t._v("#")]),t._v("Create namespaces")]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-shell"},[s("code",{staticClass:"language-shell"},[t._v("kubectl create namespace monitoring\nkubectl create namespace "),s("span",{staticClass:"token function"},[t._v("service")]),t._v("\n")])]),s("copy-code-btn")],1),s("spoiler",{attrs:{title:"Output example"}},[s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-shell"},[s("code",{staticClass:"language-shell"},[t._v("$ kubectl create namespace monitoring\nnamespace/monitoring created\n$ kubectl create namespace "),s("span",{staticClass:"token function"},[t._v("service")]),t._v("\nnamespace/service created\n")])]),s("copy-code-btn")],1)]),s("p",[t._v("The following pictures describe "),s("em",[t._v("service")]),t._v(" and "),s("em",[t._v("monitoring")]),t._v(" namespaces:")]),s("p",[s("g-image",{attrs:{src:a("pUdc"),alt:"service_namespace"}})],1),s("p",[s("g-image",{attrs:{src:a("5Prm"),alt:"monitoring_namespace"}})],1),s("h2",{attrs:{id:"data-persistence"}},[s("a",{attrs:{href:"#data-persistence","aria-hidden":"true"}},[t._v("#")]),t._v("Data persistence")]),s("p",[t._v("Data persistence is required for the following components: Grafana, Prometheus, Loki, RabbitMQ and should be set up on this step.")]),s("notice",{attrs:{info:""}},[s("p",[t._v("Examples below use HostPath type of "),s("a",{attrs:{href:"https://kubernetes.io/docs/concepts/storage/persistent-volumes/",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("Persistent Volume(PV)")]),t._v(". \nPlease read the documentation to choose an appropriate PV type for your environment.")])]),s("ul",[s("li",[t._v("Create directories on the th2 node (the following command can require root permissions):")])]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-shell"},[s("code",{staticClass:"language-shell"},[s("span",{staticClass:"token function"},[t._v("mkdir")]),t._v(" /opt/grafana /opt/prometheus /opt/loki /opt/rabbitmq\n")])]),s("copy-code-btn")],1),s("ul",[s("li",[t._v("Set node name in "),s("code",{pre:!0},[t._v("pvs.yaml")]),t._v(".")]),s("li",[t._v("Create PVs and PVCs:")])]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-shell"},[s("code",{staticClass:"language-shell"},[t._v("kubectl apply -f ./pvs.yaml\nkubectl apply -f ./pvcs.yaml\n")])]),s("copy-code-btn")],1),s("h3",{attrs:{id:"pv-for-read-components"}},[s("a",{attrs:{href:"#pv-for-read-components","aria-hidden":"true"}},[t._v("#")]),t._v("PV for read components")]),s("p",[t._v("To include "),s("strong",[t._v("read")]),t._v(" components in your configuration, a dedicated PersistentVolume for "),s("strong",[t._v("read")]),t._v(" log directory needs to be set up.\nAdd a PersistentVolume mapped to the "),s("code",{pre:!0},[t._v("/opt/components")]),t._v(" directory.  Once an "),s("em",[t._v("infra-schema")]),t._v(" namespace is installed, create a PersistentVolumeClaim. ")]),s("p",[t._v("PV and PVC examples can be found in "),s("code",{pre:!0},[t._v("example-values/persistence/")]),t._v(".")]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-shell"},[s("code",{staticClass:"language-shell"},[s("span",{staticClass:"token function"},[t._v("mkdir")]),t._v(" /opt/components\n")])]),s("copy-code-btn")],1),s("ul",[s("li",[t._v("Set node name in "),s("code",{pre:!0},[t._v("persistence/pv.yaml")]),t._v(".")]),s("li",[t._v("Create PV:")])]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-shell"},[s("code",{staticClass:"language-shell"},[t._v("kubectl apply -f ./persistence/pv.yaml\n")])]),s("copy-code-btn")],1),s("h2",{attrs:{id:"monitoring-deployment"}},[s("a",{attrs:{href:"#monitoring-deployment","aria-hidden":"true"}},[t._v("#")]),t._v("Monitoring deployment")]),s("notice",{attrs:{note:""}},[s("p",[t._v("It's an optional step, but it provides an easier way to check the result of the installation. \nIn all installation commands we explicitly define namespaces to avoid possible mistakes.")])]),s("ul",[s("li",[t._v("Switch the namespace to "),s("em",[t._v("monitoring")]),t._v(":")])]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-shell"},[s("code",{staticClass:"language-shell"},[t._v("kubectl config set-context --current --namespace"),s("span",{staticClass:"token operator"},[t._v("=")]),t._v("monitoring\n")])]),s("copy-code-btn")],1),s("notice",{attrs:{note:""}},[s("p",[t._v("Grafana and Dashboard hostnames should be configured only if you have a DNS name. IP address configuration is not required. ")])]),s("ul",[s("li",[s("p",[t._v("Define Grafana and Dashboard hostnames (the name must be resolved from the tester boxes):")]),s("ul",[s("li",[t._v("in the "),s("a",{attrs:{href:"https://github.com/th2-net/th2-infra/blob/v1.7.3/example-values/service.values.yaml",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("service.values.yaml")]),t._v(" file:"),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-yaml"},[s("code",{staticClass:"language-yaml"},[s("span",{staticClass:"token key atrule"},[t._v("ingress")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n  "),s("span",{staticClass:"token key atrule"},[t._v("host")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" "),s("span",{staticClass:"token important"},[t._v("&host")]),t._v(" <th2_host_name"),s("span",{staticClass:"token punctuation"},[t._v(">")]),t._v("\n"),s("span",{staticClass:"token key atrule"},[t._v("kubernetes-dashboard")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n  "),s("span",{staticClass:"token key atrule"},[t._v("ingress")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n    "),s("span",{staticClass:"token key atrule"},[t._v("hosts")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" "),s("span",{staticClass:"token punctuation"},[t._v("[")]),s("span",{staticClass:"token important"},[t._v("*host")]),s("span",{staticClass:"token punctuation"},[t._v("]")]),t._v("\n")])]),s("copy-code-btn")],1)]),s("li",[t._v("in the "),s("a",{attrs:{href:"https://github.com/th2-net/th2-infra/blob/v1.7.3/example-values/prometheus-operator.values.yaml",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("prometheus-operator.values.yaml")]),t._v(" file:"),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-yaml"},[s("code",{staticClass:"language-yaml"},[s("span",{staticClass:"token key atrule"},[t._v("grafana")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n  "),s("span",{staticClass:"token key atrule"},[t._v("ingress")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n    "),s("span",{staticClass:"token key atrule"},[t._v("hosts")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n      "),s("span",{staticClass:"token punctuation"},[t._v("-")]),t._v(" <th2_host_name"),s("span",{staticClass:"token punctuation"},[t._v(">")]),t._v("\n")])]),s("copy-code-btn")],1)])])]),s("li",[s("p",[t._v("Deploy components:")])])]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-shell"},[s("code",{staticClass:"language-shell"},[t._v("helm repo "),s("span",{staticClass:"token function"},[t._v("add")]),t._v(" grafana https://grafana.github.io/helm-charts\nhelm repo "),s("span",{staticClass:"token function"},[t._v("add")]),t._v(" prometheus-community https://prometheus-community.github.io/helm-charts\nhelm "),s("span",{staticClass:"token function"},[t._v("install")]),t._v(" --version"),s("span",{staticClass:"token operator"},[t._v("=")]),s("span",{staticClass:"token number"},[t._v("2.4")]),t._v(".1 loki -n monitoring grafana/loki-stack -f ./loki.values.yaml\nhelm "),s("span",{staticClass:"token function"},[t._v("install")]),t._v(" --version"),s("span",{staticClass:"token operator"},[t._v("=")]),s("span",{staticClass:"token number"},[t._v("15.0")]),t._v(".0 prometheus -n monitoring prometheus-community/kube-prometheus-stack -f ./prometheus-operator.values.yaml\n")])]),s("copy-code-btn")],1),s("ul",[s("li",[t._v("Check the result:")])]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-shell"},[s("code",{staticClass:"language-shell"},[t._v("$ kubectl get pods\nNAME                                                     READY   STATUS    RESTARTS   AGE\n"),s("span",{staticClass:"token punctuation"},[t._v("..")]),s("span",{staticClass:"token punctuation"},[t._v("..")]),s("span",{staticClass:"token punctuation"},[t._v("..")]),s("span",{staticClass:"token punctuation"},[t._v("..")]),t._v("\nalertmanager-prometheus-prometheus-oper-alertmanager-0   "),s("span",{staticClass:"token number"},[t._v("2")]),t._v("/2     Running   "),s("span",{staticClass:"token number"},[t._v("0")]),t._v("          75s\nloki-0                                                   "),s("span",{staticClass:"token number"},[t._v("1")]),t._v("/1     Running   "),s("span",{staticClass:"token number"},[t._v("0")]),t._v("          4m47s\nloki-promtail-wqfml                                      "),s("span",{staticClass:"token number"},[t._v("1")]),t._v("/1     Running   "),s("span",{staticClass:"token number"},[t._v("0")]),t._v("          4m47s\nprometheus-grafana-68f8dd6d57-2gtns                      "),s("span",{staticClass:"token number"},[t._v("2")]),t._v("/2     Running   "),s("span",{staticClass:"token number"},[t._v("0")]),t._v("          82s\nprometheus-kube-state-metrics-75d4cc9dbd-psb88           "),s("span",{staticClass:"token number"},[t._v("1")]),t._v("/1     Running   "),s("span",{staticClass:"token number"},[t._v("0")]),t._v("          82s\nprometheus-prometheus-node-exporter-gfzp6                "),s("span",{staticClass:"token number"},[t._v("1")]),t._v("/1     Running   "),s("span",{staticClass:"token number"},[t._v("0")]),t._v("          82s\nprometheus-prometheus-oper-operator-df668d457-snxks      "),s("span",{staticClass:"token number"},[t._v("1")]),t._v("/1     Running   "),s("span",{staticClass:"token number"},[t._v("0")]),t._v("          82s\nprometheus-prometheus-prometheus-oper-prometheus-0       "),s("span",{staticClass:"token number"},[t._v("3")]),t._v("/3     Running   "),s("span",{staticClass:"token number"},[t._v("1")]),t._v("          65s        \n"),s("span",{staticClass:"token punctuation"},[t._v("..")]),s("span",{staticClass:"token punctuation"},[t._v("..")]),s("span",{staticClass:"token punctuation"},[t._v("..")]),s("span",{staticClass:"token punctuation"},[t._v("..")]),t._v("\n")])]),s("copy-code-btn")],1),s("h2",{attrs:{id:"access-for-infra-mgr-to-the-th2-infra-schema-git-repository"}},[s("a",{attrs:{href:"#access-for-infra-mgr-to-the-th2-infra-schema-git-repository","aria-hidden":"true"}},[t._v("#")]),t._v("Access for infra-mgr to the th2 infra-schema Git repository")]),s("h3",{attrs:{id:"ssh-key"}},[s("a",{attrs:{href:"#ssh-key","aria-hidden":"true"}},[t._v("#")]),t._v("SSH key")]),s("p",[t._v("SSH access with write permissions is required by "),s("strong",[t._v("infra-mgr")]),t._v(" component.")]),s("ul",[s("li",[t._v("Generate keys without a passphrase:  ")])]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-unknown"},[s("code",{staticClass:"language-unknown"},[t._v("$ ssh-keygen -t rsa -m pem -f ./infra-mgr-rsa.key")])]),s("copy-code-btn")],1),s("ul",[s("li",[s("a",{attrs:{href:"https://docs.github.com/en/developers/overview/managing-deploy-keys#deploy-keys",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("Add a new deploy key to your infra-schema repository on GitHub ")]),t._v(".")]),s("li",[t._v("Create infra-mgr secret from the private key:")])]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-unknown"},[s("code",{staticClass:"language-unknown"},[t._v("$ kubectl -n service create secret generic infra-mgr --from-file=id_rsa=./infra-mgr-rsa.key")])]),s("copy-code-btn")],1),s("ul",[s("li",[t._v("set "),s("code",{pre:!0},[t._v("infraMgr.git.repository")]),t._v(" value in the "),s("a",{attrs:{href:"https://github.com/th2-net/th2-infra/blob/v1.7.3/example-values/service.values.yaml",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("service.values.yaml")]),t._v(" file to "),s("code",{pre:!0},[t._v("ssh")]),t._v(" link of your infra-schema repository, e.g:")])]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-yaml"},[s("code",{staticClass:"language-yaml"},[s("span",{staticClass:"token key atrule"},[t._v("infraMgr")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n  "),s("span",{staticClass:"token key atrule"},[t._v("git")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n    "),s("span",{staticClass:"token key atrule"},[t._v("repository")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" git@github.com"),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("th2"),s("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("net/th2"),s("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("infra"),s("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("demo"),s("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("configuration.git\n")])]),s("copy-code-btn")],1),s("h3",{attrs:{id:"personal-access-token"}},[s("a",{attrs:{href:"#personal-access-token","aria-hidden":"true"}},[t._v("#")]),t._v("Personal access token")]),s("p",[t._v("Due to the "),s("a",{attrs:{href:"https://github.blog/2021-09-01-improving-git-protocol-security-github/",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("improvements in Git protocol security")]),t._v(" on GitHub, keys supported in ssh have underwent changes. \nThese changes affected the th2 ssh connections to the GitHub repositories. \nSSH keys generated with RSA algorithm are no longer accepted when uploaded to GitHub after March 15, 2022. \nHowever, the keys uploaded before this date continue to work.")]),s("p",[t._v("GitHub repositories can be accessed via personal access tokens. \nIn case you cannot use a token, update your th2 version to use ssh connection.")]),s("recommendations",{attrs:{items:t.$frontmatter.tokens_link}}),s("p",[t._v("It is required to grant permissions from "),s("code",{pre:!0},[t._v("repo")]),t._v(" scope. \nOther permissions are not needed.")]),s("p",[s("g-image",{attrs:{src:a("2x+z"),alt:"Token permissions"}})],1),s("p",[t._v("Set "),s("code",{pre:!0},[t._v("infraMgr.git.repository")]),t._v(" value in the "),s("a",{attrs:{href:"https://github.com/th2-net/th2-infra/blob/v1.7.3/example-values/service.values.yaml",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("service.values.yaml")]),t._v(" file to "),s("strong",[t._v("https")]),t._v(" link of your infra-schema repository. \nGenerate and include PAT as HTTP auth credentials.")]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-yaml"},[s("code",{staticClass:"language-yaml"},[s("span",{staticClass:"token key atrule"},[t._v("infraMgr")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n  "),s("span",{staticClass:"token key atrule"},[t._v("git")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n    "),s("span",{staticClass:"token key atrule"},[t._v("repository")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" https"),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("//github.com/th2"),s("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("net/th2"),s("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("infra"),s("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("demo"),s("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("configuration.git\n    "),s("span",{staticClass:"token key atrule"},[t._v("httpAuthUsername")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" "),s("span",{staticClass:"token string"},[t._v('"<token>"')]),t._v(" \n    "),s("span",{staticClass:"token key atrule"},[t._v("httpAuthPassword")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" "),s("span",{staticClass:"token string"},[t._v('"<token>"')]),t._v(" \n")])]),s("copy-code-btn")],1),s("p",[t._v("infra-mgr secret is still required.")]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-shell"},[s("code",{staticClass:"language-shell"},[t._v("kubectl -n "),s("span",{staticClass:"token function"},[t._v("service")]),t._v(" create secret generic infra-mgr --from-literal"),s("span",{staticClass:"token operator"},[t._v("=")]),t._v("infra-mgr"),s("span",{staticClass:"token operator"},[t._v("=")]),t._v("infra-mgr\n")])]),s("copy-code-btn")],1),s("h3",{attrs:{id:"using-git-server-internally-in-kubernetes"}},[s("a",{attrs:{href:"#using-git-server-internally-in-kubernetes","aria-hidden":"true"}},[t._v("#")]),t._v("Using Git server internally in Kubernetes")]),s("p",[t._v("If you have any restrictions to get access to any external repositories from the k8s cluster, Git service can be deployed according to the following instruction:")]),s("ul",[s("li",[t._v('Create PersistentVolume "repos-volume", example is presented in the '),s("code",{pre:!0},[t._v("./example-values/persistence/pv.yaml")]),t._v(";")]),s("li",[t._v('Create configmap "keys-repo" from public part of key from point '),s("a",{attrs:{href:"#access-for-infra-mgr-to-the-th2-infra-schema-git-repository"}},[t._v("Access for infra-mgr to the th2 infra-schema Git repository")]),t._v(":")])]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-shell"},[s("code",{staticClass:"language-shell"},[t._v("kubectl -n "),s("span",{staticClass:"token function"},[t._v("service")]),t._v(" create configmap keys-repo --from-file"),s("span",{staticClass:"token operator"},[t._v("=")]),t._v("authorized_keys"),s("span",{staticClass:"token operator"},[t._v("=")]),t._v("./infra-mgr-rsa.pub\n")])]),s("copy-code-btn")],1),s("ul",[s("li",[t._v("Define configs for infra-git in "),s("code",{pre:!0},[t._v("services.values.yaml")]),t._v(". ")]),s("li",[t._v("Set "),s("code",{pre:!0},[t._v("infraMgr.git.repository")]),t._v(" value in the "),s("code",{pre:!0},[t._v("service.values.yaml")]),t._v(" file to "),s("strong",[t._v("ssh")]),t._v(" link of your repository, e.g:")])]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-yaml"},[s("code",{staticClass:"language-yaml"},[s("span",{staticClass:"token key atrule"},[t._v("infraMgr")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n  "),s("span",{staticClass:"token key atrule"},[t._v("git")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n    "),s("span",{staticClass:"token key atrule"},[t._v("repository")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" ssh"),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("//git@git"),s("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("ssh/home/git/repo/<your_repo_name"),s("span",{staticClass:"token punctuation"},[t._v(">")]),t._v(".git\n")])]),s("copy-code-btn")],1),s("ul",[s("li",[t._v("After installation, you should initiate a new repository with the name defined at the previous step.")])]),s("h2",{attrs:{id:"cluster-configuration"}},[s("a",{attrs:{href:"#cluster-configuration","aria-hidden":"true"}},[t._v("#")]),t._v("Cluster configuration")]),s("p",[t._v("Once all the required software is installed on your th2 node, Apache Cassandra node, and operator box, and th2-infra repository is ready, you can start configuring the cluster.")]),s("ul",[s("li",[t._v("Switch namespace to "),s("em",[t._v("service")]),t._v(":")])]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-unknown"},[s("code",{staticClass:"language-unknown"},[t._v("$ kubectl config set-context --current --namespace=service")])]),s("copy-code-btn")],1),s("h3",{attrs:{id:"define-cassandra-hostname"}},[s("a",{attrs:{href:"#define-cassandra-hostname","aria-hidden":"true"}},[t._v("#")]),t._v("Define Cassandra hostname")]),s("ul",[s("li",[t._v("Set "),s("code",{pre:!0},[t._v("cassandra.host")]),t._v(" value for "),s("code",{pre:!0},[t._v("cassandra")]),t._v(" in the "),s("a",{attrs:{href:"https://github.com/th2-net/th2-infra/blob/v1.7.3/example-values/service.values.yaml",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("service.values.yaml")]),t._v(" file. ")]),s("li",[t._v("It is also recommended specifying a name of Cassandra datacenter (it is "),s("code",{pre:!0},[t._v("datacenter1")]),t._v(" by default):")])]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-yaml"},[s("code",{staticClass:"language-yaml"},[s("span",{staticClass:"token key atrule"},[t._v("cassandra")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n  "),s("span",{staticClass:"token key atrule"},[t._v("internal")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" "),s("span",{staticClass:"token boolean important"},[t._v("false")]),t._v("\n  "),s("span",{staticClass:"token key atrule"},[t._v("host")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" <cassandra"),s("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("host"),s("span",{staticClass:"token punctuation"},[t._v(">")]),t._v("\n  "),s("span",{staticClass:"token key atrule"},[t._v("cluster")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" \n    "),s("span",{staticClass:"token key atrule"},[t._v("datacenter")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" datacenter1\n")])]),s("copy-code-btn")],1),s("h3",{attrs:{id:"define-rabbitmq-ingress-parameters"}},[s("a",{attrs:{href:"#define-rabbitmq-ingress-parameters","aria-hidden":"true"}},[t._v("#")]),t._v("Define RabbitMQ Ingress parameters")]),s("p",[t._v("If required, add the "),s("code",{pre:!0},[t._v("rabbitmq.ingress.hostName")]),t._v(" value into "),s("a",{attrs:{href:"https://github.com/th2-net/th2-infra/blob/v1.7.3/example-values/service.values.yaml",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("service.values.yaml")]),t._v(" file. Otherwise, the RabbitMQ HTTP service will be available on the node IP address.")]),s("h3",{attrs:{id:"define-th2-ingress-parameters"}},[s("a",{attrs:{href:"#define-th2-ingress-parameters","aria-hidden":"true"}},[t._v("#")]),t._v("Define th2 Ingress parameters")]),s("p",[t._v("If required, add "),s("code",{pre:!0},[t._v("ingress.hostname")]),t._v(" value into "),s("a",{attrs:{href:"https://github.com/th2-net/th2-infra/blob/v1.7.3/example-values/service.values.yaml",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("service.values.yaml")]),t._v(" file. Otherwise, th2 HTTP services will be available on the node IP address.")]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-yaml"},[s("code",{staticClass:"language-yaml"},[s("span",{staticClass:"token key atrule"},[t._v("ingress")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n  "),s("span",{staticClass:"token key atrule"},[t._v("host")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" example.com\n")])]),s("copy-code-btn")],1),s("p",[t._v("In order to include Kubernetes address to configurations for external interactions, you can add option "),s("code",{pre:!0},[t._v("infraOperator.config.k8sUrl")]),t._v(", which can be both an IP address or a domain name.")]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-yaml"},[s("code",{staticClass:"language-yaml"},[s("span",{staticClass:"token key atrule"},[t._v("infraOperator")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n  "),s("span",{staticClass:"token key atrule"},[t._v("config")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n    "),s("span",{staticClass:"token key atrule"},[t._v("k8sUrl")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" "),s("span",{staticClass:"token string"},[t._v('"<kubernetes-external-entrypoint>"')]),t._v("\n")])]),s("copy-code-btn")],1),s("h3",{attrs:{id:"create-secret-with-th2-credentials"}},[s("a",{attrs:{href:"#create-secret-with-th2-credentials","aria-hidden":"true"}},[t._v("#")]),t._v("Create secret with th2 credentials")]),s("p",[t._v("Create "),s("code",{pre:!0},[t._v("secrets.yaml")]),t._v(" in "),s("code",{pre:!0},[t._v("./")]),t._v(" folder ("),s("em",[t._v("do not commit into Git")]),t._v("). Example:")]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-yaml"},[s("code",{staticClass:"language-yaml"},[s("span",{staticClass:"token comment"},[t._v("# required only for images from a private registry, will be attached as the first PullSecret to deployments")]),t._v("\n"),s("span",{staticClass:"token comment"},[t._v("#productRegistry:")]),t._v("\n"),s("span",{staticClass:"token comment"},[t._v("#  username: user")]),t._v("\n"),s("span",{staticClass:"token comment"},[t._v("#  password: password")]),t._v("\n"),s("span",{staticClass:"token comment"},[t._v("#  name: private-registry-1.example.com # core components registry")]),t._v("\n"),s("span",{staticClass:"token comment"},[t._v("# required only for images from a private registry, will be attached as the second PullSecret to deployments")]),t._v("\n"),s("span",{staticClass:"token comment"},[t._v("#solutionRegistry:")]),t._v("\n"),s("span",{staticClass:"token comment"},[t._v("#  username: user")]),t._v("\n"),s("span",{staticClass:"token comment"},[t._v("#  password: password")]),t._v("\n"),s("span",{staticClass:"token comment"},[t._v("#  name: private-registry-2.example.com # components registry")]),t._v("\n"),s("span",{staticClass:"token comment"},[t._v("# required only for images from a private registry, will be attached as the third PullSecret to deployments")]),t._v("\n"),s("span",{staticClass:"token comment"},[t._v("#proprietaryRegistry:")]),t._v("\n"),s("span",{staticClass:"token comment"},[t._v("#  username: user")]),t._v("\n"),s("span",{staticClass:"token comment"},[t._v("#  password: password")]),t._v("\n"),s("span",{staticClass:"token comment"},[t._v("#  name: private-registry-3.example.com # components registry")]),t._v("\n"),s("span",{staticClass:"token key atrule"},[t._v("cassandra")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n"),s("span",{staticClass:"token comment"},[t._v("# set credentials for existing Cassandra cluster")]),t._v("\n  "),s("span",{staticClass:"token key atrule"},[t._v("dbUser")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n    "),s("span",{staticClass:"token key atrule"},[t._v("user")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" <user"),s("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("name"),s("span",{staticClass:"token punctuation"},[t._v(">")]),t._v("\n    "),s("span",{staticClass:"token key atrule"},[t._v("password")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" <password"),s("span",{staticClass:"token punctuation"},[t._v(">")]),t._v("\n"),s("span",{staticClass:"token key atrule"},[t._v("rabbitmq")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n"),s("span",{staticClass:"token comment"},[t._v("# set admin user credentials, it will be created during deployment")]),t._v("\n  "),s("span",{staticClass:"token key atrule"},[t._v("rabbitmqUsername")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" th2\n  "),s("span",{staticClass:"token key atrule"},[t._v("rabbitmqPassword")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" rab"),s("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("pass\n  "),s("span",{staticClass:"token comment"},[t._v("# must be a random string")]),t._v("\n  "),s("span",{staticClass:"token key atrule"},[t._v("rabbitmqErlangCookie")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" cookie\n")])]),s("copy-code-btn")],1),s("h2",{attrs:{id:"th2-deployment"}},[s("a",{attrs:{href:"#th2-deployment","aria-hidden":"true"}},[t._v("#")]),t._v("th2 deployment")]),s("h3",{attrs:{id:"install-nginx-ingress-controller"}},[s("a",{attrs:{href:"#install-nginx-ingress-controller","aria-hidden":"true"}},[t._v("#")]),t._v("Install NGINX Ingress Controller")]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-shell"},[s("code",{staticClass:"language-shell"},[t._v("helm repo "),s("span",{staticClass:"token function"},[t._v("add")]),t._v(" ingress-nginx https://kubernetes.github.io/ingress-nginx\nhelm "),s("span",{staticClass:"token function"},[t._v("install")]),t._v(" -n "),s("span",{staticClass:"token function"},[t._v("service")]),t._v(" --version"),s("span",{staticClass:"token operator"},[t._v("=")]),s("span",{staticClass:"token number"},[t._v("3.31")]),t._v(".0 ingress ingress-nginx/ingress-nginx -f ./ingress.values.yaml\n")])]),s("copy-code-btn")],1),s("p",[t._v("Check:")]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-shell"},[s("code",{staticClass:"language-shell"},[t._v("$ kubectl get pods\nNAME                                                READY   STATUS    RESTARTS   AGE\n"),s("span",{staticClass:"token punctuation"},[t._v("..")]),s("span",{staticClass:"token punctuation"},[t._v("..")]),s("span",{staticClass:"token punctuation"},[t._v("..")]),s("span",{staticClass:"token punctuation"},[t._v("..")]),t._v("\ningress-ingress-nginx-controller-7979dcdd85-mw42w   "),s("span",{staticClass:"token number"},[t._v("1")]),t._v("/1     Running   "),s("span",{staticClass:"token number"},[t._v("0")]),t._v("          30s\n"),s("span",{staticClass:"token punctuation"},[t._v("..")]),s("span",{staticClass:"token punctuation"},[t._v("..")]),s("span",{staticClass:"token punctuation"},[t._v("..")]),s("span",{staticClass:"token punctuation"},[t._v("..")]),t._v("\n")])]),s("copy-code-btn")],1),s("h3",{attrs:{id:"install-th2-infra-components-in-the-service-namespace"}},[s("a",{attrs:{href:"#install-th2-infra-components-in-the-service-namespace","aria-hidden":"true"}},[t._v("#")]),t._v("Install th2-infra components in the service namespace")]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-shell"},[s("code",{staticClass:"language-shell"},[t._v("helm repo "),s("span",{staticClass:"token function"},[t._v("add")]),t._v(" th2 https://th2-net.github.io\nhelm "),s("span",{staticClass:"token function"},[t._v("install")]),t._v(" -n "),s("span",{staticClass:"token function"},[t._v("service")]),t._v(" --version"),s("span",{staticClass:"token operator"},[t._v("=")]),s("span",{staticClass:"token operator"},[t._v("<")]),t._v("version"),s("span",{staticClass:"token operator"},[t._v(">")]),t._v(" th2-infra th2/th2 -f ./service.values.yaml -f ./secrets.yaml\n")])]),s("copy-code-btn")],1),s("notice",{attrs:{note:""}},[s("p",[t._v("Replace "),s("code",{pre:!0},[t._v("<version>")]),t._v(" with th2-infra release version you need. You can check versions "),s("a",{attrs:{href:"https://github.com/th2-net/th2-infra/releases",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("here")])])]),s("p",[t._v("Wait for all the pods in "),s("em",[t._v("service")]),t._v(" namespace to be up and running. Once completed, proceed with "),s("a",{attrs:{href:"https://github.com/th2-net/th2-infra-schema-demo/blob/master/README.md",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("infra-schema configuration")]),t._v(" to deploy th2 namespaces.")]),s("h2",{attrs:{id:"th2-infra-links"}},[s("a",{attrs:{href:"#th2-infra-links","aria-hidden":"true"}},[t._v("#")]),t._v("th2 infra links:")]),s("ul",[s("li",[t._v("Kubernetes dashboard "),s("code",{pre:!0},[t._v("http://your-host:30000/dashboard/")])]),s("li",[t._v("Grafana "),s("code",{pre:!0},[t._v("http://your-host:30000/grafana/")])]),s("li",[t._v("th2-infra-editor "),s("code",{pre:!0},[t._v("http://your-host:30000/editor/")])]),s("li",[t._v("RabbitMQ "),s("code",{pre:!0},[t._v("http://your-host:30000/rabbitmq/")])]),s("li",[t._v("th2-reports "),s("code",{pre:!0},[t._v("http://your-host:30000/your-namespace/")])])])],1)}),[],!1,null,null,null);"function"==typeof l&&l(h),"function"==typeof u&&u(h);e.default=h.exports}}]);