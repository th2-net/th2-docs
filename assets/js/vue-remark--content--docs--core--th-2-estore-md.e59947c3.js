(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{ATAY:function(t,n,e){"use strict";e.r(n);var s=e("7uw+"),a=e("UQSp"),o=e("oCYn");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}o.default.config.optionMergeStrategies;var r={VueRemarkRoot:a.a},c=function(t){var n=t.options.components=t.options.components||{},e=t.options.computed=t.options.computed||{};Object.keys(r).forEach((function(t){"object"===i(r[t])&&"function"==typeof r[t].render||"function"==typeof r[t]&&"function"==typeof r[t].options.render?n[t]=r[t]:e[t]=function(){return r[t]}}))},p=o.default.config.optionMergeStrategies,v="__vueRemarkFrontMatter",_={excerpt:null,weight:10,repo_owner:"th2-net",repo:"th2-estore",hide_releases:!0,skip_readme:!0,related:[{name:"th2-net/cradleapi",icon:"mdi-github",href:"https://github.com/th2-net/cradleapi"}],title:"th2-estore"};var u=function(t){t.options[v]&&(t.options[v]=_),o.default.util.defineReactive(t.options,v,_),t.options.computed=p.computed({$frontmatter:function(){return t.options[v]}},t.options.computed)},l=Object(s.a)({},(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("VueRemarkRoot",[e("h1",{attrs:{id:"th2-estore"}},[e("a",{attrs:{href:"#th2-estore","aria-hidden":"true"}},[t._v("#")]),t._v("th2-estore")]),e("p",[e("strong",[t._v("estore")]),t._v(" is one of the core components in the th2 environment. \nIt is responsible for storing events into "),e("term",{attrs:{term:"Cradle"}},[t._v("Cradle")]),t._v(". \nSending events to "),e("strong",[t._v("estore")]),t._v(" from other components is possible via special methods from the "),e("term",{attrs:{term:"th2-common"}},[t._v("th2-common")]),t._v(" library.")],1),e("h2",{attrs:{id:"functionality"}},[e("a",{attrs:{href:"#functionality","aria-hidden":"true"}},[t._v("#")]),t._v("Functionality")]),e("h3",{attrs:{id:"events"}},[e("a",{attrs:{href:"#events","aria-hidden":"true"}},[t._v("#")]),t._v("Events")]),e("p",[t._v("Event is a fundamental unit of data stored and processed by th2. \nTest execution data as well as information related to the work of all th2 components are presented via events hierarchy. \nEvery event in th2 consists of important parts:")]),e("ul",[e("li",[e("code",{pre:!0},[t._v("id")]),t._v(" - unique identifier (in UUID format) within the th2.")]),e("li",[e("code",{pre:!0},[t._v("parentId")]),t._v(" - optional link to a parent event.")]),e("li",[e("code",{pre:!0},[t._v("description")]),t._v(" - set of fields for short descriptions.")]),e("li",[e("code",{pre:!0},[t._v("body")]),t._v(" - useful data in JSON format.")]),e("li",[e("code",{pre:!0},[t._v("attachedMessageIDs")]),t._v(" - the list of message IDs that are linked to the event.")])]),e("h3",{attrs:{id:"how-to-send-events-to-estore"}},[e("a",{attrs:{href:"#how-to-send-events-to-estore","aria-hidden":"true"}},[t._v("#")]),t._v("How to send events to estore")]),e("p",[t._v("You can create "),e("code",{pre:!0},[t._v("Event")]),t._v(" object in th2 component with "),e("code",{pre:!0},[t._v("th2-common-py")]),t._v(" library.")]),e("p",[t._v("Put primary event data to variables. Maybe you will need it in the future.")]),e("div",{staticClass:"remark-highlight"},[e("pre",{staticClass:"language-py"},[e("code",{staticClass:"language-py"},[t._v("root_event_id "),e("span",{staticClass:"token operator"},[t._v("=")]),t._v(" EventID"),e("span",{staticClass:"token punctuation"},[t._v("(")]),e("span",{staticClass:"token builtin"},[t._v("id")]),e("span",{staticClass:"token operator"},[t._v("=")]),e("span",{staticClass:"token builtin"},[t._v("str")]),e("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("uuid1"),e("span",{staticClass:"token punctuation"},[t._v("(")]),e("span",{staticClass:"token punctuation"},[t._v(")")]),e("span",{staticClass:"token punctuation"},[t._v(")")]),e("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n\nstart_timestamp "),e("span",{staticClass:"token operator"},[t._v("=")]),t._v(" Timestamp"),e("span",{staticClass:"token punctuation"},[t._v("(")]),e("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\nstart_timestamp"),e("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("FromDatetime"),e("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("datetime"),e("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("now"),e("span",{staticClass:"token punctuation"},[t._v("(")]),e("span",{staticClass:"token punctuation"},[t._v(")")]),e("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n")])]),e("copy-code-btn")],1),e("p",[t._v("Create "),e("code",{pre:!0},[t._v("Event")]),t._v(" object.")]),e("div",{staticClass:"remark-highlight"},[e("pre",{staticClass:"language-py"},[e("code",{staticClass:"language-py"},[t._v("root_event "),e("span",{staticClass:"token operator"},[t._v("=")]),t._v(" Event"),e("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("\n   "),e("span",{staticClass:"token builtin"},[t._v("id")]),e("span",{staticClass:"token operator"},[t._v("=")]),t._v("root_event_id"),e("span",{staticClass:"token punctuation"},[t._v(",")]),t._v("\n   parent_id"),e("span",{staticClass:"token operator"},[t._v("=")]),e("span",{staticClass:"token boolean"},[t._v("None")]),e("span",{staticClass:"token punctuation"},[t._v(",")]),t._v("\n   start_timestamp"),e("span",{staticClass:"token operator"},[t._v("=")]),t._v("start_timestamp"),e("span",{staticClass:"token punctuation"},[t._v(",")]),t._v("\n   "),e("span",{staticClass:"token comment"},[t._v('# end_timestamp="",')]),t._v("\n   status"),e("span",{staticClass:"token operator"},[t._v("=")]),t._v("EventStatus"),e("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("SUCCESS"),e("span",{staticClass:"token punctuation"},[t._v(",")]),t._v("\n   name"),e("span",{staticClass:"token operator"},[t._v("=")]),e("span",{staticClass:"token string"},[t._v('"Test Event"')]),e("span",{staticClass:"token punctuation"},[t._v(",")]),t._v("\n   body"),e("span",{staticClass:"token operator"},[t._v("=")]),e("span",{staticClass:"token string"},[t._v('b""')]),t._v("\n"),e("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n")])]),e("copy-code-btn")],1),e("p",[t._v("Create "),e("code",{pre:!0},[t._v("EventBatch")]),t._v(" object and send it using event router.")]),e("div",{staticClass:"remark-highlight"},[e("pre",{staticClass:"language-py"},[e("code",{staticClass:"language-py"},[t._v("event_batch "),e("span",{staticClass:"token operator"},[t._v("=")]),t._v(" EventBatch"),e("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("parent_event_id"),e("span",{staticClass:"token operator"},[t._v("=")]),e("span",{staticClass:"token boolean"},[t._v("None")]),e("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" events"),e("span",{staticClass:"token operator"},[t._v("=")]),e("span",{staticClass:"token punctuation"},[t._v("[")]),t._v("root_event"),e("span",{staticClass:"token punctuation"},[t._v("]")]),e("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\nestore"),e("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("send"),e("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("event_batch"),e("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n")])]),e("copy-code-btn")],1),e("h2",{attrs:{id:"configuration"}},[e("a",{attrs:{href:"#configuration","aria-hidden":"true"}},[t._v("#")]),t._v("Configuration")]),e("p",[e("strong",[t._v("estore")]),t._v(" has its own "),e("term",{attrs:{term:"Custom resource"}},[t._v("custom resource")]),t._v(" definition called "),e("code",{pre:!0},[t._v("Th2Estore")]),t._v(". ")],1),e("notice",{attrs:{note:""}},[e("p",[t._v("Make sure to indicate "),e("code",{pre:!0},[t._v("Th2Estore")]),t._v(" when specifying "),e("code",{pre:!0},[t._v("kind")]),t._v(" of the "),e("term",{attrs:{term:"Custom resource"}},[t._v("custom resource")]),t._v(" for `"),e("strong",[t._v("estore")]),t._v(".")],1)]),e("p",[t._v("Infra schema can contain only one "),e("strong",[t._v("estore")]),t._v(" box description. \nIt consists of a single required option - "),e("term",{attrs:{term:"Docker Image"}},[t._v("docker_image")]),t._v(". \nConfiguration for "),e("term",{attrs:{term:"pin"}},[t._v("pins")]),t._v(" is specified in the "),e("code",{pre:!0},[t._v("Th2Estore")]),e("term",{attrs:{term:"Custom resource"}},[t._v("custom resource")]),t._v(" definition. \nMore details on that are provided in the “Automatic pins configuration“ section.")],1),e("p",[t._v("General view of the component will look like this: ")]),e("div",{staticClass:"remark-highlight"},[e("pre",{staticClass:"language-yaml"},[e("code",{staticClass:"language-yaml"},[e("span",{staticClass:"token key atrule"},[t._v("apiVersion")]),e("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" th2.exactpro.com/v1\n"),e("span",{staticClass:"token key atrule"},[t._v("kind")]),e("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" Th2Estore\n"),e("span",{staticClass:"token key atrule"},[t._v("metadata")]),e("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n  "),e("span",{staticClass:"token key atrule"},[t._v("name")]),e("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" estore\n"),e("span",{staticClass:"token key atrule"},[t._v("spec")]),e("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n  "),e("span",{staticClass:"token key atrule"},[t._v("image-name")]),e("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" ghcr.io/th2"),e("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("net/th2"),e("span",{staticClass:"token punctuation"},[t._v("-")]),t._v("estore\n  "),e("span",{staticClass:"token key atrule"},[t._v("image-version")]),e("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" <image version"),e("span",{staticClass:"token punctuation"},[t._v(">")]),t._v("\n  "),e("span",{staticClass:"token key atrule"},[t._v("extended-settings")]),e("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n    "),e("span",{staticClass:"token key atrule"},[t._v("service")]),e("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n      "),e("span",{staticClass:"token key atrule"},[t._v("enabled")]),e("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" "),e("span",{staticClass:"token boolean important"},[t._v("false")]),t._v("\n    "),e("span",{staticClass:"token key atrule"},[t._v("envVariables")]),e("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n      "),e("span",{staticClass:"token key atrule"},[t._v("JAVA_TOOL_OPTIONS")]),e("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" "),e("span",{staticClass:"token string"},[t._v('"-XX:+ExitOnOutOfMemoryError -Ddatastax-java-driver.advanced.connection.init-query-timeout=\\"5000 milliseconds\\""')]),t._v("\n    "),e("span",{staticClass:"token key atrule"},[t._v("resources")]),e("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n      "),e("span",{staticClass:"token key atrule"},[t._v("limits")]),e("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n        "),e("span",{staticClass:"token key atrule"},[t._v("memory")]),e("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" 500Mi\n        "),e("span",{staticClass:"token key atrule"},[t._v("cpu")]),e("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" 200m\n      "),e("span",{staticClass:"token key atrule"},[t._v("requests")]),e("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n        "),e("span",{staticClass:"token key atrule"},[t._v("memory")]),e("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" 100Mi\n        "),e("span",{staticClass:"token key atrule"},[t._v("cpu")]),e("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" 20m\n")])]),e("copy-code-btn")],1),e("h3",{attrs:{id:"automatic-pins-configuration"}},[e("a",{attrs:{href:"#automatic-pins-configuration","aria-hidden":"true"}},[t._v("#")]),t._v("Automatic pins configuration")]),e("term",{attrs:{term:"th2-infra-operator"}},[t._v("th2-infra-operator")]),t._v(" (component responsible for creating boxes) automatically adds special MQ "),e("term",{attrs:{term:"pin"}},[t._v("pin")]),t._v(" for receiving events to **estore** by any other component.\n"),e("p",[t._v("At the same time, any box with "),e("term",{attrs:{term:"Custom resource"}},[t._v("CR")]),t._v(" kind "),e("code",{pre:!0},[t._v("Th2Box")]),t._v(" will get special MQ "),e("term",{attrs:{term:"pin"}},[t._v("pin")]),t._v(" for sending events to the "),e("strong",[t._v("estore")]),t._v(". These "),e("term",{attrs:{term:"pin"}},[t._v("pins")]),t._v("  have attributes "),e("code",{pre:!0},[t._v("event")]),t._v(" and "),e("code",{pre:!0},[t._v("publish")]),t._v(".")],1)],1)}),[],!1,null,null,null);"function"==typeof c&&c(l),"function"==typeof u&&u(l);n.default=l.exports},UQSp:function(t,n,e){"use strict";n.a={name:"VueRemarkRoot",render:function(t){return t("div",null,this.$slots.default)}}}}]);