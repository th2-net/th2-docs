(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{RWKi:function(t,e,a){"use strict";a.r(e);var s=a("7uw+"),n=a("UQSp"),o=a("oCYn");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}o.default.config.optionMergeStrategies;var r={VueRemarkRoot:n.a},c=function(t){var e=t.options.components=t.options.components||{},a=t.options.computed=t.options.computed||{};Object.keys(r).forEach((function(t){"object"===i(r[t])&&"function"==typeof r[t].render||"function"==typeof r[t]&&"function"==typeof r[t].options.render?e[t]=r[t]:a[t]=function(){return r[t]}}))},p=o.default.config.optionMergeStrategies,l="__vueRemarkFrontMatter",v={excerpt:null,weight:10,title:"th2-common"};var u=function(t){t.options[l]&&(t.options[l]=v),o.default.util.defineReactive(t.options,l,v),t.options.computed=p.computed({$frontmatter:function(){return t.options[l]}},t.options.computed)},_=Object(s.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("VueRemarkRoot",[s("h1",{attrs:{id:"th2-common"}},[s("a",{attrs:{href:"#th2-common","aria-hidden":"true"}},[t._v("#")]),t._v("th2-common")]),s("p",[s("code",{pre:!0},[t._v("th2-common")]),t._v(" is a library used for enabling transfer of data in th2 and is required when setting up communications for a module.")]),s("p",[t._v("The library is currently available in 3 languages: Java, Kotlin and Python. \nLinks to the open source repositories:")]),s("ol",[s("li",[t._v("Java & Kotlin - "),s("a",{attrs:{href:"https://github.com/th2-net/th2-common-j",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("GitHub - th2-net/th2-common-j")])]),s("li",[t._v("Python - "),s("a",{attrs:{href:"https://github.com/th2-net/th2-common-py",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("GitHub - th2-net/th2-common-py")])])]),s("p",[t._v("To be exact, these are some of the things the common library is used for:")]),s("ol",[s("li",[s("p",[t._v("set up RabbitMQ consumer and producer ")])]),s("li",[s("p",[t._v("set up gRPC client and server")])]),s("li",[s("p",[t._v("set up prometheus client")]),s("ul",[s("li",[t._v("collect metrics on loads to and from RabbitMQ,")]),s("li",[t._v("collect metrics about gRPC loads")]),s("li",[t._v("collect message metrics")]),s("li",[t._v("collect event metrics")]),s("li",[t._v("send metrics to Prometheus")])])])]),s("p",[t._v("Some of the above activities are not automated and requires initial setting up by the user.")]),s("h2",{attrs:{id:"commonfactory-class"}},[s("a",{attrs:{href:"#commonfactory-class","aria-hidden":"true"}},[t._v("#")]),t._v("CommonFactory class")]),s("p",[s("code",{pre:!0},[t._v("CommonFactory")]),t._v(" is a class, that allows user to execute activities, related to communication between component developed and other th2 components.")]),s("p",[t._v("Users should create instance of "),s("code",{pre:!0},[t._v("CommonFactory")]),t._v("  in order to integrate a component into the th2 cluster. \n"),s("code",{pre:!0},[t._v("CommonFactory")]),t._v(" contains functions that will access configuration files to obtain the required settings which allows the module to make the connections with solutions such as RabbitMQ, gRPC or Prometheus.")]),s("p",[t._v("There are two methods for accessing the configuration files.")]),s("ol",[s("li",[t._v("User creates the configuration files and then provides the path to these files")]),s("li",[t._v("Access config maps from the Kubernetes cluster")])]),s("p",[t._v("The configuration files (list below) required by a module to read:")]),s("ol",[s("li",[t._v("A "),s("strong",[t._v("RabbitMQ")]),t._v(" config from the "),s("code",{pre:!0},[t._v("rabbitMQ.json")]),t._v(" file")]),s("li",[t._v("A "),s("strong",[t._v("message's router configuration")]),t._v(" from the "),s("code",{pre:!0},[t._v("mq.json")]),t._v(" file")]),s("li",[t._v("A "),s("strong",[t._v("gRPC router configuration")]),t._v(" from the "),s("code",{pre:!0},[t._v("grpc_router.json")]),t._v(" file")]),s("li",[t._v("A "),s("strong",[t._v("gRPC configuration")]),t._v(" from the "),s("code",{pre:!0},[t._v("grpc.json")]),t._v(" file")]),s("li",[t._v("A "),s("strong",[t._v("Cradle configuration")]),t._v(" from the "),s("code",{pre:!0},[t._v("cradle.json")]),t._v(" file")])]),s("notice",{attrs:{warning:""}},[s("p",[t._v("These filenames can be customized, but it is recommended that file names remains unchanged. \n"),s("code",{pre:!0},[t._v("CommonFactory")]),t._v(" variant on Java has them hardcoded.\nIf files names were to be changed you should change them in the imported "),s("code",{pre:!0},[t._v("CommonFactory")]),t._v(" library for Java as well.")])]),s("h2",{attrs:{id:"setting-up-an-instance-of-common-factory"}},[s("a",{attrs:{href:"#setting-up-an-instance-of-common-factory","aria-hidden":"true"}},[t._v("#")]),t._v("Setting up an instance of Common Factory")]),s("p",[t._v("To gain access to the required configuration files, a user may choose to set up the instance named factory, of class "),s("code",{pre:!0},[t._v("CommonFactory")]),t._v(", in the following ways. \nSeveral examples are provided below.")]),s("h3",{attrs:{id:"option-1-user-creates-the-configuration-files-and-then-provides-the-path-to-these-files"}},[s("a",{attrs:{href:"#option-1-user-creates-the-configuration-files-and-then-provides-the-path-to-these-files","aria-hidden":"true"}},[t._v("#")]),t._v("Option 1: User creates the configuration files and then provides the path to these files")]),s("p",[t._v("Create instance of "),s("code",{pre:!0},[t._v("CommonFactory")]),t._v(" and provide access to the config files. \nThis should be specified during the start of the application.")]),s("ol",[s("li",[t._v("Create an instance with configs files in the default path ("),s("code",{pre:!0},[t._v("/var/th2/config/*")]),t._v(")")])]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-java"},[s("code",{staticClass:"language-java"},[s("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" factory "),s("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),s("span",{staticClass:"token keyword"},[t._v("new")]),t._v(" "),s("span",{staticClass:"token class-name"},[t._v("CommonFactory")]),s("span",{staticClass:"token punctuation"},[t._v("(")]),s("span",{staticClass:"token punctuation"},[t._v(")")]),s("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n")])]),s("copy-code-btn")],1),s("ol",{attrs:{start:"2"}},[s("li",[t._v("Provide custom paths as shown below")])]),s("p",[t._v("The "),s("code",{pre:!0},[t._v(".json")]),t._v(" config files should created and be placed in directories in the path.")]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-shell"},[s("code",{staticClass:"language-shell"},[t._v("var factory "),s("span",{staticClass:"token operator"},[t._v("=")]),t._v(" new CommonFactory"),s("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("rabbitMQ, routerMQ, routerGRPC, cradle, custom, prometheus, dictionariesDir"),s("span",{staticClass:"token punctuation"},[t._v(")")]),s("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n")])]),s("copy-code-btn")],1),s("ol",{attrs:{start:"3"}},[s("li",[t._v("Create instance with configs from command line arguments."),s("br"),t._v("\nThe arguments from Group1 (see below) will access the user made config files. \n"),s("code",{pre:!0},[t._v("args")]),t._v(" is a string array of command line arguments.\n"),s("code",{pre:!0},[t._v(".createFromArguments")]),t._v(" returns a")])]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-java"},[s("code",{staticClass:"language-java"},[s("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" factory "),s("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),s("span",{staticClass:"token class-name"},[t._v("CommonFactory")]),s("span",{staticClass:"token punctuation"},[t._v(".")]),s("span",{staticClass:"token function"},[t._v("createFromArguments")]),s("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("args"),s("span",{staticClass:"token punctuation"},[t._v(")")]),s("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n")])]),s("copy-code-btn")],1),s("h3",{attrs:{id:"option-2-access-config-files-from-the-kubernetes-cluster"}},[s("a",{attrs:{href:"#option-2-access-config-files-from-the-kubernetes-cluster","aria-hidden":"true"}},[t._v("#")]),t._v("Option 2: Access config files from the Kubernetes cluster")]),s("p",[t._v("Either use the "),s("code",{pre:!0},[t._v(".createFromArguments()")]),t._v(" method with arguments from group 2 or the "),s("code",{pre:!0},[t._v(".createFromKubernetes()")]),t._v(" method to access configuration files in the config maps of Kubernetes cluster")]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-java"},[s("code",{staticClass:"language-java"},[s("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" factory "),s("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),s("span",{staticClass:"token class-name"},[t._v("CommonFactory")]),s("span",{staticClass:"token punctuation"},[t._v(".")]),s("span",{staticClass:"token function"},[t._v("createFromKubernetes")]),s("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("namespace"),s("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" boxName"),s("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" contextName"),s("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" dictionaries"),s("span",{staticClass:"token punctuation"},[t._v(")")]),s("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n")])]),s("copy-code-btn")],1),s("p",[t._v("Two objects will be created:")]),s("ul",[s("li",[s("code",{pre:!0},[t._v("generated_configs")]),t._v(" directory - this directory stores "),s("code",{pre:!0},[t._v(".json")]),t._v(" configuration files from Kubernetes;"),s("ul",[s("li",[t._v("These files are overridden when "),s("code",{pre:!0},[t._v("CommonFactory.createFromKubernetes(namespace, boxName)")]),t._v(" and "),s("code",{pre:!0},[t._v("CommonFactory.createFromKubernetes(namespace, boxName, contextName)")]),t._v(" are invoked again.")])])]),s("li",[s("code",{pre:!0},[t._v("factory")]),t._v(" - the tool object that contains interfaces which are used to set up connections with th2 services.")])]),s("p",[t._v("There are requirements that must be met when creating the object "),s("code",{pre:!0},[t._v("factory")]),t._v(" using Kubernetes:")]),s("ol",[s("li",[t._v("It is necessary to have Kubernetes configuration written in "),s("code",{pre:!0},[t._v("~/.kube/config")]),t._v(". See more on kubectl configuration "),s("a",{attrs:{href:"https://kubernetes.io/docs/tasks/access-application-cluster/configure-access-multiple-clusters/",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("here")]),t._v(".")]),s("li",[t._v("User needs to have authentication with service account token that has the necessary access to read custom resources (CRs) and secrets from the specified namespace."),s("ul",[s("li",[t._v("Common Factory will look for RabbitMQ and Cassandra secret name and password key.")])])])]),s("notice",{attrs:{note:""}},[s("p",[t._v("A custom resource (or CR) is an extension of the Kubernetes API, that represents a customization of a particular Kubernetes installation.")]),s("p",[t._v("A secret is an object that contains a small amount of sensitive data such as a password, a token, or a key. \nSecrets are similar to config maps but are specifically intended to hold confidential data.")])]),s("h2",{attrs:{id:"run-component"}},[s("a",{attrs:{href:"#run-component","aria-hidden":"true"}},[t._v("#")]),t._v("Run component")]),s("p",[t._v("In first attempts of running your component, you probably will run it as "),s("a",{attrs:{href:"../../cookbook/run-box-outside-cluster/"}},[t._v("external box")]),t._v(". \nDepending on the method used to create the component, you can run it in different ways.")]),s("h3",{attrs:{id:"option-1-run-without-arguments"}},[s("a",{attrs:{href:"#option-1-run-without-arguments","aria-hidden":"true"}},[t._v("#")]),t._v("Option 1: Run without arguments")]),s("p",[t._v("The main commands to run the box are slightly different for different programming languages:")]),s("ul",[s("li",[t._v("Java: "),s("code",{pre:!0},[t._v("gradle run")])]),s("li",[t._v("Python: "),s("code",{pre:!0},[t._v("python run.py")])])]),s("h3",{attrs:{id:"option-2-run-with-arguments"}},[s("a",{attrs:{href:"#option-2-run-with-arguments","aria-hidden":"true"}},[t._v("#")]),t._v("Option 2: Run with arguments")]),s("p",[t._v("If you have not specified configs for "),s("code",{pre:!0},[t._v("th2-common")]),t._v(" to connect to the th2, you should specify them along with arguments in terminal. \nYou can use one of the groups of arguments provided below.")]),s("notice",{attrs:{note:""}},[s("p",[t._v("Arguments from different groups cannot be used together.")])]),s("p",[t._v("Local files configuration arguments:")]),s("ul",[s("li",[s("code",{pre:!0},[t._v("--rabbitConfiguration")]),t._v(" – a path to the "),s("code",{pre:!0},[t._v(".json")]),t._v(" file with RabbitMQ configuration")]),s("li",[s("code",{pre:!0},[t._v("--messageRouterConfiguration")]),t._v(" – a path to the "),s("code",{pre:!0},[t._v(".json")]),t._v(" file with configuration for MessageRouter")]),s("li",[s("code",{pre:!0},[t._v("--grpcRouterConfiguration")]),t._v(" – a path to the "),s("code",{pre:!0},[t._v(".json")]),t._v(" file with configuration for gRPCRouter")]),s("li",[s("code",{pre:!0},[t._v("--cradleConfiguration")]),t._v(" – a path to the "),s("code",{pre:!0},[t._v(".json")]),t._v(" file with configuration for Cradle")]),s("li",[s("code",{pre:!0},[t._v("--customConfiguration")]),t._v(" – a path to the "),s("code",{pre:!0},[t._v(".json")]),t._v(" file with a custom configuration")]),s("li",[s("code",{pre:!0},[t._v("--dictionariesDir")]),t._v(" – a path to the directory with encoded dictionary files")]),s("li",[s("code",{pre:!0},[t._v("--prometheusConfiguration")]),t._v(" – a path to the "),s("code",{pre:!0},[t._v(".json")]),t._v(" file with a configuration for Prometheus metrics server")]),s("li",[s("code",{pre:!0},[t._v("--boxConfiguration")]),t._v(" – a path to the "),s("code",{pre:!0},[t._v(".json")]),t._v(" file with external box")]),s("li",[s("code",{pre:!0},[t._v("-c/")]),t._v(" and "),s("code",{pre:!0},[t._v("--configs")]),t._v(" – a folder with "),s("code",{pre:!0},[t._v(".json")]),t._v(" files for schema configurations with following names:")])]),s("p",[t._v("1) rabbitMq.json – a configuration file for RabbitMQ")]),s("p",[t._v("2) mq.json – a configuration file for MessageRouter")]),s("p",[t._v("3) grpc.json – a configuration file for gRPCRouter")]),s("p",[t._v("4) cradle.json – a configuration file for the Cradle API")]),s("p",[t._v("5) custom.json – custom configuration")]),s("p",[t._v("Kubernetes-based configuration arguments:")]),s("notice",{attrs:{note:""}},[s("p",[t._v("when using these arguments, prior installation and configuration of kubectl is required")])]),s("ul",[s("li",[s("p",[s("code",{pre:!0},[t._v("--namespace")]),t._v(" – the namespace in Kubernetes to search for config maps")])]),s("li",[s("p",[s("code",{pre:!0},[t._v("--boxName")]),t._v(" – the name of the target th2 box placed in the specified Kubernetes namespace")])]),s("li",[s("p",[s("code",{pre:!0},[t._v("--contextName")]),t._v(" – the context name to search connection parameters in kubeconfig")])]),s("li",[s("p",[s("code",{pre:!0},[t._v("--dictionaries")]),t._v(" – the mapping between a dictionary in infra-schema and a dictionary type specified in the following format: "),s("code",{pre:!0},[t._v("--dictionaries <dictionary name>=<dictionary type> [<dictionary name>=<dictionary type>]")]),t._v(".\nThis argument is provided  when dictionaries are required to start a specific box.")])])]),s("p",[t._v("A CLI command example:")]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-java"},[s("code",{staticClass:"language-java"},[t._v("gradle run "),s("span",{staticClass:"token operator"},[t._v("--")]),t._v("args"),s("span",{staticClass:"token operator"},[t._v("=")]),t._v("'"),s("span",{staticClass:"token operator"},[t._v("--")]),t._v("namespace myNamespace "),s("span",{staticClass:"token operator"},[t._v("--")]),t._v("boxName myExternalBox "),s("span",{staticClass:"token operator"},[t._v("--")]),t._v("contextName myContext'\n")])]),s("copy-code-btn")],1),s("p",[t._v("With these parameters, your component will connect to the destination Kubernetes cluster and namespace, and find the right entry point (that is external box itself) to act from.")]),s("p",[t._v("Also, there are special ConfigMaps in the "),s("em",[t._v("schema")]),t._v(" namespace with the parameters for connecting to the th2 infrastructure. \n"),s("code",{pre:!0},[t._v("th2-common")]),t._v(" will save it automatically in the repository of the box you are running.")]),s("h2",{attrs:{id:"th2-common-integrations-configuration"}},[s("a",{attrs:{href:"#th2-common-integrations-configuration","aria-hidden":"true"}},[t._v("#")]),t._v("th2-common integrations configuration")]),s("p",[t._v("th2 as a framework based on open-source technologies, made by other developers.\nThey allows data storage, interchange and displaying.")]),s("h3",{attrs:{id:"rabbitmq"}},[s("a",{attrs:{href:"#rabbitmq","aria-hidden":"true"}},[t._v("#")]),t._v("RabbitMQ")]),s("p",[t._v("RabbitMQ is a powerful engine for message queues. \nIt allows you to be confident that some component of the system will receive a message in any case.")]),s("p",[t._v("After RabbitMQ is installed in your th2 cluster, this service is accessible within Kubernetes private network and for external systems. \nConfiguration for connecting to the RabbitMQ service can be applied automatically or set manually. \nIt depends on how you created the instance of "),s("code",{pre:!0},[t._v("CommonFactory")]),t._v(".")]),s("p",[t._v("After you created "),s("code",{pre:!0},[t._v("factory")]),t._v(" object, you can get routers for receiving and sending messages.")]),s("notice",{attrs:{note:""}},[s("p",[t._v("Code examples here are given in Java. \nAnd it can be different for other programming languages.")])]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-java"},[s("code",{staticClass:"language-java"},[s("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" messageRouter "),s("span",{staticClass:"token operator"},[t._v("=")]),t._v(" factory"),s("span",{staticClass:"token punctuation"},[t._v(".")]),s("span",{staticClass:"token function"},[t._v("getMessageRouterParsedBatch")]),s("span",{staticClass:"token punctuation"},[t._v("(")]),s("span",{staticClass:"token punctuation"},[t._v(")")]),s("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),s("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" rawRouter "),s("span",{staticClass:"token operator"},[t._v("=")]),t._v(" factory"),s("span",{staticClass:"token punctuation"},[t._v(".")]),s("span",{staticClass:"token function"},[t._v("getMessageRouterRawBatch")]),s("span",{staticClass:"token punctuation"},[t._v("(")]),s("span",{staticClass:"token punctuation"},[t._v(")")]),s("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),s("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" eventRouter "),s("span",{staticClass:"token operator"},[t._v("=")]),t._v(" factory"),s("span",{staticClass:"token punctuation"},[t._v(".")]),s("span",{staticClass:"token function"},[t._v("getEventBatchRouter")]),s("span",{staticClass:"token punctuation"},[t._v("(")]),s("span",{staticClass:"token punctuation"},[t._v(")")]),s("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n")])]),s("copy-code-btn")],1),s("p",[t._v("This example creates 3 different routers for 3 batches:")]),s("ul",[s("li",[s("code",{pre:!0},[t._v("messageRouter")]),t._v(" is working with "),s("code",{pre:!0},[t._v("MessageBatch")]),t._v(";")]),s("li",[s("code",{pre:!0},[t._v("rawRouter")]),t._v(" is working with "),s("code",{pre:!0},[t._v("RawMessageBatch")]),t._v(";")]),s("li",[s("code",{pre:!0},[t._v("eventRouter")]),t._v(" is working with "),s("code",{pre:!0},[t._v("EventBatch")]),t._v(".")])]),s("p",[t._v("These batches differ from each other by content type.")]),s("p",[t._v("With the router created, you can subscribe to pins (by specifying the callback function) or to send data that the router works with:")]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-java"},[s("code",{staticClass:"language-java"},[t._v("router"),s("span",{staticClass:"token punctuation"},[t._v(".")]),s("span",{staticClass:"token function"},[t._v("subscribe")]),s("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("callback"),s("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" attrs"),s("span",{staticClass:"token punctuation"},[t._v(".")]),s("span",{staticClass:"token punctuation"},[t._v(".")]),s("span",{staticClass:"token punctuation"},[t._v(".")]),s("span",{staticClass:"token punctuation"},[t._v(")")]),s("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("  "),s("span",{staticClass:"token comment"},[t._v("// subscribe to only one pin")]),t._v("\nrouter"),s("span",{staticClass:"token punctuation"},[t._v(".")]),s("span",{staticClass:"token function"},[t._v("subscribeAll")]),s("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("callback"),s("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" attrs"),s("span",{staticClass:"token punctuation"},[t._v(".")]),s("span",{staticClass:"token punctuation"},[t._v(".")]),s("span",{staticClass:"token punctuation"},[t._v(".")]),s("span",{staticClass:"token punctuation"},[t._v(")")]),s("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("  "),s("span",{staticClass:"token comment"},[t._v("// subscribe to one or several pins")]),t._v("\nrouter"),s("span",{staticClass:"token punctuation"},[t._v(".")]),s("span",{staticClass:"token function"},[t._v("send")]),s("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("message"),s("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" attrs"),s("span",{staticClass:"token punctuation"},[t._v(".")]),s("span",{staticClass:"token punctuation"},[t._v(".")]),s("span",{staticClass:"token punctuation"},[t._v(".")]),s("span",{staticClass:"token punctuation"},[t._v(")")]),s("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("  "),s("span",{staticClass:"token comment"},[t._v("// send to only one pin")]),t._v("\nrouter"),s("span",{staticClass:"token punctuation"},[t._v(".")]),s("span",{staticClass:"token function"},[t._v("sendAll")]),s("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("message"),s("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" attrs"),s("span",{staticClass:"token punctuation"},[t._v(".")]),s("span",{staticClass:"token punctuation"},[t._v(".")]),s("span",{staticClass:"token punctuation"},[t._v(".")]),s("span",{staticClass:"token punctuation"},[t._v(")")]),s("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("  "),s("span",{staticClass:"token comment"},[t._v("// send to one or several pins")]),t._v("\n")])]),s("copy-code-btn")],1),s("p",[s("code",{pre:!0},[t._v("attrs...")]),t._v(" is non-mandatory list of pin attributes to filter pins for action. \nIf these attributes are not specified pins will be filtered by default attributes. \nDefault attributes depend on the router and action types:")]),s("ul",[s("li",[s("code",{pre:!0},[t._v("message_parsed_batch_router")]),s("ul",[s("li",[t._v("Subscribe: "),s("code",{pre:!0},[t._v("subscribe")]),t._v(", "),s("code",{pre:!0},[t._v("parsed")])]),s("li",[t._v("Send: "),s("code",{pre:!0},[t._v("publish")]),t._v(", "),s("code",{pre:!0},[t._v("parsed")])])])]),s("li",[s("code",{pre:!0},[t._v("message_raw_batch_router")]),s("ul",[s("li",[t._v("Subscribe: "),s("code",{pre:!0},[t._v("subscribe")]),t._v(", "),s("code",{pre:!0},[t._v("raw")])]),s("li",[t._v("Send: "),s("code",{pre:!0},[t._v("publish")]),t._v(", "),s("code",{pre:!0},[t._v("raw")])])])]),s("li",[s("code",{pre:!0},[t._v("event_batch_router")]),s("ul",[s("li",[t._v("Subscribe: "),s("code",{pre:!0},[t._v("subscribe")]),t._v(", "),s("code",{pre:!0},[t._v("event")])]),s("li",[t._v("Send: "),s("code",{pre:!0},[t._v("publish")]),t._v(", "),s("code",{pre:!0},[t._v("event")])])])])]),s("p",[t._v("If you want to use default pins for router, specify "),s("code",{pre:!0},[t._v("callback")]),t._v(" or "),s("code",{pre:!0},[t._v("message")]),t._v(" only as first parameter:")]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-java"},[s("code",{staticClass:"language-java"},[t._v("router"),s("span",{staticClass:"token punctuation"},[t._v(".")]),s("span",{staticClass:"token function"},[t._v("subscribe")]),s("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("callback"),s("span",{staticClass:"token punctuation"},[t._v(")")]),s("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\nrouter"),s("span",{staticClass:"token punctuation"},[t._v(".")]),s("span",{staticClass:"token function"},[t._v("subscribeAll")]),s("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("callback"),s("span",{staticClass:"token punctuation"},[t._v(")")]),s("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\nrouter"),s("span",{staticClass:"token punctuation"},[t._v(".")]),s("span",{staticClass:"token function"},[t._v("send")]),s("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("message"),s("span",{staticClass:"token punctuation"},[t._v(")")]),s("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\nrouter"),s("span",{staticClass:"token punctuation"},[t._v(".")]),s("span",{staticClass:"token function"},[t._v("sendAll")]),s("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("message"),s("span",{staticClass:"token punctuation"},[t._v(")")]),s("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n")])]),s("copy-code-btn")],1),s("p",[t._v("If you want to provide some custom attributes, you will need to list them as strings after the first parameter:")]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-java"},[s("code",{staticClass:"language-java"},[t._v("router"),s("span",{staticClass:"token punctuation"},[t._v(".")]),s("span",{staticClass:"token function"},[t._v("subscribe")]),s("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("callback"),s("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),s("span",{staticClass:"token string"},[t._v('"subscribe"')]),s("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),s("span",{staticClass:"token string"},[t._v('"parsed"')]),s("span",{staticClass:"token punctuation"},[t._v(")")]),s("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\nrouter"),s("span",{staticClass:"token punctuation"},[t._v(".")]),s("span",{staticClass:"token function"},[t._v("subscribeAll")]),s("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("callback"),s("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),s("span",{staticClass:"token string"},[t._v('"subscribe"')]),s("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),s("span",{staticClass:"token string"},[t._v('"event"')]),s("span",{staticClass:"token punctuation"},[t._v(")")]),s("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\nrouter"),s("span",{staticClass:"token punctuation"},[t._v(".")]),s("span",{staticClass:"token function"},[t._v("send")]),s("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("message"),s("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),s("span",{staticClass:"token string"},[t._v('"publish"')]),s("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),s("span",{staticClass:"token string"},[t._v('"raw"')]),s("span",{staticClass:"token punctuation"},[t._v(")")]),s("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\nrouter"),s("span",{staticClass:"token punctuation"},[t._v(".")]),s("span",{staticClass:"token function"},[t._v("sendAll")]),s("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("message"),s("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),s("span",{staticClass:"token string"},[t._v('"publish"')]),s("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),s("span",{staticClass:"token string"},[t._v('"raw"')]),s("span",{staticClass:"token punctuation"},[t._v(")")]),s("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n")])]),s("copy-code-btn")],1),s("p",[t._v("Please be careful that all messages are filtered on the level of "),s("code",{pre:!0},[t._v("th2-common")]),t._v(". \nSo Kubernetes do not affect on the message delivery. \nAnd RabbitMQ only provides channels for messages.")]),s("p",[t._v("There is a list of predefined Pin’s attributes for th2 framework. \nAnd it will be better for you, if you follow architecture recommendations by the th2 team.")]),s("p",[t._v("Let you know, that this Pin’s attributes system is very flexible and you can define any attributes you want. \nBut keep in mind, that these attributes must be specified in "),s("code",{pre:!0},[t._v("subscribe()")]),t._v(" and "),s("code",{pre:!0},[t._v("send()")]),t._v(" methods calls.")]),s("p",[t._v("For example, you can see how two th2 modules send messages to each other. \nKeep in mind, that every Pin is connected to only 1 Pin in another module.")]),s("p",[s("g-image",{attrs:{src:a("cOMD"),alt:"RabbitMQ workflow"}})],1),s("p",[t._v("Sent message has the following lifecycle:")]),s("ol",[s("li",[s("code",{pre:!0},[t._v("th2-module-1")]),t._v(" calls a method for sending message;")]),s("li",[s("code",{pre:!0},[t._v("th2-common")]),t._v(" in "),s("code",{pre:!0},[t._v("th2-module-1")]),t._v(" choose Pins to send message with. \nPins are filtered by attributes given in "),s("code",{pre:!0},[t._v("send")]),t._v(" method call;")]),s("li",[t._v("message is sent with RabbitMQ client in "),s("code",{pre:!0},[t._v("th2-common")]),t._v(" in "),s("code",{pre:!0},[t._v("th2-module-1")]),t._v(";")]),s("li",[t._v("message on RabbitMQ server is redirected to right endpoint (Pin on the "),s("code",{pre:!0},[t._v("th2-module-2")]),t._v(")")]),s("li",[t._v("message is received by RabbitMQ client in "),s("code",{pre:!0},[t._v("th2-common")]),t._v(" in "),s("code",{pre:!0},[t._v("th2-module-2")]),t._v(";")]),s("li",[t._v("message is filtered by its content with Pin’s filters;")]),s("li",[s("code",{pre:!0},[t._v("th2-common")]),t._v(" choose callback to trigger by attributes of Pin-receiver provided in the method call for subscription.")])]),s("h2",{attrs:{id:"grpc"}},[s("a",{attrs:{href:"#grpc","aria-hidden":"true"}},[t._v("#")]),t._v("gRPC")]),s("p",[t._v("gRPC is a high performance protocol for messaging between apps. \nAnd you can use it for integration of your th2 module to the system.")]),s("p",[t._v("To use gRPC protocol it is needed to create gRPC client (for sending messages) and gRPC server (to receive messages) in your app. \nBasically, "),s("code",{pre:!0},[t._v("th2-common")]),t._v(" will do it for you.")]),s("p",[t._v("If you use gRPC it is required to define an endpoint in extended settings for it in the "),s("code",{pre:!0},[t._v("Th2Box")]),t._v(" configuration:")]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-yaml"},[s("code",{staticClass:"language-yaml"},[s("span",{staticClass:"token key atrule"},[t._v("extended-settings")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n  "),s("span",{staticClass:"token key atrule"},[t._v("service")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n    "),s("span",{staticClass:"token key atrule"},[t._v("enabled")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" "),s("span",{staticClass:"token boolean important"},[t._v("true")]),t._v("\n    "),s("span",{staticClass:"token key atrule"},[t._v("type")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" NodePort\n    "),s("span",{staticClass:"token key atrule"},[t._v("endpoints")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n      "),s("span",{staticClass:"token punctuation"},[t._v("-")]),t._v(" "),s("span",{staticClass:"token key atrule"},[t._v("name")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" grpc\n        "),s("span",{staticClass:"token key atrule"},[t._v("targetPort")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" "),s("span",{staticClass:"token number"},[t._v("8080")]),t._v("\n        "),s("span",{staticClass:"token key atrule"},[t._v("nodePort")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v(" "),s("span",{staticClass:"token number"},[t._v("31179")]),t._v("\n")])]),s("copy-code-btn")],1),s("p",[t._v("Endpoint parameters:")]),s("ul",[s("li",[s("code",{pre:!0},[t._v("name")]),t._v(" must be "),s("code",{pre:!0},[t._v("grpc")])]),s("li",[s("code",{pre:!0},[t._v("targetPort")]),t._v(" - port on the Pod which gRPC server and client are listening")]),s("li",[s("code",{pre:!0},[t._v("nodePort")]),t._v(" - port on the global th2 service (provided by NGINX Ingress Controller). \nRequests to this port are redirected to the Pod’s "),s("code",{pre:!0},[t._v("targetPort")])])]),s("notice",{attrs:{note:""}},[s("p",[t._v("Code examples here are given in Python . And it can be different for other programming languages.")])]),s("p",[t._v("First of all we need to get "),s("code",{pre:!0},[t._v("grpc_router")]),t._v(" from "),s("code",{pre:!0},[t._v("CommonFactory")]),t._v(" instance, like with routers for RabbitMQ.")]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-python"},[s("code",{staticClass:"language-python"},[t._v("grpc_router "),s("span",{staticClass:"token operator"},[t._v("=")]),t._v(" factory"),s("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("grpc_router\n")])]),s("copy-code-btn")],1),s("h4",{attrs:{id:"creating-client"}},[s("a",{attrs:{href:"#creating-client","aria-hidden":"true"}},[t._v("#")]),t._v("Creating client")]),s("p",[t._v("gRPC client sends requests to other modules. gRPC is a typed protocol. \nIt means that you are not allowed to send any message you want. \nThe message must have specific structure described in "),s("code",{pre:!0},[t._v(".proto")]),t._v(" files (e.g. "),s("a",{attrs:{href:"https://github.com/th2-net/th2-grpc-common/blob/master/src/main/proto/th2_grpc_common/common.proto",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("https://github.com/th2-net/th2-grpc-common/blob/master/src/main/proto/th2_grpc_common/common.proto")]),t._v(" ) and then transferred to the native programming language classes.")]),s("p",[t._v("Most of th2 modules which uses gRPC have additional "),s("code",{pre:!0},[t._v("th2-grpc-...")]),t._v(" repository with described messages structure and prepared to generate Python or Java classes.")]),s("p",[t._v("Generate special gRPC services class for component, you want to integrate with your module. And then provide it in your module.")]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-python"},[s("code",{staticClass:"language-python"},[t._v("service "),s("span",{staticClass:"token operator"},[t._v("=")]),t._v(" router"),s("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("get_service"),s("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("Service"),s("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n")])]),s("copy-code-btn")],1),s("p",[t._v("And that’s all, now you can send messages to another component with gRPC. \nJust call needed method in service by name.")]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-python"},[s("code",{staticClass:"language-python"},[t._v("service"),s("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("needed_method_name"),s("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("request"),s("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" timeout"),s("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n")])]),s("copy-code-btn")],1),s("p",[t._v("Where parameters are:")]),s("ul",[s("li",[s("code",{pre:!0},[t._v("request")]),t._v(" is the data that we send ")]),s("li",[s("code",{pre:!0},[t._v("timeout")]),t._v(" is the timeout for the request")])]),s("h4",{attrs:{id:"creating-server"}},[s("a",{attrs:{href:"#creating-server","aria-hidden":"true"}},[t._v("#")]),t._v("Creating server")]),s("p",[t._v("First of all we need to define gRPC messages structure via "),s("code",{pre:!0},[t._v(".proto")]),t._v(" files and transform it to the native class, like as described for gRPC client. \nFor the new module we can use "),s("a",{attrs:{href:"https://github.com/th2-net/th2-grpc-common",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("https://github.com/th2-net/th2-grpc-common")]),t._v("  as the template and change it for our needs.")]),s("notice",{attrs:{note:""}},[s("p",[t._v("If you implement some existing module, you can use appropriate "),s("code",{pre:!0},[t._v("th2-grpc-...")]),t._v(" repository.")])]),s("p",[t._v("After that generate service class and import it to the module. \nUse this class ("),s("code",{pre:!0},[t._v("LibraryServicer")]),t._v(" in example) to create your custom one ("),s("code",{pre:!0},[t._v("GrpcHandler")]),t._v(" in example) with overrided methods:")]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-python"},[s("code",{staticClass:"language-python"},[s("span",{staticClass:"token keyword"},[t._v("class")]),t._v(" "),s("span",{staticClass:"token class-name"},[t._v("GrpcHandler")]),s("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("LibraryServicer"),s("span",{staticClass:"token punctuation"},[t._v(")")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n\n    "),s("span",{staticClass:"token keyword"},[t._v("def")]),t._v(" "),s("span",{staticClass:"token function"},[t._v("method_1")]),s("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("self"),s("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" request"),s("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" context"),s("span",{staticClass:"token punctuation"},[t._v(")")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n        "),s("span",{staticClass:"token punctuation"},[t._v(".")]),s("span",{staticClass:"token punctuation"},[t._v(".")]),s("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("\n\n    "),s("span",{staticClass:"token punctuation"},[t._v(".")]),s("span",{staticClass:"token punctuation"},[t._v(".")]),s("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("\n\n    "),s("span",{staticClass:"token keyword"},[t._v("def")]),t._v(" "),s("span",{staticClass:"token function"},[t._v("method_n")]),s("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("self"),s("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" request"),s("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" context"),s("span",{staticClass:"token punctuation"},[t._v(")")]),s("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("\n        "),s("span",{staticClass:"token punctuation"},[t._v(".")]),s("span",{staticClass:"token punctuation"},[t._v(".")]),s("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("\n")])]),s("copy-code-btn")],1),s("p",[t._v("Create gRPC server with "),s("code",{pre:!0},[t._v("router")]),t._v(":")]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-python"},[s("code",{staticClass:"language-python"},[t._v("server "),s("span",{staticClass:"token operator"},[t._v("=")]),t._v(" router"),s("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("server\n")])]),s("copy-code-btn")],1),s("p",[t._v("Create an instance of your custom gRPC handler and add services from it the local gRPC server with "),s("code",{pre:!0},[t._v("add_LibraryServices_to_server()")]),t._v(" method.")]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-python"},[s("code",{staticClass:"language-python"},[s("span",{staticClass:"token keyword"},[t._v("from")]),t._v(" th2_grpc_library "),s("span",{staticClass:"token keyword"},[t._v("import")]),t._v(" library_pb2_grpc\n\nlibrary_pb2_grpc"),s("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("add_LibraryServices_to_server"),s("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("GrpcHandler"),s("span",{staticClass:"token punctuation"},[t._v("(")]),s("span",{staticClass:"token punctuation"},[t._v(")")]),s("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" server"),s("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n")])]),s("copy-code-btn")],1),s("p",[t._v("And when you want to receive requests, start the server:")]),s("div",{staticClass:"remark-highlight"},[s("pre",{staticClass:"language-python"},[s("code",{staticClass:"language-python"},[t._v("server"),s("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("start"),s("span",{staticClass:"token punctuation"},[t._v("(")]),s("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n")])]),s("copy-code-btn")],1),s("h3",{attrs:{id:"prometheus"}},[s("a",{attrs:{href:"#prometheus","aria-hidden":"true"}},[t._v("#")]),t._v("Prometheus")]),s("p",[s("a",{attrs:{href:"https://github.com/prometheus",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("Prometheus")]),t._v(" is an open-source systems monitoring and alerting toolkit. \nth2 use it to gather metrics from all the components for Grafana.")]),s("p",[s("code",{pre:!0},[t._v("th2-common")]),t._v(" automatically sends metrics based on:")]),s("ul",[s("li",[t._v("load on the system, created by your component;")]),s("li",[t._v("load on your custom message queues;")]),s("li",[t._v("load on message queues for th2 messages;")]),s("li",[t._v("load on events message queues.")])]),s("p",[t._v("It can be performed by the following utility methods in "),s("code",{pre:!0},[t._v("CommonMetrics")]),t._v(" class")]),s("ul",[s("li",[s("code",{pre:!0},[t._v("setLiveness")]),t._v(' - sets "liveness" metric of a service (exported as '),s("code",{pre:!0},[t._v("th2_liveness")]),t._v(" gauge)")]),s("li",[s("code",{pre:!0},[t._v("setReadiness")]),t._v(' - sets "readiness" metric of a service (exported as '),s("code",{pre:!0},[t._v("th2_readiness")]),t._v(" gauge)")]),s("li",[t._v("in order for the metrics to be exported, you will also need to create an instance of "),s("code",{pre:!0},[t._v("CommonFactory")])]),s("li",[t._v("common JVM metrics will also be exported alongside common service metrics")]),s("li",[t._v("some metric labels are enumerations ("),s("code",{pre:!0},[t._v("th2_type")]),t._v(": "),s("code",{pre:!0},[t._v("MESSAGE_GROUP")]),t._v(", "),s("code",{pre:!0},[t._v("EVENT")]),t._v(", "),s("code",{pre:!0},[t._v("<customTag>;message_type")]),t._v(": "),s("code",{pre:!0},[t._v("RAW_MESSAGE")]),t._v(", "),s("code",{pre:!0},[t._v("MESSAGE")]),t._v(")")])]),s("p",[t._v("Prometheus collects metrics for Grafana. \nThe following metrics are collected by "),s("code",{pre:!0},[t._v("th2-common")]),t._v(".")]),s("p",[t._v("ABSTRACT (RabbitMQ) METRICS:")]),s("p",[t._v("Measures the amount of the data "),s("strong",[t._v("transferred via RabbitMQ")]),t._v(". \nThe data includes th2 batch messages, event or custom content.")]),s("ol",[s("li",[t._v("the total size of data published to RabbitMQ in bytes")]),s("li",[t._v("the total size of data subscribed from RabbitMQ in bytes")]),s("li",[t._v("The total number of data published to RabbitMQ (unit ???)")]),s("li",[t._v("The time for data processing during subscription from RabbitMQ in seconds")])]),s("p",[t._v("gRPC METRICS:")]),s("ol",[s("li",[t._v("total number calling a particular gRPC method")]),s("li",[t._v("number of bytes sent to a particular gRPC call - request")]),s("li",[t._v("number of bytes sent to a particular gRPC call - response")])]),s("p",[t._v("MESSAGES METRICS:")]),s("ol",[s("li",[t._v("total quantity of all published messages (raw or parsed)")]),s("li",[t._v("total quantity of all subscribed messages (raw or parsed)")]),s("li",[t._v("total quantity of published messages dropped after filtering ( raw or parsed)")]),s("li",[t._v("total quantity of subscribed messages dropped after filtering ( raw or parsed)")]),s("li",[t._v("total quantity of published message groups")]),s("li",[t._v("total quantity of subscribed message groups")]),s("li",[t._v("total quantity of dropped published message groups after filtering")]),s("li",[t._v("total quantity of dropped subscribed message groups after filtering")]),s("li",[t._v("last published sequence")]),s("li",[t._v("last subscribed sequence")])]),s("p",[t._v("EVENT METRICS:")]),s("ol",[s("li",[t._v("total quantity of published events")]),s("li",[t._v("total quantity of received events")])])],1)}),[],!1,null,null,null);"function"==typeof c&&c(_),"function"==typeof u&&u(_);e.default=_.exports},UQSp:function(t,e,a){"use strict";e.a={name:"VueRemarkRoot",render:function(t){return t("div",null,this.$slots.default)}}},cOMD:function(t,e){t.exports={type:"image",mimeType:"image/png",src:"/assets/static/rabbitmq_workflow.2665e34.9c999ed825544a5e5937a96f6f25f32b.png",size:{width:1920,height:536},sizes:"(max-width: 1920px) 100vw, 1920px",srcset:["/assets/static/rabbitmq_workflow.82a2fbd.9c999ed825544a5e5937a96f6f25f32b.png 480w","/assets/static/rabbitmq_workflow.cbab2cf.9c999ed825544a5e5937a96f6f25f32b.png 1024w","/assets/static/rabbitmq_workflow.2665e34.9c999ed825544a5e5937a96f6f25f32b.png 1920w"],dataUri:"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1920 536' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-de8fe5aa39c18d19d760d1700ebd3eb6'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-de8fe5aa39c18d19d760d1700ebd3eb6)' width='1920' height='536' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAASCAYAAADrL9giAAAACXBIWXMAAAsSAAALEgHS3X78AAAHE0lEQVRYw81YaUyURxiePVgWll1gOV1YbgSBovVoPBAai1aUVIO2BY%2b2NEBBigqmP7AiaqVFlHKkWi0mhmA4rCjWRmG5S4gNh5hAwHoBa0NBUJAWLYJM3xnmWxZBimZ/OMnDzM7xHs/7zvGB0JtRBAApQAzQ1%2brnA0wABqyf1CJWkyIEmLIxsdZ6sS6NMwJYsNoYIGe1iBltDpCwtowZRAzXA1iz%2bVK2ntRmAB6TzWPOEBmLAG8BnNlcjoh5AC%2bAK8AbsIzN5TEdpG8um7cQsBLgwtaKmU2GTI%2bEQV%2bLVCrIBuAmEAiUdnZ2JkyYJzOECHHh8XjLjYyMPJlCR0YCmbsU1rkbGhoS5e%2bQ3ywyBA6ABWKx%2bG19fX1OppMWAYQoe4AHn89fIpFIvJmjLow8UqwIMSDD0cDAwJM5OUcrQITguUSHSCQiBHqBLCEbUzI5DmCjvbGxsSOTr2Q%2bWnJChBYWFiItw/TAYT2Wmkgul5O2HYuUAwgScAvBsTlcVujp6Vkz0jTF3NzclBmssLS0lE2XYuAYyQo3Mgdk2DFiuCIFHc5MtxLaLiyq2usdmX1OECTL1871pqYmWUVFxVoggxIxf/585OzsTI0JCwuT19TUrG1tbaXsgjP8kJAQOi8%2bPt6%2brq7On7QxxkgoFJJ%2bXlxcHF1bXFy8vLa2ljCOVq9eLWBEU/j7%2b9M5iYmJdjBnDZvDg4jRcSKPlJMnTy6or68nGYZiYmL43PqMjAxqw%2bXLl33Ly8vdSTs4OFgzvnjxYio/PDxcUVpaus7Pz48GD/ROOH7x4kUqpLKy0rWsrOwSMEr2vAk4IgdGSXQlYNS7IODK%2bvXrSVrLIBJyFl1pVFRUcFVVVSFpw3wzyB7SL3d3dydrTfPz87OKiop2kcja29ubs3OCzgEZZI5RdHT0RyDjApENGSYHGaRfDluS1LLU1NQEsC2dZKuNjY0Fyzo5BIjTcaawsDCaZK2tra05Ny6TyUh2SYCUdRDcSxA0uu%2bTk5OnTQJChILmnVTKbQcUGhrKtW3Jn4CAAO35iB1GM6We9MW0fYluqxnGxYy0lxUZ0zNTob75%2bPhM7uXSjBRgSKR1nRgwiCGahrDQytXV1ZCNc2P6EDGD9PR0mlpwGCF303Febm0T8/qWIl7e3m3CD5Z5UebdbC0m6YaM0NgAW447oTXXGmQCaYusra0lSqWSHLwS6DMyNTU1gvOCu/qIfRKFQqF9wou1ZUFADSDtNddjWlrahBHgAK3hFJ6WNjCOP9NvUlpaWib9HouYctULJg5%2brSNcLqc17FUEp7iATeCzA1jzG7Yjaes5ODiIEhISaJA2btyoHxgYSM4kAZAhIEVrLf9FWXBTUeVAIMX/FkuriYyM3fOVS3W5Knl/4gEPrs91rtu06zjnn0cgBY5Ciu7tyKlp0/j2uR08vm2mEvRqxczO3Wa6DNZZgYNN8xo7ezZnb%2b%2bDnsER0NTX2/ukID/vENv3KDIycnK26FPnhMzJo4BvAFk4AoXR8QjEex3nT58%2bTYlbsszHpO5a7XePe7sG2ppvnN25O44cyqi5uZmnUwJycnKowKiYWLs7f9zEVXef4qCsO8NXbw7hPzs78LdHjpLXFzp//vzk7YEmEXAYkAf4BXAC4AWQvmoG7Nixg3NOWl5a0jQKgchuGMQPISINdb/3b/s0lGZlUlISX2cElJSUUKXfJafYDz7ufxpbeH804HjbWFSB%2bll/fz8uKCigBMDdzddOxcLsbBJljoBYvBO6IxCG9g3AMGAVHQtH/LGxsVnZAm8EasvK99bO6e/reZBa3o3f/6FtZNfPnSN9D/txTvYZPzKel5enOwJAGFW6OWS7Zce9O4NdwxhnVnU/7xzCuLP97mj8vkSl9huCI%2bB6YyPCn48TMPoFfx/eA2%2bZ3Tw8Fik4%2bjyC1/IsQrCBzg1D/MzMzFnZAoce1eE0z9v6n4FHf59rGcabsm7/m1LRNwY68Y8njlMCcnNzdUdAUFAQ6v6riypOPpLi0X6rtajjdhuG%2bkpaesYCzmFfX98pa4cOL6UE4A/RKhyKVPgTlI%2b3okv4M1SM/cfv4p6vF/Jf4zwS/FZd/f1A/yPc9XgEDz15gm9cb7yw%2beMt5LGDjh07xtP5YRiyZStnqHDdhk3LuU/RL2N28qe5LpFKpaL9paqSNZXVNSVl1TW5V1Rl5643txZca2jKq29o/FWt7iRyEDyrZ03CihUrNO1Tp35aWKG6mp2XmxvI9R08eEi3zsO9q2nC89YV7mvyYlHCW8HTzMxMwV3ocHdPIqC7u5v29/Q8WNTR3p7Sfu/e/s6O9gN9fb0H7qvViWq1OmlgYMBjfE7PrIyGR4zmRrKysuI%2bjAhs4LvFAZ7T1Ah4HL0Z/90Ah3m6mPNigYcM5QPe%2bjJvb2851HL49JVNeV29QvkPauJDE/obKroAAAAASUVORK5CYII=' /%3e%3c/svg%3e"}}}]);