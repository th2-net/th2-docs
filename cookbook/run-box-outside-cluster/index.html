<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>How to run a box outside the cluster | th2 docs</title><meta name="gridsome:hash" content="073b22652d80460bd37ae7e4ad68d8e665cb0934"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="viewport" content="width=device-width, initial-scale=1"><meta data-vue-tag="ssr" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" hid="description" name="description" content="Documentation for th2 - the next-generation test automation framework for financial markets"><meta data-vue-tag="ssr" hid="keywords" name="keywords" content="Exactpro, th2, test automation, financial technologies, microservices, kubernetes, k8s"><meta data-vue-tag="ssr" hid="og:site_name" name="og:site_name" content="th2 documentation"><meta data-vue-tag="ssr" hid="og:type" name="og:type" content="website"><meta data-vue-tag="ssr" hid="og:title" name="og:title" content="th2 docs"><meta data-vue-tag="ssr" hid="og:description" name="og:description" content="Documentation for th2 - the next-generation test automation framework for financial markets"><meta data-vue-tag="ssr" hid="og:image" name="og:image" content="https://th2.dev/og-image.png"><meta data-vue-tag="ssr" hid="robot" name="robot" content="none"><meta data-vue-tag="ssr" hid="og:title" name="og:title" content="How to run a box outside the cluster"><meta data-vue-tag="ssr" hid="description" name="description" content="How to run a box outside the cluster

th2 provides the capability to run external components as part of the th2 Kubernetes cluster. 
Typical use cases of the externalBox feature include:

testing and debugging a new box
running the scripts for specific tasks (including testing activities)
running th2 components that are used on-demand"><meta data-vue-tag="ssr" hid="og:description" name="og:description" content="How to run a box outside the cluster

th2 provides the capability to run external components as part of the th2 Kubernetes cluster. 
Typical use cases of the externalBox feature include:

testing and debugging a new box
running the scripts for specific tasks (including testing activities)
running th2 components that are used on-demand"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.e540bc2f3d52bc007f88118187e3f363.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.e540bc2f3d52bc007f88118187e3f363.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.e540bc2f3d52bc007f88118187e3f363.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.e540bc2f3d52bc007f88118187e3f363.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="152x152" href="/assets/static/favicon.62d22cb.e540bc2f3d52bc007f88118187e3f363.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/assets/static/favicon.1539b60.e540bc2f3d52bc007f88118187e3f363.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="167x167" href="/assets/static/favicon.dc0cdc5.e540bc2f3d52bc007f88118187e3f363.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="180x180" href="/assets/static/favicon.7b22250.e540bc2f3d52bc007f88118187e3f363.png"><link data-vue-tag="ssr" rel="stylesheet" href="/css/materialdesignicons.min.css"><link data-vue-tag="ssr" rel="stylesheet" href="/css/roboto.css"><link data-vue-tag="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-vue-tag="ssr" rel="stylesheet" href="/css/lightTheme.css"><link rel="preload" href="/assets/css/0.styles.2da53807.css" as="style"><link rel="preload" href="/assets/js/app.b145ed99.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--documentation-vue.8ae7a293.js" as="script"><link rel="preload" href="/assets/js/vue-remark--content--docs--cookbook--run-box-outside-cluster--index-md.bfa3ec17.js" as="script"><link rel="prefetch" href="/assets/js/page--src--pages--404-vue.8deceafd.js"><link rel="prefetch" href="/assets/js/page--src--pages--about-vue.4258de6a.js"><link rel="prefetch" href="/assets/js/page--src--pages--fundamentals--th2-net-on-github--dashboard-vue.7aef3dfe.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.8fa8a87d.js"><link rel="prefetch" href="/assets/js/vendors~page--src--pages--fundamentals--th2-net-on-github--dashboard-vue.57cbbdd3.js"><link rel="prefetch" href="/assets/js/vendors~page--src--templates--documentation-vue.1aeccafd.js"><link rel="prefetch" href="/assets/js/vue-remark--content--cache--readmes--readme--check-1-md.cd6c57d0.js"><link rel="prefetch" href="/assets/js/vue-remark--content--cache--readmes--readme--check-2-recon-md.158751a3.js"><link rel="prefetch" href="/assets/js/vue-remark--content--cache--readmes--readme--codec-md.c6d77297.js"><link rel="prefetch" href="/assets/js/vue-remark--content--cache--readmes--readme--conn-md.b9547de3.js"><link rel="prefetch" href="/assets/js/vue-remark--content--cache--readmes--readme--readme-estore-md.d8e9c6cc.js"><link rel="prefetch" href="/assets/js/vue-remark--content--cache--readmes--readme--readme-infra-operator-md.80fd19e3.js"><link rel="prefetch" href="/assets/js/vue-remark--content--cache--readmes--readme--readme-inframgr-md.311c0241.js"><link rel="prefetch" href="/assets/js/vue-remark--content--cache--readmes--readme--readme-mstore-md.375396d2.js"><link rel="prefetch" href="/assets/js/vue-remark--content--cache--readmes--readme--th-2-infra-md.19bff90a.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--cookbook--chain-verification--index-md.52eea75f.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--cookbook--index-md.d5f16733.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--cookbook--quick-setup-md.fef060cb.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--core--index-md.a4a95357.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--core--th-2-estore-md.e59947c3.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--core--th-2-mstore-md.2e1380cf.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--fundamentals--architecture-md.a36ef5b3.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--fundamentals--index-md.0c3fe5f2.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--fundamentals--key-concepts-md.4a073090.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--fundamentals--script--index-md.a4d59f80.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--fundamentals--th-2-common--index-md.5bd95f70.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--fundamentals--th-2-net-on-github-md.91bc70b1.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--getting-started--create-th-2-env-md.cabd6633.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--getting-started--index-md.2b01b00d.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--getting-started--install-th-2--1-base-system-md.bb57e543.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--getting-started--install-th-2--2-infra-schema-md.44ef8bc9.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--getting-started--install-th-2--3-th-2-md.38e7814f.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--getting-started--install-th-2--index-md.c54bcf05.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--getting-started--requirements--hardware-md.eeff106f.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--getting-started--requirements--index-md.3ccfb3fe.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--getting-started--requirements--os-and-network-md.9c0ec77a.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--getting-started--requirements--software-md.4ab01c04.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--infrastructure--index-md.e525a194.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--infrastructure--infra-components--index-md.3fdff2a8.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--infrastructure--infra-components--th-2-infra-mgr-md.d0ff8340.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--infrastructure--infra-components--th-2-infra-operator-md.600c8e05.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--infrastructure--th-2-infra-repository-md.bfadaaf7.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--infrastructure--th-2-infra-schema--links-md.a2190e7a.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--infrastructure--th-2-infra-schema--pins-md.029ddffb.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--infrastructure--th-2-infra-schema-md.cb005e95.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--modules--check-1--checkpoints-md.ac7da989.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--modules--check-1--communication-md.edb1ae6e.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--modules--check-1--configuration-md.a3e45096.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--modules--check-1--index-md.3c850c24.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--modules--check-1--rulerequests-md.799ba267.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--modules--check-1--verification-rulerequests-md.7cefb710.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--modules--check-2-recon--index-md.a07a68a8.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--modules--codec--index-md.1549da9f.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--modules--conn--index-md.91d72bde.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--modules--index-md.2ae057c0.js"><link rel="prefetch" href="/assets/js/vue-remark--content--docs--readme--index-md.225b5268.js"><link rel="stylesheet" href="/assets/css/0.styles.2da53807.css"><style data-vue-tag="vuetify" type="text/css" id="vuetify-theme-stylesheet" nonce="undefined">.v-application a { color: #3f979f; }
.v-application .primary {
  background-color: #3f979f !important;
  border-color: #3f979f !important;
}
.v-application .primary--text {
  color: #3f979f !important;
  caret-color: #3f979f !important;
}
.v-application .primary.lighten-5 {
  background-color: #cfffff !important;
  border-color: #cfffff !important;
}
.v-application .primary--text.text--lighten-5 {
  color: #cfffff !important;
  caret-color: #cfffff !important;
}
.v-application .primary.lighten-4 {
  background-color: #b2ffff !important;
  border-color: #b2ffff !important;
}
.v-application .primary--text.text--lighten-4 {
  color: #b2ffff !important;
  caret-color: #b2ffff !important;
}
.v-application .primary.lighten-3 {
  background-color: #95eaf2 !important;
  border-color: #95eaf2 !important;
}
.v-application .primary--text.text--lighten-3 {
  color: #95eaf2 !important;
  caret-color: #95eaf2 !important;
}
.v-application .primary.lighten-2 {
  background-color: #79ced6 !important;
  border-color: #79ced6 !important;
}
.v-application .primary--text.text--lighten-2 {
  color: #79ced6 !important;
  caret-color: #79ced6 !important;
}
.v-application .primary.lighten-1 {
  background-color: #5cb2ba !important;
  border-color: #5cb2ba !important;
}
.v-application .primary--text.text--lighten-1 {
  color: #5cb2ba !important;
  caret-color: #5cb2ba !important;
}
.v-application .primary.darken-1 {
  background-color: #1d7d85 !important;
  border-color: #1d7d85 !important;
}
.v-application .primary--text.text--darken-1 {
  color: #1d7d85 !important;
  caret-color: #1d7d85 !important;
}
.v-application .primary.darken-2 {
  background-color: #00646c !important;
  border-color: #00646c !important;
}
.v-application .primary--text.text--darken-2 {
  color: #00646c !important;
  caret-color: #00646c !important;
}
.v-application .primary.darken-3 {
  background-color: #004c53 !important;
  border-color: #004c53 !important;
}
.v-application .primary--text.text--darken-3 {
  color: #004c53 !important;
  caret-color: #004c53 !important;
}
.v-application .primary.darken-4 {
  background-color: #00343c !important;
  border-color: #00343c !important;
}
.v-application .primary--text.text--darken-4 {
  color: #00343c !important;
  caret-color: #00343c !important;
}
.v-application .secondary {
  background-color: #1e2736 !important;
  border-color: #1e2736 !important;
}
.v-application .secondary--text {
  color: #1e2736 !important;
  caret-color: #1e2736 !important;
}
.v-application .secondary.lighten-5 {
  background-color: #969fb2 !important;
  border-color: #969fb2 !important;
}
.v-application .secondary--text.text--lighten-5 {
  color: #969fb2 !important;
  caret-color: #969fb2 !important;
}
.v-application .secondary.lighten-4 {
  background-color: #7c8598 !important;
  border-color: #7c8598 !important;
}
.v-application .secondary--text.text--lighten-4 {
  color: #7c8598 !important;
  caret-color: #7c8598 !important;
}
.v-application .secondary.lighten-3 {
  background-color: #636c7e !important;
  border-color: #636c7e !important;
}
.v-application .secondary--text.text--lighten-3 {
  color: #636c7e !important;
  caret-color: #636c7e !important;
}
.v-application .secondary.lighten-2 {
  background-color: #4b5465 !important;
  border-color: #4b5465 !important;
}
.v-application .secondary--text.text--lighten-2 {
  color: #4b5465 !important;
  caret-color: #4b5465 !important;
}
.v-application .secondary.lighten-1 {
  background-color: #343d4d !important;
  border-color: #343d4d !important;
}
.v-application .secondary--text.text--lighten-1 {
  color: #343d4d !important;
  caret-color: #343d4d !important;
}
.v-application .secondary.darken-1 {
  background-color: #081221 !important;
  border-color: #081221 !important;
}
.v-application .secondary--text.text--darken-1 {
  color: #081221 !important;
  caret-color: #081221 !important;
}
.v-application .secondary.darken-2 {
  background-color: #00000a !important;
  border-color: #00000a !important;
}
.v-application .secondary--text.text--darken-2 {
  color: #00000a !important;
  caret-color: #00000a !important;
}
.v-application .secondary.darken-3 {
  background-color: #000000 !important;
  border-color: #000000 !important;
}
.v-application .secondary--text.text--darken-3 {
  color: #000000 !important;
  caret-color: #000000 !important;
}
.v-application .secondary.darken-4 {
  background-color: #000000 !important;
  border-color: #000000 !important;
}
.v-application .secondary--text.text--darken-4 {
  color: #000000 !important;
  caret-color: #000000 !important;
}
.v-application .accent {
  background-color: #616161 !important;
  border-color: #616161 !important;
}
.v-application .accent--text {
  color: #616161 !important;
  caret-color: #616161 !important;
}
.v-application .accent.lighten-5 {
  background-color: #e6e6e6 !important;
  border-color: #e6e6e6 !important;
}
.v-application .accent--text.text--lighten-5 {
  color: #e6e6e6 !important;
  caret-color: #e6e6e6 !important;
}
.v-application .accent.lighten-4 {
  background-color: #c9c9c9 !important;
  border-color: #c9c9c9 !important;
}
.v-application .accent--text.text--lighten-4 {
  color: #c9c9c9 !important;
  caret-color: #c9c9c9 !important;
}
.v-application .accent.lighten-3 {
  background-color: #aeaeae !important;
  border-color: #aeaeae !important;
}
.v-application .accent--text.text--lighten-3 {
  color: #aeaeae !important;
  caret-color: #aeaeae !important;
}
.v-application .accent.lighten-2 {
  background-color: #949494 !important;
  border-color: #949494 !important;
}
.v-application .accent--text.text--lighten-2 {
  color: #949494 !important;
  caret-color: #949494 !important;
}
.v-application .accent.lighten-1 {
  background-color: #7a7a7a !important;
  border-color: #7a7a7a !important;
}
.v-application .accent--text.text--lighten-1 {
  color: #7a7a7a !important;
  caret-color: #7a7a7a !important;
}
.v-application .accent.darken-1 {
  background-color: #494949 !important;
  border-color: #494949 !important;
}
.v-application .accent--text.text--darken-1 {
  color: #494949 !important;
  caret-color: #494949 !important;
}
.v-application .accent.darken-2 {
  background-color: #333333 !important;
  border-color: #333333 !important;
}
.v-application .accent--text.text--darken-2 {
  color: #333333 !important;
  caret-color: #333333 !important;
}
.v-application .accent.darken-3 {
  background-color: #1e1e1e !important;
  border-color: #1e1e1e !important;
}
.v-application .accent--text.text--darken-3 {
  color: #1e1e1e !important;
  caret-color: #1e1e1e !important;
}
.v-application .accent.darken-4 {
  background-color: #040404 !important;
  border-color: #040404 !important;
}
.v-application .accent--text.text--darken-4 {
  color: #040404 !important;
  caret-color: #040404 !important;
}
.v-application .error {
  background-color: #b64c4c !important;
  border-color: #b64c4c !important;
}
.v-application .error--text {
  color: #b64c4c !important;
  caret-color: #b64c4c !important;
}
.v-application .error.lighten-5 {
  background-color: #ffd4cd !important;
  border-color: #ffd4cd !important;
}
.v-application .error--text.text--lighten-5 {
  color: #ffd4cd !important;
  caret-color: #ffd4cd !important;
}
.v-application .error.lighten-4 {
  background-color: #ffb7b1 !important;
  border-color: #ffb7b1 !important;
}
.v-application .error--text.text--lighten-4 {
  color: #ffb7b1 !important;
  caret-color: #ffb7b1 !important;
}
.v-application .error.lighten-3 {
  background-color: #ff9c97 !important;
  border-color: #ff9c97 !important;
}
.v-application .error--text.text--lighten-3 {
  color: #ff9c97 !important;
  caret-color: #ff9c97 !important;
}
.v-application .error.lighten-2 {
  background-color: #f2817d !important;
  border-color: #f2817d !important;
}
.v-application .error--text.text--lighten-2 {
  color: #f2817d !important;
  caret-color: #f2817d !important;
}
.v-application .error.lighten-1 {
  background-color: #d46664 !important;
  border-color: #d46664 !important;
}
.v-application .error--text.text--lighten-1 {
  color: #d46664 !important;
  caret-color: #d46664 !important;
}
.v-application .error.darken-1 {
  background-color: #993235 !important;
  border-color: #993235 !important;
}
.v-application .error--text.text--darken-1 {
  color: #993235 !important;
  caret-color: #993235 !important;
}
.v-application .error.darken-2 {
  background-color: #7c1520 !important;
  border-color: #7c1520 !important;
}
.v-application .error--text.text--darken-2 {
  color: #7c1520 !important;
  caret-color: #7c1520 !important;
}
.v-application .error.darken-3 {
  background-color: #5f000a !important;
  border-color: #5f000a !important;
}
.v-application .error--text.text--darken-3 {
  color: #5f000a !important;
  caret-color: #5f000a !important;
}
.v-application .error.darken-4 {
  background-color: #450000 !important;
  border-color: #450000 !important;
}
.v-application .error--text.text--darken-4 {
  color: #450000 !important;
  caret-color: #450000 !important;
}
.v-application .info {
  background-color: #5293c9 !important;
  border-color: #5293c9 !important;
}
.v-application .info--text {
  color: #5293c9 !important;
  caret-color: #5293c9 !important;
}
.v-application .info.lighten-5 {
  background-color: #e4ffff !important;
  border-color: #e4ffff !important;
}
.v-application .info--text.text--lighten-5 {
  color: #e4ffff !important;
  caret-color: #e4ffff !important;
}
.v-application .info.lighten-4 {
  background-color: #c6ffff !important;
  border-color: #c6ffff !important;
}
.v-application .info--text.text--lighten-4 {
  color: #c6ffff !important;
  caret-color: #c6ffff !important;
}
.v-application .info.lighten-3 {
  background-color: #a9e5ff !important;
  border-color: #a9e5ff !important;
}
.v-application .info--text.text--lighten-3 {
  color: #a9e5ff !important;
  caret-color: #a9e5ff !important;
}
.v-application .info.lighten-2 {
  background-color: #8cc9ff !important;
  border-color: #8cc9ff !important;
}
.v-application .info--text.text--lighten-2 {
  color: #8cc9ff !important;
  caret-color: #8cc9ff !important;
}
.v-application .info.lighten-1 {
  background-color: #6faee5 !important;
  border-color: #6faee5 !important;
}
.v-application .info--text.text--lighten-1 {
  color: #6faee5 !important;
  caret-color: #6faee5 !important;
}
.v-application .info.darken-1 {
  background-color: #3279ad !important;
  border-color: #3279ad !important;
}
.v-application .info--text.text--darken-1 {
  color: #3279ad !important;
  caret-color: #3279ad !important;
}
.v-application .info.darken-2 {
  background-color: #006193 !important;
  border-color: #006193 !important;
}
.v-application .info--text.text--darken-2 {
  color: #006193 !important;
  caret-color: #006193 !important;
}
.v-application .info.darken-3 {
  background-color: #004979 !important;
  border-color: #004979 !important;
}
.v-application .info--text.text--darken-3 {
  color: #004979 !important;
  caret-color: #004979 !important;
}
.v-application .info.darken-4 {
  background-color: #003360 !important;
  border-color: #003360 !important;
}
.v-application .info--text.text--darken-4 {
  color: #003360 !important;
  caret-color: #003360 !important;
}
.v-application .success {
  background-color: #00e676 !important;
  border-color: #00e676 !important;
}
.v-application .success--text {
  color: #00e676 !important;
  caret-color: #00e676 !important;
}
.v-application .success.lighten-5 {
  background-color: #ceffff !important;
  border-color: #ceffff !important;
}
.v-application .success--text.text--lighten-5 {
  color: #ceffff !important;
  caret-color: #ceffff !important;
}
.v-application .success.lighten-4 {
  background-color: #afffe4 !important;
  border-color: #afffe4 !important;
}
.v-application .success--text.text--lighten-4 {
  color: #afffe4 !important;
  caret-color: #afffe4 !important;
}
.v-application .success.lighten-3 {
  background-color: #8fffc8 !important;
  border-color: #8fffc8 !important;
}
.v-application .success--text.text--lighten-3 {
  color: #8fffc8 !important;
  caret-color: #8fffc8 !important;
}
.v-application .success.lighten-2 {
  background-color: #6dffac !important;
  border-color: #6dffac !important;
}
.v-application .success--text.text--lighten-2 {
  color: #6dffac !important;
  caret-color: #6dffac !important;
}
.v-application .success.lighten-1 {
  background-color: #47ff91 !important;
  border-color: #47ff91 !important;
}
.v-application .success--text.text--lighten-1 {
  color: #47ff91 !important;
  caret-color: #47ff91 !important;
}
.v-application .success.darken-1 {
  background-color: #00c95c !important;
  border-color: #00c95c !important;
}
.v-application .success--text.text--darken-1 {
  color: #00c95c !important;
  caret-color: #00c95c !important;
}
.v-application .success.darken-2 {
  background-color: #00ad43 !important;
  border-color: #00ad43 !important;
}
.v-application .success--text.text--darken-2 {
  color: #00ad43 !important;
  caret-color: #00ad43 !important;
}
.v-application .success.darken-3 {
  background-color: #009129 !important;
  border-color: #009129 !important;
}
.v-application .success--text.text--darken-3 {
  color: #009129 !important;
  caret-color: #009129 !important;
}
.v-application .success.darken-4 {
  background-color: #00760d !important;
  border-color: #00760d !important;
}
.v-application .success--text.text--darken-4 {
  color: #00760d !important;
  caret-color: #00760d !important;
}
.v-application .warning {
  background-color: #ffc107 !important;
  border-color: #ffc107 !important;
}
.v-application .warning--text {
  color: #ffc107 !important;
  caret-color: #ffc107 !important;
}
.v-application .warning.lighten-5 {
  background-color: #ffffae !important;
  border-color: #ffffae !important;
}
.v-application .warning--text.text--lighten-5 {
  color: #ffffae !important;
  caret-color: #ffffae !important;
}
.v-application .warning.lighten-4 {
  background-color: #ffff91 !important;
  border-color: #ffff91 !important;
}
.v-application .warning--text.text--lighten-4 {
  color: #ffff91 !important;
  caret-color: #ffff91 !important;
}
.v-application .warning.lighten-3 {
  background-color: #ffff74 !important;
  border-color: #ffff74 !important;
}
.v-application .warning--text.text--lighten-3 {
  color: #ffff74 !important;
  caret-color: #ffff74 !important;
}
.v-application .warning.lighten-2 {
  background-color: #fff956 !important;
  border-color: #fff956 !important;
}
.v-application .warning--text.text--lighten-2 {
  color: #fff956 !important;
  caret-color: #fff956 !important;
}
.v-application .warning.lighten-1 {
  background-color: #ffdd37 !important;
  border-color: #ffdd37 !important;
}
.v-application .warning--text.text--lighten-1 {
  color: #ffdd37 !important;
  caret-color: #ffdd37 !important;
}
.v-application .warning.darken-1 {
  background-color: #e0a600 !important;
  border-color: #e0a600 !important;
}
.v-application .warning--text.text--darken-1 {
  color: #e0a600 !important;
  caret-color: #e0a600 !important;
}
.v-application .warning.darken-2 {
  background-color: #c18c00 !important;
  border-color: #c18c00 !important;
}
.v-application .warning--text.text--darken-2 {
  color: #c18c00 !important;
  caret-color: #c18c00 !important;
}
.v-application .warning.darken-3 {
  background-color: #a27300 !important;
  border-color: #a27300 !important;
}
.v-application .warning--text.text--darken-3 {
  color: #a27300 !important;
  caret-color: #a27300 !important;
}
.v-application .warning.darken-4 {
  background-color: #855a00 !important;
  border-color: #855a00 !important;
}
.v-application .warning--text.text--darken-4 {
  color: #855a00 !important;
  caret-color: #855a00 !important;
}</style><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <div data-app="true" data-server-rendered="true" id="app" id="app" class="v-application v-application--is-ltr theme--light"><div class="v-application--wrap"><div data-v-7b23e68f><header class="top-layout v-sheet theme--light v-toolbar v-app-bar v-app-bar--fixed secondary" style="height:56px;margin-top:0px;transform:translateY(0px);left:0px;right:0px;" data-v-7b23e68f><div class="v-toolbar__content" style="height:56px;"><div class="header-container" data-v-7b23e68f><a href="/" class="logo-container active" data-v-7b23e68f><img src="/assets/img/Th2Logo_full_white.37da6040.png" data-v-7b23e68f></a><div class="search-container" data-v-e54dafa2 data-v-7b23e68f><button class="search-btn" data-v-e54dafa2><i aria-hidden="true" class="v-icon notranslate mdi mdi-magnify theme--dark" data-v-e54dafa2></i><span data-v-e54dafa2>
    Search
  </span></button><div class="v-dialog__container" data-v-e54dafa2><!----></div></div><div class="header-btns" data-v-7b23e68f><a href="https://github.com/th2-net/th2-docs" target="_blank" class="v-btn v-btn--icon v-btn--round theme--dark v-size--default" data-v-7b23e68f><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-github theme--dark" data-v-7b23e68f></i></span></a><button type="button" class="v-btn v-btn--icon v-btn--round theme--dark v-size--default" data-v-a8cf542a data-v-7b23e68f><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-brightness-5 theme--dark" data-v-a8cf542a></i></span></button><button type="button" class="v-btn v-btn--icon v-btn--round theme--dark v-size--default" data-v-7b23e68f><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-menu theme--dark" data-v-7b23e68f></i></span></button></div></div></div></header><aside class="layout__aside--left--sm pt-16 px-5 v-navigation-drawer v-navigation-drawer--close v-navigation-drawer--fixed v-navigation-drawer--is-mobile theme--light" style="height:100%;top:0px;transform:translateX(-100%);width:90vw;min-width:300px;" data-v-7b23e68f><div class="v-navigation-drawer__content"><aside class="pt-5 content-tree-panel pl-3" data-v-34f442ea data-v-7b23e68f><div class="sticky-tree px-3 ml-n3" data-v-34f442ea><!----><div class="py-2" data-v-34f442ea><a href="/" class="main-section" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea><span data-v-34f442ea> Home </span></div></a></div><div class="py-2" data-v-34f442ea><a href="/getting-started/" class="main-section" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea><span data-v-34f442ea>
              Getting started
            </span></div></a><div class="v-treeview ml-n3 v-treeview--dense theme--light" data-v-34f442ea><div aria-expanded="false" class="v-treeview-node"><div class="v-treeview-node__root"><button type="button" class="v-icon notranslate v-treeview-node__toggle v-icon--link mdi mdi-menu-down theme--light"></button><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/getting-started/requirements/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								System requirements
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node"><div class="v-treeview-node__root"><button type="button" class="v-icon notranslate v-treeview-node__toggle v-icon--link mdi mdi-menu-down theme--light"></button><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/getting-started/install-th2/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								Install th2
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/getting-started/create-th2-env/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								Create th2 environment
							</div></a></div></div></div></div></div></div><div class="py-2" data-v-34f442ea><a href="/fundamentals/" class="main-section" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea><span data-v-34f442ea>
              Fundamentals
            </span></div></a><div class="v-treeview ml-n3 v-treeview--dense theme--light" data-v-34f442ea><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/fundamentals/architecture/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								Architecture
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node"><div class="v-treeview-node__root"><button type="button" class="v-icon notranslate v-treeview-node__toggle v-icon--link mdi mdi-menu-down theme--light"></button><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/fundamentals/th2-net-on-github/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								th2-net on GitHub
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/fundamentals/th2-common/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								th2-common
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/fundamentals/key-concepts/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								Key concepts
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/fundamentals/script/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								Script
							</div></a></div></div></div></div></div></div><div class="py-2" data-v-34f442ea><a href="/infrastructure/" class="main-section" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea><span data-v-34f442ea>
              Infrastructure
            </span></div></a><div class="v-treeview ml-n3 v-treeview--dense theme--light" data-v-34f442ea><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/infrastructure/th2-infra-repository/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								th2-infra
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node"><div class="v-treeview-node__root"><button type="button" class="v-icon notranslate v-treeview-node__toggle v-icon--link mdi mdi-menu-down theme--light"></button><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/infrastructure/th2-infra-schema/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								th2-infra-schema
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node"><div class="v-treeview-node__root"><button type="button" class="v-icon notranslate v-treeview-node__toggle v-icon--link mdi mdi-menu-down theme--light"></button><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/infrastructure/infra-components/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								th2-infra components
							</div></a></div></div></div></div></div></div><div class="py-2" data-v-34f442ea><a href="/core/" class="main-section" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea><span data-v-34f442ea>
              Core
            </span></div></a><div class="v-treeview ml-n3 v-treeview--dense theme--light" data-v-34f442ea><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/core/th2-estore/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								th2-estore
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/core/th2-mstore/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								th2-mstore
							</div></a></div></div></div></div></div></div><div class="py-2" data-v-34f442ea><a href="/modules/" class="main-section" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea><span data-v-34f442ea>
              Modules
            </span></div></a><div class="v-treeview ml-n3 v-treeview--dense theme--light" data-v-34f442ea><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/modules/conn/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								conn
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/modules/codec/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								codec
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node"><div class="v-treeview-node__root"><button type="button" class="v-icon notranslate v-treeview-node__toggle v-icon--link mdi mdi-menu-down theme--light"></button><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/modules/check1/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								check1
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/modules/check2-recon/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								check2-recon
							</div></a></div></div></div></div></div></div><div class="py-2" data-v-34f442ea><a href="/cookbook/" class="main-section" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea><span data-v-34f442ea>
              ðŸ“– Cookbook
            </span></div></a><div class="v-treeview ml-n3 v-treeview--dense theme--light" data-v-34f442ea><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/cookbook/quick-setup/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								Quick th2 setup
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/cookbook/run-box-outside-cluster/" aria-current="page" class="active--exact active nuxt-link-exact-active" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								How to run a box outside the cluster
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/cookbook/chain-verification/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								Chain Verification
							</div></a></div></div></div></div></div></div><div class="py-2" data-v-34f442ea><a href="/readme/" class="main-section" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea><span data-v-34f442ea>
              Readme Files
            </span></div></a><div class="v-treeview ml-n3 v-treeview--dense theme--light" data-v-34f442ea><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/th2-infra/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								th2 infra
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/readme-inframgr/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								infra-mgr
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/readme-infra-operator/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								infra-operator
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/readme-mstore/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								mstore
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/readme-estore/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								estore
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/check1/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								check1
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/check2recon/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								check2-recon
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/codec/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								codec
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/conn/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								conn
							</div></a></div></div></div></div></div></div></div></aside></div><div class="v-navigation-drawer__border"></div></aside><main class="v-main" style="padding-top:1568px;padding-right:0px;padding-bottom:0px;padding-left:0px;" data-v-7b23e68f><div class="v-main__wrap"><div class="layout--full" data-v-7b23e68f><aside class="pt-5 content-tree-panel layout__aside--left--lg" data-v-34f442ea data-v-7b23e68f><div class="sticky-tree px-3 ml-n3" data-v-34f442ea><!----><div class="py-2" data-v-34f442ea><a href="/" class="main-section" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea><span data-v-34f442ea> Home </span></div></a></div><div class="py-2" data-v-34f442ea><a href="/getting-started/" class="main-section" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea><span data-v-34f442ea>
              Getting started
            </span></div></a><div class="v-treeview ml-n3 v-treeview--dense theme--light" data-v-34f442ea><div aria-expanded="false" class="v-treeview-node"><div class="v-treeview-node__root"><button type="button" class="v-icon notranslate v-treeview-node__toggle v-icon--link mdi mdi-menu-down theme--light"></button><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/getting-started/requirements/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								System requirements
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node"><div class="v-treeview-node__root"><button type="button" class="v-icon notranslate v-treeview-node__toggle v-icon--link mdi mdi-menu-down theme--light"></button><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/getting-started/install-th2/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								Install th2
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/getting-started/create-th2-env/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								Create th2 environment
							</div></a></div></div></div></div></div></div><div class="py-2" data-v-34f442ea><a href="/fundamentals/" class="main-section" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea><span data-v-34f442ea>
              Fundamentals
            </span></div></a><div class="v-treeview ml-n3 v-treeview--dense theme--light" data-v-34f442ea><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/fundamentals/architecture/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								Architecture
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node"><div class="v-treeview-node__root"><button type="button" class="v-icon notranslate v-treeview-node__toggle v-icon--link mdi mdi-menu-down theme--light"></button><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/fundamentals/th2-net-on-github/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								th2-net on GitHub
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/fundamentals/th2-common/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								th2-common
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/fundamentals/key-concepts/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								Key concepts
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/fundamentals/script/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								Script
							</div></a></div></div></div></div></div></div><div class="py-2" data-v-34f442ea><a href="/infrastructure/" class="main-section" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea><span data-v-34f442ea>
              Infrastructure
            </span></div></a><div class="v-treeview ml-n3 v-treeview--dense theme--light" data-v-34f442ea><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/infrastructure/th2-infra-repository/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								th2-infra
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node"><div class="v-treeview-node__root"><button type="button" class="v-icon notranslate v-treeview-node__toggle v-icon--link mdi mdi-menu-down theme--light"></button><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/infrastructure/th2-infra-schema/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								th2-infra-schema
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node"><div class="v-treeview-node__root"><button type="button" class="v-icon notranslate v-treeview-node__toggle v-icon--link mdi mdi-menu-down theme--light"></button><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/infrastructure/infra-components/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								th2-infra components
							</div></a></div></div></div></div></div></div><div class="py-2" data-v-34f442ea><a href="/core/" class="main-section" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea><span data-v-34f442ea>
              Core
            </span></div></a><div class="v-treeview ml-n3 v-treeview--dense theme--light" data-v-34f442ea><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/core/th2-estore/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								th2-estore
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/core/th2-mstore/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								th2-mstore
							</div></a></div></div></div></div></div></div><div class="py-2" data-v-34f442ea><a href="/modules/" class="main-section" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea><span data-v-34f442ea>
              Modules
            </span></div></a><div class="v-treeview ml-n3 v-treeview--dense theme--light" data-v-34f442ea><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/modules/conn/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								conn
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/modules/codec/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								codec
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node"><div class="v-treeview-node__root"><button type="button" class="v-icon notranslate v-treeview-node__toggle v-icon--link mdi mdi-menu-down theme--light"></button><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/modules/check1/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								check1
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/modules/check2-recon/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								check2-recon
							</div></a></div></div></div></div></div></div><div class="py-2" data-v-34f442ea><a href="/cookbook/" class="main-section" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea><span data-v-34f442ea>
              ðŸ“– Cookbook
            </span></div></a><div class="v-treeview ml-n3 v-treeview--dense theme--light" data-v-34f442ea><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/cookbook/quick-setup/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								Quick th2 setup
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/cookbook/run-box-outside-cluster/" aria-current="page" class="active--exact active nuxt-link-exact-active" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								How to run a box outside the cluster
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/cookbook/chain-verification/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								Chain Verification
							</div></a></div></div></div></div></div></div><div class="py-2" data-v-34f442ea><a href="/readme/" class="main-section" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea><span data-v-34f442ea>
              Readme Files
            </span></div></a><div class="v-treeview ml-n3 v-treeview--dense theme--light" data-v-34f442ea><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/th2-infra/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								th2 infra
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/readme-inframgr/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								infra-mgr
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/readme-infra-operator/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								infra-operator
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/readme-mstore/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								mstore
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/readme-estore/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								estore
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/check1/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								check1
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/check2recon/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								check2-recon
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/codec/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								codec
							</div></a></div></div></div></div><div aria-expanded="false" class="v-treeview-node v-treeview-node--leaf"><div class="v-treeview-node__root"><div class="v-treeview-node__level"></div><div class="v-treeview-node__content"><div class="v-treeview-node__label"><a href="/readme/conn/" data-v-34f442ea><div class="tree__path-name" data-v-34f442ea>
								conn
							</div></a></div></div></div></div></div></div></div></aside><div class="layout__doc-page"><div class="container layout__main space-bottom"><article><!----><!----><div class="doc-article"><h1 id="how-to-run-a-box-outside-the-cluster"><a href="#how-to-run-a-box-outside-the-cluster" aria-hidden="true">#</a>How to run a box outside the cluster</h1><p>th2 provides the capability to run external components as part of the th2 Kubernetes cluster. 
Typical use cases of the <code>externalBox</code> feature include:</p><ul><li>testing and debugging a new box</li><li>running the scripts for specific tasks (including testing activities)</li><li>running th2 components that are used on-demand</li></ul><h2 id="prerequisites"><a href="#prerequisites" aria-hidden="true">#</a>Prerequisites</h2><p>1) A th2 cluster and a box with the <code>externalBox</code> option specified in its config.</p><p>2) Kubectl installed and connected to the Kubernetes cluster (not required if you are defining the config for the <code>externalBox</code> manually).</p><p>3) <strong>common</strong> library used in the external componentâ€™s code:</p><ul><li>Java / Kotlin â€“ <a href="https://github.com/th2-net/th2-common-j" target="_blank" rel="nofollow noopener noreferrer">th2-common-j</a>  version 3.9.1 and above.</li><li>Python â€“ <a href="https://github.com/th2-net/th2-common-py" target="_blank" rel="nofollow noopener noreferrer">th2-common-py</a>.</li></ul><h2 id="running-external-box"><a href="#running-external-box" aria-hidden="true">#</a>Running external box</h2><p>To run an external box in your th2 Kubernetes cluster, follow the steps as per the algorithm below.</p><p><img alt="message_chain_with_two_checkpoints" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 2560 1856' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-5c25bd8980f5cef95e056ffd0d9f1d7c'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-5c25bd8980f5cef95e056ffd0d9f1d7c)' width='2560' height='1856' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAuCAYAAACYlx/0AAAACXBIWXMAAAsSAAALEgHS3X78AAANAUlEQVRo3uWaC1CV1RbHv%2b8cHvE6HA5KHuRer2AeHCluNj5uiN0cJ8cZp4eTmY0zZmZlpmbjtdGCTFOvt0bNJB%2bMcDNT4AgiZpiJJqBhWalpgqCRykvQfEZleu5v7b7vDNdQyczC9syavb/93muv9V9r7XM07TqnMWPGaB6PR5fy%2b%2b%2b/v4Cy5913350u3xQtbdq00W7olJiY6GVAQUFBqjAgPz//PyYDQkJCboyDbtiwQeXz58%2bXg1kvIh9p69Wrl/3pp58e2KNHj5uoa66f1eVyqXkmTpzY%2bpiQkpLSkm5XvPL4%2bPjWd3i3263EfO7cufa9e/curqysXHXgwIGMI0eOZH711VeZ5eXlGVB2SUlJ4aFDh1Td119/rejw4cMZUM7%2b/fvnh4aG%2bss8zzzzTOtiwKZNmyySr1q1KrqhocFz7tw5T21trefEiROeH374QeWnTp3yXLhwwXP69GnPN998o8qNjY3q%2b8cff/RUVVVdePzxx8NlnuTkZL1VHPzNN99UeWpqqtrw66%2b/Hvbll1/O45aXcaNpUDrSkM5Np1dUVPwX6VjB7acdPHgw3SQkJY265bTN7t%2b/f4Dgw9133y0YoT3wwAPanzLJ4VtFmj17tlnUt23bFl9WVtabm%2b6NFCRy%2b73R%2b97kidx0wtatW/si2qONOtVHykKMS0QSepeWliYWFhbGmUy48847/9gMWL9%2bvRL9V199NZxDHjp27JgHcfYcPXrUAwB6ADeVV1dXe2pqalRZCH1XGGF%2bSzvjLwg2MGYvUyownDx58u93OG5C5R9%2b%2bKH2xRdfaOixxkY1bkvbtWuXhp5rxcXFigFLly69me8TAnTovAK2uro6dTjJjx8/7hHmyLcwQg4qVF9fr9oFJBnvOXnypDDnsK%2bvb6DM%2b9JLL7UOVejSpYsvTBkNk6ZBSYhzMoxoSkmI%2blT6zOKgSdx2spDZLmUZB03fuXPnSFMFVq5cqX377beqfP78eS82XDeM%2bD3BqGfPnvqAAQP0wMBA3d/fXw8ICNDDwsJUm91u/%2b03sGLFCqvkH3/8ccInn3xyYN%2b%2bfWXcYhkAVvb555%2bXoRaSl0KV9NnMhv3uv/9%2bv3Xr1jnWrFljf%2bedd%2byLFy%2b2L1y40J6VlRU6fvz4iLi4uERu1Z6Tk6PqpV36ZWRk2PPy8hxdu3b1u9K%2bAEb9ut4%2beT8JYsRZAaU9e/bsUTkMUHor6bvvvisvKirqAZP2UH989%2b7dtZTrsAh1qIMiykepPwGG1DGHt1764QPUUnecPjthVjuwJgLGZlKf89FHH6367LPPsj799NP1zD3oekimAwpD7ETebAQwUVu2bOmNt5dAsJPwyiuvJCxatChhyZIlCdxeAhvs88Ybb8Sjv4XCDEF%2b0xpwWA%2bH9NCmkB7pUd%2bYQAWWHFiRgKC0S2LMKtZtQ4A1jhB6PNIyjhB6LBIyEYnpQ1sgqiB7tBsUZuQSW990LRhwM%2bQrRLwuubUlg9hsIlaghjM04gqfhgFnuLGzctscroqD1xiSUY0EVcMoKZ%2bRfrjFp0WQsAyVa9eu7Xa5dTp16uRn7q8JyR5DDfrVKaw5dbgCKb0cPnx4xIwZMzpPnz495u233%2b5EkBS9cePGEUjJJGgi5aQdO3ZMwCmahOM0Kjs7u9OyZctipk6dGjNz5szODz/8cHiT9fRm6JKqGhEREWAjSfnll1/WN2/erH/wwQc60qkZcUqLGRDe0o4Wi0Xr1u2nCzt79qyluT4cdgYgmo95ywEs11DOJl8HZsxtrj9%2bgJqnb9%2b%2bP2uzWn8SRgC0uaE%2bpgP1a1P41QLmoEGDgsaNGxf65JNP2p577rlQbiJ0wYIFAenp6X533XWXLSQkpOeLL77oD4b4jxkzJuCFF14IJQ8dPXq0bezYsXaCn8ArgZzZRuAUhNqFrF692kadf0JCQmesSDfKflgwG/UhRJfe9wck5LdhgIia5Ji3SKzCDvS4AhAsxcsrQ/fLcHkVcbPl6PshPEEp74dUO32F9jHuILiw5dlnn1UqmJaW9jNzhxirutdeey2KeXYhSeXbt28vBVtKxVSjXpVQKXVlWI199Klkf/%2bUMYCrRYPzGh2UK4tIesnHx6dZBpjtmCGVs5CGRfDexPLly6VNiex7773n8lyUxBqY7wLi9kou7q64w%2bICS1vThNd3btasWVFNH1kkmXoMQFqM767mGHl7kHXEqsh8kmOWvXPCpGEyhvjEqgFCGgOsjY2NVnx9K06LFTCywjFrbm6uFR/e0qFDBwfgYcXsWbHFVsRMtcE09W7Hxr26DtcF/dVG33rrrbaYuXXc6jZushC/v0gIqSjiW/Jiybn5Qsyit97oV0h9CY6We9SoUSEX6znBlmasYQZfkUjThoaGhq2sx1EKiwjMivLz84ukDBOKaCtk/u2c8R/GZVpaKtXtWtKJgMVbhsstndvWkk6ZmZnNmdkWbeuyrbicMQQeGVAmN58BEmdyi5moRSZmKgN9ycET2yJtfGeKNwaKZ1Iv/VbC0VwkYZo5H9wV0Ve3wjgH49KgHPpnwRQ3ZTfj3SUlJVlIVA6SVIS0ubkNN1GmG4l0s4YbtcqinIs6pUyZMiWoqdhLmjdvnsoB2AD2uohbzmZ8Fv3dso7snX2sxwXfJPsU75FcrcG6spcs2qIFsAaYuiG6KPoisbt4YRKjm/G5GbuLbokXJ16dhLiS0OUjpnME0Agp0YKZLtFz0T8Jf%2bUtUN78pE5cZplfvEQpy5pSL%2b%2bH6L2aW75Z9xze3l%2bMUNgrso899phiMtYiUnBE5jVDbNmbiSmSy37NdwiZX/oLTsC0e%2bTGerJQ3ZkzZ2rZSA03VMsBaiXnZsQfl%2b%2bj4ptzIFUnJN9sshpP7yTSIz8C6OabAaQb0iXIXM7m6vEJauhfCzNkHTUH7q/kdUhQFTdUxT6q2FgVfavod4QyVfU7cLUvGeoNGzbMxqF3w9w6xh0BlKuKi4uruOEqpKoaSauDaoW47FqYUvv999/XwIR6nK7uGnbSgg/fbunSpU78eCdi58TndiIqTgY4QdlIxKwruRPR8ZJ8A0pOQKg9JshuWoH77rtPkZnmzJnTlhuMTElJcZI7EWMnaO6Ewe3w%2bKK4yb8nJSV1Tk5Ojn3iiSdceI6ukSNHuh599FEXbV0GDx4cLb8d%2bPn52XCybDg%2boZDNJMEQfI0YxsSOGDHC9fzzz7vwImOZ7xbmiEd9YnGvI8CLSNZ04n84ZS%2boUDvGtRgEA6/UgRu4WidLN9THchH5GPW%2bt912W2BsbKxQkMPhaMt3QMeOHQOjo6MDpc0AOp9m5rhyzCI/ViLaujxxXSbFXMYLsyABuikB3LIi8%2besgoICHfGWB9L/I4BQRyyvJo6P%2baUeKVGjDgB615b9ALK6AlLxAyRNmzYtAL1eCDCthrIADDfAkQWgrGbwZr6zAEa3UZ9Jng/iDjeZcC38bVTA6%2bKDPf9mvTyxHmI5xFKARdm4s4WC9KihshjUyb7y0P2Z5oER/ZYvymS64cC0ZbILJpqKRTBJvCnTWxNkFvSWBJhlGItarwUDTFe3e/fuwYCUegyQ/Qhimw%2bpYi1kP5KLpTh//rzpYVYZaqC81F/y0qsWRWxtxOR7OOQpDlbPDTfA2QbyY9z4MRatN%2brrYUAN3%2bdAcZPr1/pJygfJ20QscAbGi4WqR0XrkYZ6EP44e25grw2gfgNMOcrhz%2bIxFpiWiH4tX%2bnee%2b/1RlN4WwG4jyFYgGAsQTCOQjAucHC/fv2iJ02aFI5P7gBhHaC2A3QN79WrlzgovsQN8iBxSdJ13Q8vsVlirL%2bQUfYLCgpSYwYOHBj61FNPtRk6dKhjyJAhDvTVwfptQPq/sd8gcCt48uTJweBPMFYshCjzJlMF7rjjjmv%2bJBZo/IwdfBGJabI3eYpqltq3bx%2bGWDvi4uLC4uPjHbfeeqs8djrYaGhkZGQHl8vV9vbbb7dLvdknKipK2myGq2yuF3K5%2bP6q3gVBSJUTcqqoUH7kwG4qwsFRKP4bv7VKnBH0Swbgg%2bjyI4y5T9kzIOltx8H5Y/w4gi9uMQB2CDiyEczIraioyCPPw%2bKspZzLxreA4Bthdi56vZZ61c7BcsGajeh8f5kDxLdorSlhprzWAV9c/RlKfHKxJhJnGL/9qTpBdbEsguxmDC8vxZJg0pRraWmuWyIO1/Dn1aa50TmeZpIcWg7KbatgpbmEP/%2bvVskA%2bX8QfoVuqMIt2OZH%2bH6QfDD5YPDmIRjzIPo8AkR/BDP3IPUPSZuQ9IOGYon%2bKnMQMOlaa0yIc0tigcsmAbxWl1JTUzVib1UW/xvPzkrobAUDrDg2VqyPb5MfXZQVIDbwwbtTfaQvTo4Vn0Q33u%2b0GyYRBqucENYPhysDU%2bt97LvE%2b/6NlfA2LYY9TzBffvDmOhk2XL/hGSBP8WbUhx8wXX4mMytwbbU/RZowYcLP6vr06XPd9/E/WYyWjWLRB04AAAAASUVORK5CYII=' /%3e%3c/svg%3e" width="2560" data-src="/assets/static/external_box.42db587.4db5df91a09122be688f2b70ef8c94d3.png" data-srcset="/assets/static/external_box.82a2fbd.4db5df91a09122be688f2b70ef8c94d3.png 480w, /assets/static/external_box.cbab2cf.4db5df91a09122be688f2b70ef8c94d3.png 1024w, /assets/static/external_box.2665e34.4db5df91a09122be688f2b70ef8c94d3.png 1920w, /assets/static/external_box.42db587.4db5df91a09122be688f2b70ef8c94d3.png 2560w" data-sizes="(max-width: 2560px) 100vw, 2560px" class="g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/external_box.42db587.4db5df91a09122be688f2b70ef8c94d3.png" class="g-image g-image--loaded" width="2560" alt="message_chain_with_two_checkpoints"></noscript></p><h2 id="1-configure-th2box-custom-resource"><a href="#1-configure-th2box-custom-resource" aria-hidden="true">#</a>1. Configure th2box custom resource</h2><p>With <code>externalBox</code>, you can configure boxes that will run outside Kubernetes cluster. 
To do that, add the <code>externalBox</code> details into the <code>extended-settings</code> section of the componentâ€™s <div class="v-menu"><span role="button" aria-haspopup="true" aria-expanded="false" class="term">custom resource</span><div role="menu" class="v-menu__content theme--light " style="max-height:auto;min-width:0px;max-width:auto;top:12px;left:0px;transform-origin:top left;z-index:0;display:none;"><div class="v-card v-sheet theme--light" style="min-width:200px;max-width:400px;"><div class="v-card__title">Custom resource</div><div class="v-card__text"><div><p><em>Custom resources</em> are extensions of the Kubernetes API. It is not necessarily available in a default Kubernetes installation. It represents a customization of a particular Kubernetes installation. However, many core Kubernetes functions are now built using CRs, making Kubernetes more modular.</p>
<p>You can find more information about <em>Custom resources</em> <a href="https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/" target="_blank" rel="nofollow noopener noreferrer">here</a>.</p>
</div></div></div></div></div>.</p><p>First, add <code>externalBox.enabled: true</code> to the existing CR box. 
Then, provide the address for the RabbitMQ server using the <code>address</code> field. 
Finally, specify the internal mapping for the ports in the <code>endpoints</code> list by giving a <code>name</code> to the port and providing its number as a <code>targetPort</code> value.</p><div role="alert" class="v-alert my-3 v-sheet theme--light v-alert--border v-alert--text v-alert--border-left red--text text--darken-4" data-v-e2b44c62><div class="v-alert__wrapper"><i aria-hidden="true" class="v-icon notranslate v-alert__icon mdi mdi-alert theme--light red--text text--darken-4"></i><div class="v-alert__content"><p>If an external box has a pin with the <code>subscribe</code> attribute and there is a box in Kubernetes that publishes on your pin (e.g. the <strong>act</strong> component has the <code>from_codec</code> pin receiving messages from the <strong>codec</strong> via RabbitMQ), then, upon closing your external application, the messages will be accumulated in the queue, which can overfill the cluster memory. 
To prevent that, configure the queue limit on your external box pins.</p></div><div class="v-alert__border v-alert__border--left"></div></div></div><p>The full list of <code>externalBox</code> parameters can be found in the example below:</p><p><code>box_config.yaml</code></p><div class="remark-highlight"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> th2.exactpro.com/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Th2Box
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> box_name
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">image-name</span><span class="token punctuation">:</span> some_image_name
  <span class="token key atrule">image-version</span><span class="token punctuation">:</span> some_image_version
  <span class="token key atrule">type</span><span class="token punctuation">:</span> th2<span class="token punctuation">-</span>box<span class="token punctuation">-</span>type
  <span class="token key atrule">custom-config</span><span class="token punctuation">:</span>
      <span class="token comment"># Depends on specific th2 component</span>
  <span class="token key atrule">pins</span><span class="token punctuation">:</span>
      <span class="token comment"># Depends on specific th2 component</span>
  <span class="token key atrule">extended-settings</span><span class="token punctuation">:</span>
    <span class="token key atrule">externalBox</span><span class="token punctuation">:</span> 
      <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">address</span><span class="token punctuation">:</span> &lt;e.g. IP<span class="token punctuation">&gt;</span>
      <span class="token key atrule">endpoints</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">'grpc'</span>
          <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">8080</span>
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><h2 id="2-create-a-box-with-th2-common-library"><a href="#2-create-a-box-with-th2-common-library" aria-hidden="true">#</a>2. Create a box with th2-common library</h2><p><code>th2-common</code> is a special library that implements an API for th2 components. 
It is available for two programming languages: Java/Kotlin â€“ <a href="https://github.com/th2-net/th2-common-j" target="_blank" rel="nofollow noopener noreferrer">th2-common-j</a>  and Python â€“ <a href="https://github.com/th2-net/th2-common-py" target="_blank" rel="nofollow noopener noreferrer">th2-common-py</a>.</p><div role="alert" class="v-alert my-3 v-sheet theme--light v-alert--border v-alert--text v-alert--border-left orange--text text--darken-3" data-v-e2b44c62><div class="v-alert__wrapper"><i aria-hidden="true" class="v-icon notranslate v-alert__icon mdi mdi-alert-circle theme--light orange--text text--darken-3"></i><div class="v-alert__content"><p><code>th2-common</code> must be implemented in the module for running it as an <em>external box</em>.</p></div><div class="v-alert__border v-alert__border--left"></div></div></div><p>You can create your own module or download a ready-made one.
Examples of the repositories with <code>th2-common</code> implemented:</p><ul><li>Java/Kotlin â€“ <a href="https://github.com/th2-net/th2-sim-template/" target="_blank" rel="nofollow noopener noreferrer">th2-sim-template</a></li><li>Python â€“ <a href="https://github.com/th2-net/th2-demo-script/" target="_blank" rel="nofollow noopener noreferrer">th2-demo-script</a></li></ul><p>More details about <code>th2-common</code> can be found <a href="../../fundamentals/th2-common/">here</a></p><h2 id="21-provide-connection-configs-for-th2-common-library"><a href="#21-provide-connection-configs-for-th2-common-library" aria-hidden="true">#</a>2.1. Provide connection configs for th2-common library</h2><p>To link your <em>external box</em> with the boxes inside the th2 cluster, <code>th2-common</code> needs connection configs. 
There are three options to provide these configs â€“ manually, using kubectl, or using arguments in a startup command.</p><h3 id="211-providing-connection-configs-via-kubectl"><a href="#211-providing-connection-configs-via-kubectl" aria-hidden="true">#</a>2.1.1. Providing connection configs via kubectl</h3><div role="alert" class="v-alert my-3 v-sheet theme--light v-alert--border v-alert--text v-alert--border-left orange--text text--darken-3" data-v-e2b44c62><div class="v-alert__wrapper"><i aria-hidden="true" class="v-icon notranslate v-alert__icon mdi mdi-alert-circle theme--light orange--text text--darken-3"></i><div class="v-alert__content"><p>To provide configs using this method, you need to have kubectl installed on your machine.</p></div><div class="v-alert__border v-alert__border--left"></div></div></div><p>1) Get your <a href="https://kubernetes.io/docs/reference/access-authn-authz/service-accounts-admin/" target="_blank" rel="nofollow noopener noreferrer">service account token</a> (you can find details in <a href="https://kubernetes.io/docs/reference/access-authn-authz/service-accounts-admin/" target="_blank" rel="nofollow noopener noreferrer">Managing Service Accounts page</a>).</p><p>2) Configure Kubernetes context using kubectl (you can find detailed information in <a href="https://kubernetes.io/docs/tasks/access-application-cluster/configure-access-multiple-clusters/" target="_blank" rel="nofollow noopener noreferrer">Kubernetes documentation</a>).</p><p>To specify the config details, use the following CLI commands:</p><div class="remark-highlight"><pre class="language-shell"><code class="language-shell">kubectl config set-credentials <span class="token operator">&lt;</span>service-account-name<span class="token operator">&gt;</span> --token<span class="token operator">=</span><span class="token operator">&lt;</span>token<span class="token operator">&gt;</span>
kubectl config set-cluster <span class="token operator">&lt;</span>cluster-name<span class="token operator">&gt;</span> --server<span class="token operator">=</span>https://5.6.7.8 --insecure-skip-tls-verify
kubectl config set-context <span class="token operator">&lt;</span>context-name<span class="token operator">&gt;</span> --cluster<span class="token operator">=</span><span class="token operator">&lt;</span>cluster-name<span class="token operator">&gt;</span> --namespace<span class="token operator">=</span><span class="token operator">&lt;</span>namespace<span class="token operator">&gt;</span> --user<span class="token operator">=</span><span class="token operator">&lt;</span>service-account-name<span class="token operator">&gt;</span>
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><p>Alternatively, you can provide the values by changing the <code>.kube/config.yaml</code> file manually:</p><div class="remark-highlight"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
 <span class="token key atrule">clusters</span><span class="token punctuation">:</span>
 <span class="token punctuation">-</span> <span class="token key atrule">cluster</span><span class="token punctuation">:</span>
     <span class="token key atrule">insecure-skip-tls-verify</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
     <span class="token key atrule">server</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//5.6.7.8
   <span class="token key atrule">name</span><span class="token punctuation">:</span> &lt;cluster<span class="token punctuation">-</span>name<span class="token punctuation">&gt;</span>
 <span class="token key atrule">contexts</span><span class="token punctuation">:</span>
 <span class="token punctuation">-</span> <span class="token key atrule">context</span><span class="token punctuation">:</span>
     <span class="token key atrule">cluster</span><span class="token punctuation">:</span> &lt;cluster<span class="token punctuation">-</span>name<span class="token punctuation">&gt;</span>
     <span class="token key atrule">namespace</span><span class="token punctuation">:</span> &lt;namespace<span class="token punctuation">&gt;</span>
     <span class="token key atrule">user</span><span class="token punctuation">:</span> &lt;service<span class="token punctuation">-</span>account<span class="token punctuation">-</span>name<span class="token punctuation">&gt;</span>
   <span class="token key atrule">name</span><span class="token punctuation">:</span> &lt;context<span class="token punctuation">-</span>name<span class="token punctuation">&gt;</span>
 <span class="token key atrule">current-context</span><span class="token punctuation">:</span> <span class="token string">&quot;&lt;context-name&gt;&quot;</span>
 <span class="token key atrule">kind</span><span class="token punctuation">:</span> Config
 <span class="token key atrule">preferences</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
 <span class="token key atrule">users</span><span class="token punctuation">:</span>
 <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> &lt;service<span class="token punctuation">-</span>account<span class="token punctuation">-</span>name<span class="token punctuation">&gt;</span>
   <span class="token key atrule">user</span><span class="token punctuation">:</span>
     <span class="token key atrule">token</span><span class="token punctuation">:</span> &lt;token<span class="token punctuation">&gt;</span>
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><div class="my-4 v-item-group theme--light v-expansion-panels"><div aria-expanded="false" class="v-expansion-panel"><button type="button" class="v-expansion-panel-header">
      Code examples
    <div class="v-expansion-panel-header__icon"><i aria-hidden="true" class="v-icon notranslate mdi mdi-chevron-down theme--light"></i></div></button><div class="v-expansion-panel-content" style="display:none;"><div class="v-expansion-panel-content__wrap"><p>Python example:</p><div class="remark-highlight"><pre class="language-python"><code class="language-python">factory <span class="token operator">=</span> CommonFactory<span class="token punctuation">.</span>create_from_kubernetes<span class="token punctuation">(</span>
      namespace<span class="token operator">=</span><span class="token string">&quot;th2-schema&quot;</span><span class="token punctuation">,</span> 
      box_name<span class="token operator">=</span><span class="token string">&quot;script-entry-point&quot;</span><span class="token punctuation">)</span>
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><p>Java example:</p><div class="remark-highlight"><pre class="language-java"><code class="language-java"><span class="token keyword">var</span> factory <span class="token operator">=</span> <span class="token class-name">CommonFactory</span><span class="token punctuation">.</span><span class="token function">createFromKubernetes</span><span class="token punctuation">(</span>
      namespace<span class="token punctuation">,</span> 
      boxName<span class="token punctuation">,</span> 
      contextName<span class="token punctuation">)</span>
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div></div></div></div></div><p>More details about this option <a href="../../fundamentals/th2-common/#option-2-access-config-files-from-the-kubernetes-cluster">here</a></p><p>After completion of this step, <a href="./#31-run-without-arguments">run your box without arguments</a>.</p><h3 id="212-provide-connection-configs-manually"><a href="#212-provide-connection-configs-manually" aria-hidden="true">#</a>2.1.2. Provide connection configs manually</h3><p><code>CommonFactory</code> is a class that contains a set of tools for creating connections between boxes in th2 cluster and module developed.
Essentially, it transfers the <code>.json</code> configuration files to the <code>CommonFactory</code> object:</p><ul><li><code>grpc.json</code></li><li><code>mq.json</code></li><li><code>rabbit.json</code></li></ul><p>Configuration of these files varies depending on the components that are to be in interaction with your component.</p><p><a href="../../fundamentals/th2-common/#th2-common-integrations-configuration">integrations</a></p><div class="my-4 v-item-group theme--light v-expansion-panels"><div aria-expanded="false" class="v-expansion-panel"><button type="button" class="v-expansion-panel-header">
      Passing .json files to CommonFactory
    <div class="v-expansion-panel-header__icon"><i aria-hidden="true" class="v-icon notranslate mdi mdi-chevron-down theme--light"></i></div></button><div class="v-expansion-panel-content" style="display:none;"><div class="v-expansion-panel-content__wrap"><p>Python example:</p><div class="remark-highlight"><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> th2_common<span class="token punctuation">.</span>schema<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>common_factory <span class="token keyword">import</span> CommonFactory

factory <span class="token operator">=</span> CommonFactory<span class="token punctuation">(</span>
    grpc_router_config_filepath<span class="token operator">=</span><span class="token string">&quot;./configs/grpc.json&quot;</span><span class="token punctuation">,</span>
    rabbit_mq_config_filepath<span class="token operator">=</span><span class="token string">&quot;./configs/rabbitMQ.json&quot;</span><span class="token punctuation">,</span>
    mq_router_config_filepath<span class="token operator">=</span><span class="token string">&quot;./configs/mq.json&quot;</span><span class="token punctuation">)</span>
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><p>Java example:</p><div class="remark-highlight"><pre class="language-java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>exactpro<span class="token punctuation">.</span>th2<span class="token punctuation">.</span>common<span class="token punctuation">.</span>schema<span class="token punctuation">.</span>factory<span class="token punctuation">.</span></span><span class="token class-name">CommonFactory</span><span class="token punctuation">;</span>

<span class="token class-name">CommonFactory</span> factory <span class="token operator">=</span> <span class="token class-name">CommonFactory</span><span class="token punctuation">.</span><span class="token function">createFromArguments</span><span class="token punctuation">(</span><span class="token string">&quot;--configs&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;./configs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div></div></div></div></div><div class="my-4 v-item-group theme--light v-expansion-panels"><div aria-expanded="false" class="v-expansion-panel"><button type="button" class="v-expansion-panel-header">
      The .json files
    <div class="v-expansion-panel-header__icon"><i aria-hidden="true" class="v-icon notranslate mdi mdi-chevron-down theme--light"></i></div></button><div class="v-expansion-panel-content" style="display:none;"><div class="v-expansion-panel-content__wrap"><p>Configuration examples can be found below. 
Documents for downloading and modifications <a href="https://github.com/th2-net/th2-common-py/tree/e99d8df8e164f840daeb39eb66410a5022493c34/test/test_configuration/resources/json_configuration" target="_blank" rel="nofollow noopener noreferrer">here</a>:</p><p><strong>gRPC.json file</strong></p><p>It contains the host and ports of components for interaction (<strong>act</strong> and <strong>check1</strong> in this example). 
<code>service-class</code> parameter - in this case it is <code>ActService</code> or <code>Check1Service</code>. 
<code>ports</code> is an external ports of the pods to interact with - <strong>act</strong> and <strong>check1</strong> pods here.
<code>host</code> parameter is for kubernetes cluster hostname (cluster IP). You have several options where you can find this information:</p><ul><li>Kubernetes Dashboard â†’ Services</li><li>CLI â†’ <code>kubectl get services</code></li></ul><div class="remark-highlight"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;services&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;Act&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;service-class&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ActService&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;endpoints&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;act&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;host&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;kubernetes cluster hostname&gt;&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;port&quot;</span><span class="token operator">:</span> &lt;external port of act pod&gt;
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;strategy&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;robin&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;endpoints&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;act&quot;</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Check1&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;service-class&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Check1Service&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;endpoints&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;check1&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;host&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;kubernetes cluster hostname&gt;&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;port&quot;</span><span class="token operator">:</span> &lt;external port of check1 pod&gt;
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;strategy&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;robin&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;endpoints&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;check1&quot;</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><p><strong>MQ.json file</strong></p><p>It contains information about the <strong>routing-key</strong> from the external box (named <strong>script-entry-point</strong> in this example) to the estore. 
You can find this information in several places:</p><ul><li>Kubernetes Dashboard â†’ ConfigMaps â†’ script-entry-point-app-config</li><li>RabbitMQ <code>event-store-pin</code> queue</li></ul><div class="remark-highlight"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;queues&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;event-store-pin&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;attributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;event&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;publish&quot;</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;exchange&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fill with rabbit exchange name&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;filters&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fill with routing key of script to estore&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;queue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;not_necessary&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><p><strong>RabbitMQ.json file</strong></p><p>It contains RabbitMQ credentials. Possible data sources:</p><ul><li>Kubernetes dashboard â†’ ConfigMaps â†’ rabbit-mq-app-config</li><li>RabbitMQ credentials configured in secrets (can be found below)</li></ul><div class="remark-highlight"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;host&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;kubernetes cluster hostname&gt;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;vHost&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vHost from RabbitMQ. Equal to namespace name by default&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;port&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;external port of RabbitMQ&gt;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;username&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;RabbitMQ username&gt;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;password&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;RabbitMQ password&gt;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exchangeName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;queue exchange. demo_example by default&gt;&quot;</span>
<span class="token punctuation">}</span>
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><p><code>secrets.yaml</code></p><div class="remark-highlight"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">rabbitmq</span><span class="token punctuation">:</span>
<span class="token comment"># set admin user credentials, that will be created during deployment</span>
  <span class="token key atrule">rabbitmqUsername</span><span class="token punctuation">:</span> th2
  <span class="token key atrule">rabbitmqPassword</span><span class="token punctuation">:</span> rab<span class="token punctuation">-</span>pass
  <span class="token comment"># must be a random string</span>
  <span class="token key atrule">rabbitmqErlangCookie</span><span class="token punctuation">:</span> cookie
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div></div></div></div></div><p>After transferring <code>.json</code> files, you need to create MQ routers and gRPC services. 
They act as connectors to the required modules.</p><div class="my-4 v-item-group theme--light v-expansion-panels"><div aria-expanded="false" class="v-expansion-panel"><button type="button" class="v-expansion-panel-header">
      Example of creating gRPC routers
    <div class="v-expansion-panel-header__icon"><i aria-hidden="true" class="v-icon notranslate mdi mdi-chevron-down theme--light"></i></div></button><div class="v-expansion-panel-content" style="display:none;"><div class="v-expansion-panel-content__wrap"><div class="remark-highlight"><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> th2_common<span class="token punctuation">.</span>schema<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>common_factory <span class="token keyword">import</span> CommonFactory
<span class="token keyword">from</span> th2_grpc_act_template<span class="token punctuation">.</span>act_service <span class="token keyword">import</span> ActService
<span class="token keyword">from</span> th2_grpc_check1<span class="token punctuation">.</span>check1_service <span class="token keyword">import</span> Check1Service

<span class="token keyword">def</span> <span class="token function">connect</span><span class="token punctuation">(</span>config_path<span class="token punctuation">,</span> tries<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        logging<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">'Trying to connect...'</span><span class="token punctuation">)</span>
        factory <span class="token operator">=</span> CommonFactory<span class="token punctuation">(</span>config_path<span class="token operator">=</span>config_path<span class="token punctuation">)</span>
        grpc_router <span class="token operator">=</span> factory<span class="token punctuation">.</span>grpc_router
        act <span class="token operator">=</span> grpc_router<span class="token punctuation">.</span>get_service<span class="token punctuation">(</span>ActService<span class="token punctuation">)</span>
        check <span class="token operator">=</span> grpc_router<span class="token punctuation">.</span>get_service<span class="token punctuation">(</span>Check1Service<span class="token punctuation">)</span>
        estore <span class="token operator">=</span> factory<span class="token punctuation">.</span>event_batch_router
        logging<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">'Connection established.'</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token string">'act'</span><span class="token punctuation">:</span> act<span class="token punctuation">,</span>
                <span class="token string">'check'</span><span class="token punctuation">:</span> check<span class="token punctuation">,</span>
                <span class="token string">'estore'</span><span class="token punctuation">:</span> estore<span class="token punctuation">,</span>
                <span class="token string">'factory'</span><span class="token punctuation">:</span> factory<span class="token punctuation">}</span>
    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        <span class="token keyword">if</span> tries <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
            logging<span class="token punctuation">.</span>error<span class="token punctuation">(</span><span class="token string">'Unable to connect.'</span><span class="token punctuation">)</span>
            logging<span class="token punctuation">.</span>error<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>
            logging<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">'Retry in 3...'</span><span class="token punctuation">)</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Unable to connect: \n </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">str</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
            time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
            connect<span class="token punctuation">(</span>config_path<span class="token punctuation">,</span> tries<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span>
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div></div></div></div></div><p>More details about this option <a href="../../fundamentals/th2-common/#option-1-user-creates-the-configuration-files-and-then-provides-the-path-to-these-files">here</a></p><p>After completion of this step, <a href="#31-run-without-arguments">run your box without arguments</a>.</p><h3 id="213-provide-configs-using-cli-command-arguments"><a href="#213-provide-configs-using-cli-command-arguments" aria-hidden="true">#</a>2.1.3. Provide configs using CLI command arguments</h3><p>The <em>external box</em>, configured via arguments passed to the CLI run command, is created the following way (see examples for specific programming languages below):
In Java/Kotlin, use the <code>createFromArguments</code> method of the <code>CommonFactory</code> class:</p><div class="remark-highlight"><pre class="language-java"><code class="language-java"><span class="token keyword">var</span> factory <span class="token operator">=</span> <span class="token class-name">CommonFactory</span><span class="token punctuation">.</span><span class="token function">createFromArguments</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><p>In Python, use the <code>create_from_arguments</code> method of the <code>CommonFactory</code> class:</p><div class="remark-highlight"><pre class="language-python"><code class="language-python">factory <span class="token operator">=</span> CommonFactory<span class="token punctuation">.</span>create_from_arguments<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><p>After completion of this step, <a href="./#32-run-with-arguments">run your box with arguments</a>.</p><h2 id="3-run-external-box"><a href="#3-run-external-box" aria-hidden="true">#</a>3. Run external box</h2><p>Depending on the method used to create the component, you can run it in different ways.</p><h3 id="31-run-without-arguments"><a href="#31-run-without-arguments" aria-hidden="true">#</a>3.1 Run without arguments</h3><p>The main commands to run the box are slightly different for different programming languages:</p><p>Java: <code>gradle run</code></p><p>Python: <code>python run.py</code></p><h3 id="32-run-with-arguments"><a href="#32-run-with-arguments" aria-hidden="true">#</a>3.2 Run with arguments</h3><p>If you have not specified configs for <code>th2-common</code> to connect to the th2, you should specify them along with arguments in terminal. 
You can use one of the groups of arguments provided below.</p><div role="alert" class="v-alert my-3 v-sheet theme--light v-alert--border v-alert--text v-alert--border-left orange--text text--darken-3" data-v-e2b44c62><div class="v-alert__wrapper"><i aria-hidden="true" class="v-icon notranslate v-alert__icon mdi mdi-alert-circle theme--light orange--text text--darken-3"></i><div class="v-alert__content"><p>Arguments from different groups cannot be used together.</p></div><div class="v-alert__border v-alert__border--left"></div></div></div><p>Local files configuration arguments:</p><ul><li><code>--rabbitConfiguration</code> â€“ a path to the <code>.json</code> file with RabbitMQ configuration</li><li><code>--messageRouterConfiguration</code> â€“ a path to the <code>.json</code> file with configuration for MessageRouter</li><li><code>--grpcRouterConfiguration</code> â€“ a path to the <code>.json</code> file with configuration for gRPCRouter</li><li><code>--cradleConfiguration</code> â€“ a path to the <code>.json</code> file with configuration for Cradle</li><li><code>--customConfiguration</code> â€“ a path to the <code>.json</code> file with a custom configuration</li><li><code>--dictionariesDir</code> â€“ a path to the directory with encoded dictionary files</li><li><code>--prometheusConfiguration</code> â€“ a path to the <code>.json</code> file with a configuration for Prometheus metrics server</li><li><code>--boxConfiguration</code> â€“ a path to the <code>.json</code> file with external box</li><li><code>-c/</code> and <code>--configs</code> â€“ a folder with <code>.json</code> files for schema configurations with following names:</li></ul><p>1) rabbitMq.json â€“ a configuration file for RabbitMQ</p><p>2) mq.json â€“ a configuration file for MessageRouter</p><p>3) grpc.json â€“ a configuration file for gRPCRouter</p><p>4) cradle.json â€“ a configuration file for the Cradle API</p><p>5) custom.json â€“ custom configuration</p><p>Kubernetes-based configuration arguments:</p><div role="alert" class="v-alert my-3 v-sheet theme--light v-alert--border v-alert--text v-alert--border-left orange--text text--darken-3" data-v-e2b44c62><div class="v-alert__wrapper"><i aria-hidden="true" class="v-icon notranslate v-alert__icon mdi mdi-alert-circle theme--light orange--text text--darken-3"></i><div class="v-alert__content"><p>when using these arguments, prior installation and configuration of kubectl is required</p></div><div class="v-alert__border v-alert__border--left"></div></div></div><ul><li><p><code>--namespace</code> â€“ the namespace in Kubernetes to search for config maps</p></li><li><p><code>--boxName</code> â€“ the name of the target th2 box placed in the specified Kubernetes namespace</p></li><li><p><code>--contextName</code> â€“ the context name to search connection parameters in kubeconfig</p></li><li><p><code>--dictionaries</code> â€“ the mapping between a dictionary in infra-schema and a dictionary type specified in the following format: <code>--dictionaries &lt;dictionary name&gt;=&lt;dictionary type&gt; [&lt;dictionary name&gt;=&lt;dictionary type&gt;]</code>. 
This argument is provided  when dictionaries are required to start a specific box.</p></li></ul><p>A CLI command example:</p><div class="remark-highlight"><pre class="language-java"><code class="language-java">gradle run <span class="token operator">--</span>args<span class="token operator">=</span>'<span class="token operator">--</span>namespace myNamespace <span class="token operator">--</span>boxName myExternalBox <span class="token operator">--</span>contextName myContext'
</code></pre><button class="copy" data-v-fbb0a762><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" data-v-fbb0a762><path d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" data-v-fbb0a762></path></svg></button></div><p>With these parameters, your component will connect to the destination Kubernetes cluster and namespace, and find the right entry point (that is external box itself) to act from.</p><p>Also, there are special ConfigMaps in the <em>schema</em> namespace with the parameters for connecting to the th2 infrastructure. 
<code>th2-common</code> will save it automatically in the repository of the box you are running.</p></div><!----><!----></article></div><aside class="pl-5 pt-5 page-content-panel layout__aside--right" data-v-b7b561fc><nav class="pr-2 sticky-page-content" data-v-b7b561fc><div data-v-b7b561fc><div><a href="https://github.com/th2-net/th2-docs/blob/master/content/docs/cookbook/run-box-outside-cluster/_index.md" target="_blank" class="v-btn v-btn--icon v-btn--round theme--light v-size--default"><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-pencil-outline theme--light"></i></span></a><a href="https://github.com/th2-net/th2-docs/blob/master/content/docs/cookbook/run-box-outside-cluster/_index.md" target="_blank">
       Edit this page
    </a></div></div><div data-v-b7b561fc><div><a href="https://github.com/th2-net/th2-docs/issues/new?title=One thing is unclear after reading &quot;How to run a box outside the cluster&quot; article&amp;body=I've read [&quot;How to run a box outside the cluster&quot; article](https://github.com/th2-net/th2-docs/blob/master/content/cookbook/run-box-outside-cluster/_index.md) and there is one problem.&amp;assignees=d0rich&amp;labels=by-reader" target="_blank" class="v-btn v-btn--icon v-btn--round theme--light v-size--default"><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-alert-circle-outline theme--light"></i></span></a><a href="https://github.com/th2-net/th2-docs/issues/new?title=One thing is unclear after reading &quot;How to run a box outside the cluster&quot; article&amp;body=I've read [&quot;How to run a box outside the cluster&quot; article](https://github.com/th2-net/th2-docs/blob/master/content/cookbook/run-box-outside-cluster/_index.md) and there is one problem.&amp;assignees=d0rich&amp;labels=by-reader" target="_blank">
       Create an issue
    </a></div></div><h3 class="mb-3 mt-7" data-v-b7b561fc>On this page</h3><ul data-v-b7b561fc><li class="font-weight-bold" data-v-b7b561fc><a href="#how-to-run-a-box-outside-the-cluster" data-v-b7b561fc><div data-v-b7b561fc>How to run a box outside the cluster</div></a></li><li class="py-2" data-v-b7b561fc><a href="#prerequisites" data-v-b7b561fc><div data-v-b7b561fc>Prerequisites</div></a></li><li class="py-2 h2-border" data-v-b7b561fc><a href="#running-external-box" data-v-b7b561fc><div data-v-b7b561fc>Running external box</div></a></li><li class="py-2 h2-border" data-v-b7b561fc><a href="#1-configure-th2box-custom-resource" data-v-b7b561fc><div data-v-b7b561fc>1. Configure th2box custom resource</div></a></li><li class="py-2 h2-border" data-v-b7b561fc><a href="#2-create-a-box-with-th2-common-library" data-v-b7b561fc><div data-v-b7b561fc>2. Create a box with th2-common library</div></a></li><li class="py-2 h2-border" data-v-b7b561fc><a href="#21-provide-connection-configs-for-th2-common-library" data-v-b7b561fc><div data-v-b7b561fc>2.1. Provide connection configs for th2-common library</div></a></li><li class="ml-2 pb-2" data-v-b7b561fc><a href="#211-providing-connection-configs-via-kubectl" data-v-b7b561fc><div data-v-b7b561fc>2.1.1. Providing connection configs via kubectl</div></a></li><li class="ml-2 pb-2" data-v-b7b561fc><a href="#212-provide-connection-configs-manually" data-v-b7b561fc><div data-v-b7b561fc>2.1.2. Provide connection configs manually</div></a></li><li class="ml-2 pb-2" data-v-b7b561fc><a href="#213-provide-configs-using-cli-command-arguments" data-v-b7b561fc><div data-v-b7b561fc>2.1.3. Provide configs using CLI command arguments</div></a></li><li class="py-2 h2-border" data-v-b7b561fc><a href="#3-run-external-box" data-v-b7b561fc><div data-v-b7b561fc>3. Run external box</div></a></li><li class="ml-2 pb-2" data-v-b7b561fc><a href="#31-run-without-arguments" data-v-b7b561fc><div data-v-b7b561fc>3.1 Run without arguments</div></a></li><li class="ml-2 pb-2" data-v-b7b561fc><a href="#32-run-with-arguments" data-v-b7b561fc><div data-v-b7b561fc>3.2 Run with arguments</div></a></li></ul></nav></aside></div></div></div></main><footer class="v-footer flex justify-center py-6 v-sheet theme--dark secondary" data-v-28b3144a data-v-7b23e68f><div class="footer__content col" data-v-28b3144a><div class="d-flex justify-space-between footer__sections" data-v-28b3144a><div class="d-flex flex-column px-8 py-4 pa-sm-0 pa-xs-0" data-v-28b3144a><a href="https://exactpro.com/" class="mb-4" data-v-28b3144a><img src="/assets/img/logo_white.118f94fb.svg" style="width:max(200px, 100%);" data-v-28b3144a></a><div class="text-center" data-v-28b3144a>
          Build Software to Test Software
        </div></div><div class="d-flex flex-column px-8 py-4 pa-sm-0 pa-xs-0" data-v-28b3144a><h2 data-v-28b3144a>Contact Us</h2><div class="highliter my-3" data-v-28b3144a></div><div class="d-flex align-center contact" data-v-28b3144a><a href="mailto:docops@exactpro.com" class="v-btn v-btn--icon v-btn--round theme--dark v-size--default" data-v-28b3144a><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-email theme--dark" data-v-28b3144a></i></span></a><a href="mailto:docops@exactpro.com" class="contact__text" data-v-28b3144a>
            docops@exactpro.com
          </a></div><div class="d-flex align-center contact" data-v-28b3144a><a href="mailto:info@exactpro.com" class="v-btn v-btn--icon v-btn--round theme--dark v-size--default" data-v-28b3144a><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-email theme--dark" data-v-28b3144a></i></span></a><a href="mailto:info@exactpro.com" class="contact__text" data-v-28b3144a>
            info@exactpro.com
          </a></div><div class="d-flex align-center contact" data-v-28b3144a><a href="tel:+4402033191644" class="v-btn v-btn--icon v-btn--round theme--dark v-size--default" data-v-28b3144a><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-phone theme--dark" data-v-28b3144a></i></span></a><a href="tel:+4402033191644" class="contact__text" data-v-28b3144a>
            +44 (0) 20 3319 1644
          </a></div><div class="d-flex align-center contact" data-v-28b3144a><a href="tel:+16463403000" class="v-btn v-btn--icon v-btn--round theme--dark v-size--default" data-v-28b3144a><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-phone theme--dark" data-v-28b3144a></i></span></a><a href="tel:+16463403000" class="contact__text" data-v-28b3144a>
            +1 (646) 340 3000
          </a></div></div><div class="d-flex flex-column px-8 py-4 pa-sm-0 pa-xs-0" data-v-28b3144a><h2 data-v-28b3144a>Follow Us</h2><div class="highliter my-3" data-v-28b3144a></div><div class="d-flex" data-v-28b3144a><a href="https://github.com/th2-net" target="_blank" class="mr-2 v-btn v-btn--icon v-btn--round v-btn--tile theme--dark v-size--large" data-v-28b3144a><span class="v-btn__content"><div class="v-image v-responsive theme--dark" data-v-28b3144a><div class="v-image__image v-image__image--preload v-image__image--cover" style="background-image:;background-position:center center;"></div><div class="v-responsive__content"></div></div></span></a><a href="https://www.facebook.com/exactpro/" target="_blank" class="mr-2 v-btn v-btn--icon v-btn--round v-btn--tile theme--dark v-size--large" data-v-28b3144a><span class="v-btn__content"><div class="v-image v-responsive theme--dark" data-v-28b3144a><div class="v-image__image v-image__image--preload v-image__image--cover" style="background-image:;background-position:center center;"></div><div class="v-responsive__content"></div></div></span></a><a href="https://twitter.com/exactpro" target="_blank" class="mr-2 v-btn v-btn--icon v-btn--round v-btn--tile theme--dark v-size--large" data-v-28b3144a><span class="v-btn__content"><div class="v-image v-responsive theme--dark" data-v-28b3144a><div class="v-image__image v-image__image--preload v-image__image--cover" style="background-image:;background-position:center center;"></div><div class="v-responsive__content"></div></div></span></a><a href="https://www.linkedin.com/company/exactpro-systems-llc?trk=biz-companies-cym" target="_blank" class="mr-2 v-btn v-btn--icon v-btn--round v-btn--tile theme--dark v-size--large" data-v-28b3144a><span class="v-btn__content"><div class="v-image v-responsive theme--dark" data-v-28b3144a><div class="v-image__image v-image__image--preload v-image__image--cover" style="background-image:;background-position:center center;"></div><div class="v-responsive__content"></div></div></span></a><a href="https://www.youtube.com/c/exactprosystems" target="_blank" class="mr-2 v-btn v-btn--icon v-btn--round v-btn--tile theme--dark v-size--large" data-v-28b3144a><span class="v-btn__content"><div class="v-image v-responsive theme--dark" data-v-28b3144a><div class="v-image__image v-image__image--preload v-image__image--cover" style="background-image:;background-position:center center;"></div><div class="v-responsive__content"></div></div></span></a></div></div></div><hr role="separator" aria-orientation="horizontal" class="my-12 v-divider theme--dark" data-v-28b3144a><div class="text-center text-caption" data-v-28b3144a>
      Copyright Â© 2009 - 2023 Exactpro. All Rights Reserved. Exactpro refers to Exactpro Systems Limited, registered in England and Wales, and/or one of its subsidiaries, each of which is a separate legal entity, registered in the relevant jurisdictions.
    </div><div class="text-center text-caption policies" data-v-28b3144a><a href="https://exactpro.com/terms-and-conditions" target="blank" class="mx-1" data-v-28b3144a>
         Terms and Conditions
      </a><a href="https://exactpro.com/privacy-policy" target="blank" class="mx-1" data-v-28b3144a>
         Privacy policy
      </a><a href="https://exactpro.com/cookies-policy" target="blank" class="mx-1" data-v-28b3144a>
         Cookies policy
      </a></div></div></footer></div></div></div>
    <script>window.__INITIAL_STATE__={"data":{"doc":{"title":"How to run a box outside the cluster","inner_title":"","description":"How to run a box outside the cluster\n\nth2 provides the capability to run external components as part of the th2 Kubernetes cluster. \nTypical use cases of the externalBox feature include:\n\ntesting and debugging a new box\nrunning the scripts for specific tasks (including testing activities)\nrunning th2 components that are used on-demand","content":"\n# How to run a box outside the cluster\n\nth2 provides the capability to run external components as part of the th2 Kubernetes cluster. \nTypical use cases of the `externalBox` feature include:\n\n- testing and debugging a new box\n- running the scripts for specific tasks (including testing activities)\n- running th2 components that are used on-demand\n\n\n\u003C!--more--\u003E\n\n## Prerequisites\n\n1) A th2 cluster and a box with the `externalBox` option specified in its config.\n\n2) Kubectl installed and connected to the Kubernetes cluster (not required if you are defining the config for the `externalBox` manually).\n\n3) **common** library used in the external componentâ€™s code:\n\n- Java \u002F Kotlin â€“ [th2-common-j](https:\u002F\u002Fgithub.com\u002Fth2-net\u002Fth2-common-j)  version 3.9.1 and above.\n- Python â€“ [th2-common-py](https:\u002F\u002Fgithub.com\u002Fth2-net\u002Fth2-common-py).\n\n## Running external box\n\nTo run an external box in your th2 Kubernetes cluster, follow the steps as per the algorithm below.\n\n![message_chain_with_two_checkpoints](.\u002Fexternal_box.png )\n\n## 1. Configure th2box custom resource\n\nWith `externalBox`, you can configure boxes that will run outside Kubernetes cluster. \nTo do that, add the `externalBox` details into the `extended-settings` section of the componentâ€™s \u003Cterm term=\"Custom resource\"\u003Ecustom resource\u003C\u002Fterm\u003E.\n\nFirst, add `externalBox.enabled: true` to the existing CR box. \nThen, provide the address for the RabbitMQ server using the `address` field. \nFinally, specify the internal mapping for the ports in the `endpoints` list by giving a `name` to the port and providing its number as a `targetPort` value.\n\n\u003Cnotice warning\u003E\n\nIf an external box has a pin with the `subscribe` attribute and there is a box in Kubernetes that publishes on your pin (e.g. the **act** component has the `from_codec` pin receiving messages from the **codec** via RabbitMQ), then, upon closing your external application, the messages will be accumulated in the queue, which can overfill the cluster memory. \nTo prevent that, configure the queue limit on your external box pins.\n\n\u003C\u002Fnotice\u003E\n\nThe full list of `externalBox` parameters can be found in the example below:\n\n`box_config.yaml`\n\n```yaml\n\napiVersion: th2.exactpro.com\u002Fv1\nkind: Th2Box\nmetadata:\n  name: box_name\nspec:\n  image-name: some_image_name\n  image-version: some_image_version\n  type: th2-box-type\n  custom-config:\n      # Depends on specific th2 component\n  pins:\n      # Depends on specific th2 component\n  extended-settings:\n    externalBox: \n      enabled: true\n      address: \u003Ce.g. IP\u003E\n      endpoints:\n        - name: 'grpc'\n          targetPort: 8080\n\n```\n\n## 2. Create a box with th2-common library\n\n`th2-common` is a special library that implements an API for th2 components. \nIt is available for two programming languages: Java\u002FKotlin â€“ [th2-common-j](https:\u002F\u002Fgithub.com\u002Fth2-net\u002Fth2-common-j)  and Python â€“ [th2-common-py](https:\u002F\u002Fgithub.com\u002Fth2-net\u002Fth2-common-py).\n\n\u003Cnotice note\u003E\n\n`th2-common` must be implemented in the module for running it as an *external box*.\n\n\u003C\u002Fnotice\u003E\n\nYou can create your own module or download a ready-made one.\nExamples of the repositories with `th2-common` implemented:\n- Java\u002FKotlin â€“ [th2-sim-template](https:\u002F\u002Fgithub.com\u002Fth2-net\u002Fth2-sim-template\u002F)\n- Python â€“ [th2-demo-script](https:\u002F\u002Fgithub.com\u002Fth2-net\u002Fth2-demo-script\u002F)\n\nMore details about `th2-common` can be found [here](..\u002F..\u002Ffundamentals\u002Fth2-common\u002F)\n\n## 2.1. Provide connection configs for th2-common library\n\nTo link your *external box* with the boxes inside the th2 cluster, `th2-common` needs connection configs. \nThere are three options to provide these configs â€“ manually, using kubectl, or using arguments in a startup command.\n\n### 2.1.1. Providing connection configs via kubectl\n\n\u003Cnotice note\u003E\n\nTo provide configs using this method, you need to have kubectl installed on your machine.\n\n\u003C\u002Fnotice\u003E\n\n1) Get your [service account token](https:\u002F\u002Fkubernetes.io\u002Fdocs\u002Freference\u002Faccess-authn-authz\u002Fservice-accounts-admin\u002F) (you can find details in [Managing Service Accounts page](https:\u002F\u002Fkubernetes.io\u002Fdocs\u002Freference\u002Faccess-authn-authz\u002Fservice-accounts-admin\u002F)).\n\n2) Configure Kubernetes context using kubectl (you can find detailed information in [Kubernetes documentation](https:\u002F\u002Fkubernetes.io\u002Fdocs\u002Ftasks\u002Faccess-application-cluster\u002Fconfigure-access-multiple-clusters\u002F)).\n\nTo specify the config details, use the following CLI commands:\n\n```shell\nkubectl config set-credentials \u003Cservice-account-name\u003E --token=\u003Ctoken\u003E\nkubectl config set-cluster \u003Ccluster-name\u003E --server=https:\u002F\u002F5.6.7.8 --insecure-skip-tls-verify\nkubectl config set-context \u003Ccontext-name\u003E --cluster=\u003Ccluster-name\u003E --namespace=\u003Cnamespace\u003E --user=\u003Cservice-account-name\u003E\n```\n\nAlternatively, you can provide the values by changing the `.kube\u002Fconfig.yaml` file manually:\n\n```yaml\n\napiVersion: v1\n clusters:\n - cluster:\n     insecure-skip-tls-verify: true\n     server: https:\u002F\u002F5.6.7.8\n   name: \u003Ccluster-name\u003E\n contexts:\n - context:\n     cluster: \u003Ccluster-name\u003E\n     namespace: \u003Cnamespace\u003E\n     user: \u003Cservice-account-name\u003E\n   name: \u003Ccontext-name\u003E\n current-context: \"\u003Ccontext-name\u003E\"\n kind: Config\n preferences: {}\n users:\n - name: \u003Cservice-account-name\u003E\n   user:\n     token: \u003Ctoken\u003E\n\n```\n\n\u003Cspoiler title=\"Code examples\"\u003E\n\nPython example:\n\n```python\nfactory = CommonFactory.create_from_kubernetes(\n      namespace=\"th2-schema\", \n      box_name=\"script-entry-point\")\n```\n\nJava example:\n\n```java\nvar factory = CommonFactory.createFromKubernetes(\n      namespace, \n      boxName, \n      contextName)\n```\n\n\u003C\u002Fspoiler\u003E  \n\nMore details about this option [here](..\u002F..\u002Ffundamentals\u002Fth2-common\u002F#option-2-access-config-files-from-the-kubernetes-cluster)\n\nAfter completion of this step, [run your box without arguments](.\u002F#31-run-without-arguments).\n\n### 2.1.2. Provide connection configs manually\n`CommonFactory` is a class that contains a set of tools for creating connections between boxes in th2 cluster and module developed.\nEssentially, it transfers the `.json` configuration files to the `CommonFactory` object:\n\n- `grpc.json`\n- `mq.json`\n- `rabbit.json`\n\nConfiguration of these files varies depending on the components that are to be in interaction with your component.\n\n[integrations](..\u002F..\u002Ffundamentals\u002Fth2-common\u002F#th2-common-integrations-configuration)\n\n\u003Cspoiler title=\"Passing .json files to CommonFactory\"\u003E\n\nPython example:\n\n```python\nfrom th2_common.schema.factory.common_factory import CommonFactory\n\nfactory = CommonFactory(\n    grpc_router_config_filepath=\".\u002Fconfigs\u002Fgrpc.json\",\n    rabbit_mq_config_filepath=\".\u002Fconfigs\u002FrabbitMQ.json\",\n    mq_router_config_filepath=\".\u002Fconfigs\u002Fmq.json\")\n```\n\nJava example:\n\n```java\nimport com.exactpro.th2.common.schema.factory.CommonFactory;\n\nCommonFactory factory = CommonFactory.createFromArguments(\"--configs\", \".\u002Fconfigs\");\n```\n\n\u003C\u002Fspoiler\u003E\n\n\u003Cspoiler title=\"The .json files\"\u003E\n\nConfiguration examples can be found below. \nDocuments for downloading and modifications [here](https:\u002F\u002Fgithub.com\u002Fth2-net\u002Fth2-common-py\u002Ftree\u002Fe99d8df8e164f840daeb39eb66410a5022493c34\u002Ftest\u002Ftest_configuration\u002Fresources\u002Fjson_configuration):\n\n**gRPC.json file**\n\nIt contains the host and ports of components for interaction (**act** and **check1** in this example). \n`service-class` parameter - in this case it is `ActService` or `Check1Service`. \n`ports` is an external ports of the pods to interact with - **act** and **check1** pods here.\n`host` parameter is for kubernetes cluster hostname (cluster IP). You have several options where you can find this information:\n\n- Kubernetes Dashboard â†’ Services\n- CLI â†’ `kubectl get services` \n\n```json\n{\n  \"services\": {\n    \"Act\": {\n      \"service-class\": \"ActService\",\n      \"endpoints\": {\n        \"act\": {\n          \"host\": \"\u003Ckubernetes cluster hostname\u003E\",\n          \"port\": \u003Cexternal port of act pod\u003E\n        }\n      },\n      \"strategy\": {\n        \"name\": \"robin\",\n        \"endpoints\": [\"act\"]\n      }\n    },\n    \"Check1\": {\n      \"service-class\": \"Check1Service\",\n      \"endpoints\": {\n        \"check1\": {\n          \"host\": \"\u003Ckubernetes cluster hostname\u003E\",\n          \"port\": \u003Cexternal port of check1 pod\u003E\n        }\n      },\n      \"strategy\": {\n        \"name\": \"robin\",\n        \"endpoints\": [\"check1\"]\n      }\n    }\n  }\n}\n```\n\n**MQ.json file**\n\nIt contains information about the **routing-key** from the external box (named **script-entry-point** in this example) to the estore. \nYou can find this information in several places:\n\n- Kubernetes Dashboard â†’ ConfigMaps â†’ script-entry-point-app-config\n- RabbitMQ `event-store-pin` queue\n\n```json\n{\n  \"queues\": {\n    \"event-store-pin\": {\n      \"attributes\": [\n        \"event\",\n        \"publish\"\n      ],\n      \"exchange\": \"fill with rabbit exchange name\",\n      \"filters\": [],\n      \"name\": \"fill with routing key of script to estore\",\n      \"queue\": \"not_necessary\"\n    }\n  }\n}\n```\n\n**RabbitMQ.json file**\n\nIt contains RabbitMQ credentials. Possible data sources:\n- Kubernetes dashboard â†’ ConfigMaps â†’ rabbit-mq-app-config\n- RabbitMQ credentials configured in secrets (can be found below)\n\n```json\n{\n  \"host\": \"\u003Ckubernetes cluster hostname\u003E\",\n  \"vHost\": \"vHost from RabbitMQ. Equal to namespace name by default\",\n  \"port\": \"\u003Cexternal port of RabbitMQ\u003E\",\n  \"username\": \"\u003CRabbitMQ username\u003E\",\n  \"password\": \"\u003CRabbitMQ password\u003E\",\n  \"exchangeName\": \"\u003Cqueue exchange. demo_example by default\u003E\"\n}\n```\n\n`secrets.yaml`\n\n```yaml\nrabbitmq:\n# set admin user credentials, that will be created during deployment\n  rabbitmqUsername: th2\n  rabbitmqPassword: rab-pass\n  # must be a random string\n  rabbitmqErlangCookie: cookie\n```\n\n\u003C\u002Fspoiler\u003E\n\nAfter transferring `.json` files, you need to create MQ routers and gRPC services. \nThey act as connectors to the required modules.\n\n\u003Cspoiler title=\"Example of creating gRPC routers\"\u003E\n\n```python\nfrom th2_common.schema.factory.common_factory import CommonFactory\nfrom th2_grpc_act_template.act_service import ActService\nfrom th2_grpc_check1.check1_service import Check1Service\n\ndef connect(config_path, tries=3):\n    try:\n        logging.info('Trying to connect...')\n        factory = CommonFactory(config_path=config_path)\n        grpc_router = factory.grpc_router\n        act = grpc_router.get_service(ActService)\n        check = grpc_router.get_service(Check1Service)\n        estore = factory.event_batch_router\n        logging.info('Connection established.')\n        return {'act': act,\n                'check': check,\n                'estore': estore,\n                'factory': factory}\n    except Exception as e:\n        if tries \u003E 0:\n            logging.error('Unable to connect.')\n            logging.error(str(e))\n            logging.info('Retry in 3...')\n            print(f'Unable to connect: \\n {str(e)}')\n            time.sleep(3)\n            connect(config_path, tries-1)\n        else:\n            raise\n```\n\n\u003C\u002Fspoiler\u003E\n\nMore details about this option [here](..\u002F..\u002Ffundamentals\u002Fth2-common\u002F#option-1-user-creates-the-configuration-files-and-then-provides-the-path-to-these-files)\n\nAfter completion of this step, [run your box without arguments](#31-run-without-arguments).\n\n### 2.1.3. Provide configs using CLI command arguments\n\nThe *external box*, configured via arguments passed to the CLI run command, is created the following way (see examples for specific programming languages below):\nIn Java\u002FKotlin, use the `createFromArguments` method of the `CommonFactory` class:\n\n```java\n\nvar factory = CommonFactory.createFromArguments(args);\n\n```\n\nIn Python, use the `create_from_arguments` method of the `CommonFactory` class:\n\n```python\n\nfactory = CommonFactory.create_from_arguments()\n\n```\n\nAfter completion of this step, [run your box with arguments](.\u002F#32-run-with-arguments).\n\n## 3. Run external box\n\nDepending on the method used to create the component, you can run it in different ways.\n\n### 3.1 Run without arguments\n\nThe main commands to run the box are slightly different for different programming languages:\n\nJava: `gradle run`\n\nPython: `python run.py`\n\n### 3.2 Run with arguments\n\nIf you have not specified configs for `th2-common` to connect to the th2, you should specify them along with arguments in terminal. \nYou can use one of the groups of arguments provided below.\n\n\u003Cnotice note\u003E\n\nArguments from different groups cannot be used together.\n\n\u003C\u002Fnotice\u003E\n\nLocal files configuration arguments:\n\n- `--rabbitConfiguration` â€“ a path to the `.json` file with RabbitMQ configuration\n- `--messageRouterConfiguration` â€“ a path to the `.json` file with configuration for MessageRouter\n- `--grpcRouterConfiguration` â€“ a path to the `.json` file with configuration for gRPCRouter\n- `--cradleConfiguration` â€“ a path to the `.json` file with configuration for Cradle\n- `--customConfiguration` â€“ a path to the `.json` file with a custom configuration\n- `--dictionariesDir` â€“ a path to the directory with encoded dictionary files\n- `--prometheusConfiguration` â€“ a path to the `.json` file with a configuration for Prometheus metrics server\n- `--boxConfiguration` â€“ a path to the `.json` file with external box\n- `-c\u002F` and `--configs` â€“ a folder with `.json` files for schema configurations with following names:\n\n1) rabbitMq.json â€“ a configuration file for RabbitMQ\n\n2) mq.json â€“ a configuration file for MessageRouter\n\n3) grpc.json â€“ a configuration file for gRPCRouter\n\n4) cradle.json â€“ a configuration file for the Cradle API\n\n5) custom.json â€“ custom configuration\n\nKubernetes-based configuration arguments:\n\n\u003Cnotice note\u003E\n\nwhen using these arguments, prior installation and configuration of kubectl is required\n\n\u003C\u002Fnotice\u003E\n\n- `--namespace` â€“ the namespace in Kubernetes to search for config maps\n\n- `--boxName` â€“ the name of the target th2 box placed in the specified Kubernetes namespace\n\n- `--contextName` â€“ the context name to search connection parameters in kubeconfig\n\n- `--dictionaries` â€“ the mapping between a dictionary in infra-schema and a dictionary type specified in the following format: `--dictionaries \u003Cdictionary name\u003E=\u003Cdictionary type\u003E [\u003Cdictionary name\u003E=\u003Cdictionary type\u003E]`. \nThis argument is provided  when dictionaries are required to start a specific box.\n\n\n\nA CLI command example:\n\n```java\n\ngradle run --args='--namespace myNamespace --boxName myExternalBox --contextName myContext'\n\n```\n\nWith these parameters, your component will connect to the destination Kubernetes cluster and namespace, and find the right entry point (that is external box itself) to act from.\n\nAlso, there are special ConfigMaps in the *schema* namespace with the parameters for connecting to the th2 infrastructure. \n`th2-common` will save it automatically in the repository of the box you are running.\n\n","fileInfo":{"path":"cookbook\u002Frun-box-outside-cluster\u002F_index.md"},"headings":[{"anchor":"#how-to-run-a-box-outside-the-cluster","value":"How to run a box outside the cluster","depth":1},{"anchor":"#prerequisites","value":"Prerequisites","depth":2},{"anchor":"#running-external-box","value":"Running external box","depth":2},{"anchor":"#1-configure-th2box-custom-resource","value":"1. Configure th2box custom resource","depth":2},{"anchor":"#2-create-a-box-with-th2-common-library","value":"2. Create a box with th2-common library","depth":2},{"anchor":"#21-provide-connection-configs-for-th2-common-library","value":"2.1. Provide connection configs for th2-common library","depth":2},{"anchor":"#211-providing-connection-configs-via-kubectl","value":"2.1.1. Providing connection configs via kubectl","depth":3},{"anchor":"#212-provide-connection-configs-manually","value":"2.1.2. Provide connection configs manually","depth":3},{"anchor":"#213-provide-configs-using-cli-command-arguments","value":"2.1.3. Provide configs using CLI command arguments","depth":3},{"anchor":"#3-run-external-box","value":"3. Run external box","depth":2},{"anchor":"#31-run-without-arguments","value":"3.1 Run without arguments","depth":3},{"anchor":"#32-run-with-arguments","value":"3.2 Run with arguments","depth":3}],"read_before":[],"continue_learning":[],"terms":[{"id":"Custom resource","title":"Custom resource","content":"\u003Cp\u003E\u003Cem\u003ECustom resources\u003C\u002Fem\u003E are extensions of the Kubernetes API. It is not necessarily available in a default Kubernetes installation. It represents a customization of a particular Kubernetes installation. However, many core Kubernetes functions are now built using CRs, making Kubernetes more modular.\u003C\u002Fp\u003E\n\u003Cp\u003EYou can find more information about \u003Cem\u003ECustom resources\u003C\u002Fem\u003E \u003Ca href=\"https:\u002F\u002Fkubernetes.io\u002Fdocs\u002Fconcepts\u002Fextend-kubernetes\u002Fapi-extension\u002Fcustom-resources\u002F\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehere\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n"}],"related":[],"hide_releases":null,"_githubRepository":null},"readmeDoc":null},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.b145ed99.js" defer></script><script src="/assets/js/page--src--templates--documentation-vue.8ae7a293.js" defer></script><script src="/assets/js/vue-remark--content--docs--cookbook--run-box-outside-cluster--index-md.bfa3ec17.js" defer></script>
  </body>
</html>
